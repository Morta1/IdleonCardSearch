"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5039],{55166:function(l,o,n){n.d(o,{q5:function(){return _},ZX:function(){return M},VR:function(){return t},Bt:function(){return P},d4:function(){return y},ai:function(){return f}});var e=n(66092),i=n(67924);let u=(l,o)=>{let n=null==l?void 0:l.reduce((l,n,e)=>{let i=d(o[e]);if(!i)return l;let{a:u="",c:t="",d:r="",b:a="",e:s="",g:c="",k:g="",f=""}=n||{},p=[u,t,r,a,s,c,g,f].map((l,o)=>o<7?"".concat(v(l)||"",","):v(l)),h=o[e].includes("Player_")?o[e].split("Player_")[1]:"";return"".concat(l,"\n").concat(i,",").concat(h,",").concat(p.join(""))},"cog type,name,build_rate,flaggy_rate,exp_mult,exp_rate,build_rate_boost,flaggy_rate_boost,flaggy_speed,exp_rate_boost"),e="empties_x,empties_y",i=null==o?void 0:o.slice(0,96);for(let l=0;l<8;l++)for(let o=0;o<12;o++)"Blank"===i[(7-l)*12+o]&&(e="".concat(e,"\n").concat(o,",").concat(l));return{cogData:n,empties:e}},d=l=>{if("Blank"===l)return null;if(l.includes("Player_"))return"Character";if("CogY"===l)return"Yang_Cog";if("CogZ"===l)return"Omni_Cog";let o=Object.entries({ad:"Plus",di:"X",up:"Up",do:"Down",ri:"Right",le:"Left",ro:"Row",co:"Col",cr:"Omni"}).find(o=>{let[n]=o;return l.endsWith(n)});return o?"".concat(o[1],"_Cog"):"Cog"},v=l=>{var o;return(null==l?void 0:null===(o=l.name)||void 0===o?void 0:o.includes("%"))?(null==l?void 0:l.value)>0&&!isNaN((null==l?void 0:l.value)/100)?(null==l?void 0:l.value)/100:"":(null==l?void 0:l.value)||""},t=(l,o)=>{let n=(null==l?void 0:l.CogMap)||(0,e.tryToParse)(null==l?void 0:l.CogM),i=(null==l?void 0:l.CogOrder)||(0,e.tryToParse)(null==l?void 0:l.CogO),d=a(s(n,null==i?void 0:i.length)),v=r(l,d,i,o),t=u(d,i);return{...v,cogstruction:t}},r=(l,o,n,i)=>c((null==l?void 0:l.FlagUnlock)||(0,e.tryToParse)(null==l?void 0:l.FlagU),(null==l?void 0:l.FlagsPlaced)||(0,e.tryToParse)(null==l?void 0:l.FlagP),o,n,i),a=l=>null==l?void 0:l.map(l=>{var o;return null===(o=Object.entries(l))||void 0===o?void 0:o.reduce((l,o)=>{let[n,e]=o;return(null===i.cogKeyMap||void 0===i.cogKeyMap?void 0:i.cogKeyMap[n])&&(null===i.cogKeyMap||void 0===i.cogKeyMap?void 0:i.cogKeyMap[n])!=="_"?{...l,[n]:{name:null===i.cogKeyMap||void 0===i.cogKeyMap?void 0:i.cogKeyMap[n],value:e}}:{...l,[n]:e}},{})}),s=(l,o)=>{let n=[];for(let e=0;e<o;e++)n[e]=(null==l?void 0:l[e])||{};return n},c=(l,o,n,e,u)=>{var d,v;let t=null==l?void 0:l.reduce((l,u,d)=>{let v=null==e?void 0:e[d],t=null==n?void 0:n[d];return[...l,{currentAmount:-11===u?null===i.flagsReqs||void 0===i.flagsReqs?void 0:i.flagsReqs[d]:parseFloat(u),requiredAmount:null===i.flagsReqs||void 0===i.flagsReqs?void 0:i.flagsReqs[d],flagPlaced:null==o?void 0:o.includes(d),cog:{name:v,stats:t,originalIndex:d}}]},[]),r=null!==(v=null==u?void 0:null===(d=u.gemShopPurchases)||void 0===d?void 0:d.find((l,o)=>118===o))&&void 0!==v?v:0,a=null==n?void 0:n.map((l,o)=>({...l,name:null==e?void 0:e[o]})).filter(l=>{let{name:o}=l;return null==o?void 0:o.includes("Player_")}).reduce((l,o)=>{let{a:n}=o;return l+((null==n?void 0:n.value)||0)},0),s=p(t);return{...s,baseBoard:t,totalFlaggyRate:(null==s?void 0:s.totalFlaggyRate)*(1+50*r/100),playersBuildRate:a}},g=(l,o,n)=>{var e,i;let u=[...l],d={...null===(e=u[o])||void 0===e?void 0:e.cog};return u[o]={...u[o],cog:{...null===(i=u[n])||void 0===i?void 0:i.cog}},u[n]={...u[n],cog:d},u},f=function(l,o){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2500,e=arguments.length>3?arguments[3]:void 0,i=[...l],u=p(i,e),d=null==u?void 0:u[o],v=[],t=Date.now();for(;Date.now()-t<n;){var r,a,s,c,f,h,m,y,b,M,_,q;let l=Math.floor(Math.random()*i.length),n=Math.floor(Math.random()*i.length);if(l===n||(null==i?void 0:null===(r=i[l])||void 0===r?void 0:r.currentAmount)<(null==i?void 0:null===(a=i[l])||void 0===a?void 0:a.requiredAmount)||(null==i?void 0:null===(s=i[n])||void 0===s?void 0:s.currentAmount)<(null==i?void 0:null===(c=i[n])||void 0===c?void 0:c.requiredAmount)||(null==i?void 0:null===(f=i[l])||void 0===f?void 0:f.flagPlaced)||(null==i?void 0:null===(y=i[l])||void 0===y?void 0:null===(m=y.cog)||void 0===m?void 0:null===(h=m.stats)||void 0===h?void 0:h.h)==="everything"||(null==i?void 0:null===(b=i[n])||void 0===b?void 0:b.flagPlaced)||(null==i?void 0:null===(q=i[n])||void 0===q?void 0:null===(_=q.cog)||void 0===_?void 0:null===(M=_.stats)||void 0===M?void 0:M.h)==="everything")continue;let t=g(i,l,n),P=p(t,e);(null==P?void 0:P[o])>d&&(u=P,i=t,d=null==P?void 0:P[o],v=[...v,{from:l,to:n}])}return{...u,moves:v}},p=(l,o)=>{let{boosted:n}=h(l),e=0,i=0,u=0,d=0,v=null==l?void 0:l.map((l,v)=>{var t,r,a,s,c,g,f,p,h,m,y,b;let{cog:M}=l||{},{e:_,g:q,f:P}=(null==n?void 0:n[v])||{},w=(null==M?void 0:null===(r=M.stats)||void 0===r?void 0:null===(t=r.a)||void 0===t?void 0:t.value)||0,k=(null==M?void 0:null===(s=M.stats)||void 0===s?void 0:null===(a=s.c)||void 0===a?void 0:a.value)||0,x=(null==M?void 0:null===(g=M.stats)||void 0===g?void 0:null===(c=g.b)||void 0===c?void 0:c.value)||0,R=0;if(null==M?void 0:null===(f=M.name)||void 0===f?void 0:f.includes("Player_")){let l=null==o?void 0:o.find(l=>{let{name:o}=l;return o===(null==M?void 0:M.name.replace("Player_",""))});l?(R=(null==l?void 0:l.constructionExpPerHour)*(1+((null==P?void 0:P.value)||0)/100),d+=R):d+=x}let C=w*(1+((null==_?void 0:_.value)||0)/100);e+=Math.max(C,0),i+=(null==M?void 0:null===(h=M.stats)||void 0===h?void 0:null===(p=h.d)||void 0===p?void 0:p.value)||0;let T=k+k*((null==q?void 0:q.value)||0)/100;return u+=Math.max(T,0),{...l,cog:{...M,stats:{...null==M?void 0:M.stats,a:{...null==M?void 0:null===(m=M.stats)||void 0===m?void 0:m.a,value:C},c:{...null==M?void 0:null===(y=M.stats)||void 0===y?void 0:y.c,value:T},...o?{b:{...null==M?void 0:null===(b=M.stats)||void 0===b?void 0:b.b,value:R}}:{}}}}});return o&&(v=null==v?void 0:v.map(l=>{var o,n,e,u,d,v,t,r;return(null==l?void 0:null===(n=l.cog)||void 0===n?void 0:null===(o=n.name)||void 0===o?void 0:o.includes("Player_"))?{...l,cog:{...null==l?void 0:l.cog,stats:{...null==l?void 0:null===(e=l.cog)||void 0===e?void 0:e.stats,b:{...null==l?void 0:null===(d=l.cog)||void 0===d?void 0:null===(u=d.stats)||void 0===u?void 0:u.b,value:(null==l?void 0:null===(r=l.cog)||void 0===r?void 0:null===(t=r.stats)||void 0===t?void 0:null===(v=t.b)||void 0===v?void 0:v.value)*(1+i/100)}}}}:l})),{totalBuildRate:e,totalExpRate:i,totalFlaggyRate:u,totalPlayerExpRate:d*(o?1+i/100:1),board:v}},h=l=>{let o={},n=Array(96).fill(0);for(let v=0;v<8;v++)for(let t=0;t<12;t++){var e,i,u,d;let r=(7-v)*12+t,a=null==l?void 0:null===(e=l[r])||void 0===e?void 0:e.cog,s=(null==l?void 0:null===(u=l[r])||void 0===u?void 0:null===(i=u.cog)||void 0===i?void 0:i.stats)||{},c=m(a,t,v);if((null==c?void 0:c.length)>0){c=null==c?void 0:null===(d=c.map(l=>{let[o,n]=l;return o<0||n<0||o>=12||n>=8?null:(7-n)*12+o}))||void 0===d?void 0:d.filter(l=>null!==l);let{e:l,f:e,g:i}=s||{};if(l||e||i)for(let l=0;l<c.length;l++){let e=c[l],{e:i,f:u,g:d}=s;if((null==n?void 0:n[e])===0)n[e]={e:{...i,value:Math.ceil(null==i?void 0:i.value)},f:{...u,value:Math.ceil(null==u?void 0:u.value)},g:{...d,value:Math.ceil(null==d?void 0:d.value)}};else{let{e:l,f:o,g:v}=n[e]||{};n[e]={e:{...l,value:Math.ceil(((null==l?void 0:l.value)||0)+((null==i?void 0:i.value)||0))},f:{...o,value:Math.ceil(((null==o?void 0:o.value)||0)+((null==u?void 0:u.value)||0))},g:{...v,value:Math.ceil(((null==v?void 0:v.value)||0)+((null==d?void 0:d.value)||0))}}}o[e]=[...o[e]||[],r]}}}return{boosted:n,relations:o}},m=(l,o,n)=>{var e;let i=[];switch(null==l?void 0:null===(e=l.stats)||void 0===e?void 0:e.h){case"diagonal":i.push([o-1,n-1],[o+1,n-1],[o-1,n+1],[o+1,n+1]);break;case"adjacent":i.push([o-1,n],[o,n+1],[o+1,n],[o,n-1]);break;case"up":i.push([o-1,n+2],[o,n+2],[o+1,n+2],[o-1,n+1],[o,n+1],[o+1,n+1]);break;case"right":i.push([o+2,n-1],[o+2,n],[o+2,n+1],[o+1,n-1],[o+1,n],[o+1,n+1]);break;case"down":i.push([o-1,n-2],[o,n-2],[o+1,n-2],[o-1,n-1],[o,n-1],[o+1,n-1]);break;case"left":i.push([o-2,n-1],[o-2,n],[o-2,n+1],[o-1,n-1],[o-1,n],[o-1,n+1]);break;case"row":for(let l=0;l<12;l++)o!==l&&i.push([l,n]);break;case"column":for(let l=0;l<8;l++)n!==l&&i.push([o,l]);break;case"corners":i.push([o-2,n-2],[o+2,n-2],[o-2,n+2],[o+2,n+2]);break;case"around":i.push([o,n-2],[o-1,n-1],[o,n-1],[o+1,n-1],[o-2,n],[o-1,n],[o+1,n],[o+2,n],[o-1,n+1],[o,n+1],[o+1,n+1],[o,n+2]);break;case"everything":for(let l=0;l<8;l++)for(let e=0;e<12;e++)(n!==l||o!==e)&&i.push([e,l])}return i},y=l=>b((null==l?void 0:l.TowerInfo)||(0,e.tryToParse)(null==l?void 0:l.Tower),(0,e.tryToParse)(null==l?void 0:l.TotemInfo)||(null==l?void 0:l.TotemInfo)),b=(l,o)=>{var n;let e=null==o?void 0:o[0],u=null==e?void 0:e.reduce((l,o)=>l+o,0),d=Object.keys(i.towers).length,v=l.slice(54,62),t=0,r=0;return{data:null===(n=Object.entries(i.towers))||void 0===n?void 0:n.map(o=>{let[n,e]=o,i=null==l?void 0:l[null==e?void 0:e.index];return(null==e?void 0:e.index)>=9&&(null==e?void 0:e.index)<=17&&i>50&&(t+=i-50),r+=i,{...e,name:n,level:i,nextLevel:i+1===l[e.index+d],progress:null==l?void 0:l[(null==e?void 0:e.index)+12+2*d],inProgress:null==v?void 0:v.includes(null==e?void 0:e.index),slot:null==v?void 0:v.findIndex(l=>l===(null==e?void 0:e.index))}}),buildMultiplier:null===i.randomList||void 0===i.randomList?void 0:i.randomList[13].split(" "),wizardOverLevels:t,totalLevels:r,totalWaves:u,towersTwo:null==l?void 0:l[2]}},M=(l,o,n,e)=>{var i;return 0===e?20*Math.pow(o+1,2)*Math.pow(1.6,o+1):Number(null==l?void 0:null===(i=l.buildMultiplier)||void 0===i?void 0:i[e])*Math.pow(n,o)},_=[250,500,750,1e3,1250,1500,2500],q=(l,o)=>6===o?l>=(null==_?void 0:_[6])?30:0:4===o?l>=(null==_?void 0:_[3])?100:0:5===o?l>=(null==_?void 0:_[5])?100:0:3===o&&l>=(null==_?void 0:_[1])?35:0,P=(l,o,n)=>50===o?Math.round(2*n+q(l,6,0)):101===o?q(l,4,0):100===o?q(l,5,0):15===o?q(l,3,0):0},95039:function(l,o,n){n.d(o,{RB:function(){return t},lC:function(){return r},wE:function(){return d}});var e=n(66092),i=n(67924),u=n(55166);let d=l=>v((0,e.tryToParse)(null==l?void 0:l.Rift)||(null==l?void 0:l.Rift)),v=l=>{let[o,n,e]=l||[];return{list:i.riftInfo,currentRift:parseInt(o),currentProgress:n,chars:e}},t=(l,o)=>{var n;return null==l?void 0:null===(n=l.list)||void 0===n?void 0:n.find((n,e)=>{let{riftBonus:i}=n;return i===o&&e<=(null==l?void 0:l.currentRift)})},r=(l,o)=>"Ref Spd"===o?l>=(null===u.q5||void 0===u.q5?void 0:u.q5[0])?Math.floor(l/10):0:"Dmg"===o?l>=(null===u.q5||void 0===u.q5?void 0:u.q5[2])?2*Math.floor((l-(null===u.q5||void 0===u.q5?void 0:u.q5[2]))/10):0:"Build Spd"===o&&l>=(null===u.q5||void 0===u.q5?void 0:u.q5[4])?5*Math.floor((l-(null===u.q5||void 0===u.q5?void 0:u.q5[4]))/10):0}}]);