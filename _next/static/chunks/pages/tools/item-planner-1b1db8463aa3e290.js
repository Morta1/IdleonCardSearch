(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2731],{65539:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/item-planner",function(){return n(12500)}])},12500:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return item_planner}});var l=n(82729),i=n(85893),o=n(67294),r=n(70473),a=n(21785),u=n(15861),d=n(51233),s=n(61903),c=n(87109),v=n(94054),m=n(40476),p=n(72890),x=n(50480),h=n(36872),f=n(67358),j=n(38895),y=n(22797),g=n(417),w=n(49425),b=n(69368),I=n(23513),Z=n(42168),N=n(83321),Q=n(88344),_=n(93946),C=n(23508),A=n(94895),T=n(34282),O=n(96540),E=n(8364),S=n(61599),k=n(5072),q=n(66242),F=n(44267);function _templateObject(){let e=(0,l._)(["\n  width: 40px;\n"]);return _templateObject=function(){return e},e}let U=S.Z.img(_templateObject()),OwnerTooltip=e=>{let{itemName:t,owners:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{fontWeight:"bold",variant:"h5",children:(0,Z.cleanUnderscore)(t)}),(0,i.jsx)(d.Z,{children:(0,i.jsx)(d.Z,{direction:"row",children:(null==n?void 0:n.length)>0?null==n?void 0:n.map((e,t)=>(0,i.jsx)("div",{children:(0,i.jsxs)(u.Z,{children:[e,"\xa0"]})},t+""+e)):(0,i.jsx)(u.Z,{children:"None"})})})]})};var item_planner_ItemsList=e=>{var t;let{account:n,inventoryItems:l,itemsList:a=[],copies:s=1,itemDisplay:c}=e,mapItems=(e,t)=>null==e?void 0:e.reduce((e,i)=>{var o,a,u;let d,s;if((null==i?void 0:i.itemName)==="Dungeon_Credits_Flurbo_Edition")d=null!==(a=null==n?void 0:null===(o=n.dungeons)||void 0===o?void 0:o.flurbos)&&void 0!==a?a:0,s=["account"];else{let e=(0,Q.AN)(l,null==i?void 0:i.itemName);d=null==e?void 0:e.amount,s=null==e?void 0:e.owner}if("0"===t){let t=(null==i?void 0:i.itemQuantity)-d;if((null==i?void 0:i.type)==="Equip"&&t!==(null==i?void 0:i.itemQuantity)){let n=null===(u=(0,Q.F6)(r.crafts[null==i?void 0:i.itemName]))||void 0===u?void 0:u.map(e=>{let{amount:n,owner:i}=(0,Q.AN)(l,null==e?void 0:e.itemName);return{...e,baseQuantity:null==e?void 0:e.itemQuantity,itemQuantity:(null==e?void 0:e.itemQuantity)*t,quantityOwned:n,owner:i}});return n.forEach(n=>{var l,i;let o=null==e?void 0:null===(l=e[null==n?void 0:n.subType])||void 0===l?void 0:l.find(e=>(null==e?void 0:e.itemName)===(null==n?void 0:n.itemName)),r=null==e?void 0:null===(i=e[null==n?void 0:n.subType])||void 0===i?void 0:i.filter(e=>(null==e?void 0:e.itemName)!==(null==n?void 0:n.itemName));o&&t>0&&(null==o?void 0:o.itemQuantity)-d>(null==o?void 0:o.quantityOwned)&&(r=[...r||[],{...o,itemQuantity:(null==o?void 0:o.itemQuantity)-d}]),e={...e,[null==n?void 0:n.subType]:r}}),t>0&&(e={...e,[null==i?void 0:i.subType]:[...(null==e?void 0:e[null==i?void 0:i.subType])||[],{...i,quantityOwned:0,owner:s,itemQuantity:t}]}),e}return d>=(null==i?void 0:i.itemQuantity)?e:{...e,[null==i?void 0:i.subType]:[...(null==e?void 0:e[null==i?void 0:i.subType])||[],{...i,owner:s,quantityOwned:d}]}}return"1"!==t?e:{...e,[null==i?void 0:i.subType]:[...(null==e?void 0:e[null==i?void 0:i.subType])||[],{...i,quantityOwned:d,owner:s}]}},{}),v=(0,o.useMemo)(()=>mapItems(a,c),[a,c,l,n]);return(0,i.jsx)(d.Z,{flexWrap:"wrap",direction:"row",gap:4,children:null===(t=Object.entries(v))||void 0===t?void 0:t.map((e,t)=>{let[n,l]=e,o="0"!==c||(null==l?void 0:l.length)>0;return o?(0,i.jsx)(q.Z,{variant:"outlined",children:(0,i.jsxs)(F.Z,{children:[(0,i.jsx)("span",{className:"title",children:(0,Z.cleanUnderscore)((0,Z.pascalCase)(n))}),(0,i.jsx)(d.Z,{flexWrap:"wrap",direction:"row",gap:3,children:null==l?void 0:l.map((e,t)=>{let{itemName:n,itemQuantity:l,rawName:o,type:r,quantityOwned:a,owner:v}=e;return(0,i.jsxs)(d.Z,{gap:1,alignItems:"center",children:[(0,i.jsx)(k.Z,{title:(0,i.jsx)(OwnerTooltip,{itemName:n,owners:v}),children:(0,i.jsx)(U,{src:"".concat(Z.prefix,"data/").concat(o,".png"),alt:""})}),(0,i.jsxs)(d.Z,{direction:"row",children:[(0,i.jsx)(k.Z,{title:a>=1e3?(0,Z.numberWithCommas)(a):"",children:(0,i.jsx)(u.Z,{color:a>=("0"===c?parseInt(l):parseInt(l)*s)?"success.light":"",children:(0,Z.notateNumber)(a)})}),(0,i.jsx)(k.Z,{title:l>=1e3?(0,Z.numberWithCommas)(l):"",children:(0,i.jsxs)(u.Z,{color:a>=("0"===c?parseInt(l):parseInt(l)*s)?"success.light":"",children:["/","0"===c?(0,Z.notateNumber)(parseInt(l)):(0,Z.notateNumber)(parseInt(l)*s,2)]})})]})]},n+""+t)})})]})},n+""+t):null})})},W=n(2962),D=n(14689),M=n(73397);function item_planner_templateObject(){let e=(0,l._)(["\n  width: 50px;\n"]);return item_planner_templateObject=function(){return e},e}function _templateObject1(){let e=(0,l._)(["\n  .item-wrapper {\n    width: 105px;\n    height: 102px;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .title {\n    font-size: 20px;\n    font-weight: bold;\n    display: inline-block;\n    margin-bottom: 10px;\n  }\n\n  .preview {\n    min-height: 77px;\n    min-width: 77px;\n  }\n\n  .controls {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    flex-wrap: wrap;\n    @media (max-width: 800px) {\n      padding: 10px;\n    }\n  }\n\n  .items-wrapper {\n    margin-top: 15px;\n\n    .items {\n      margin-top: 10px;\n      display: flex;\n      flex-wrap: wrap;\n      gap: 15px;\n    }\n  }\n\n  .content {\n    margin-top: 25px;\n    display: grid;\n    grid-template-columns: 1fr 3fr;\n    column-gap: 50px;\n  }\n\n  .crafts-container {\n    margin-top: 15px;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,l._)(["\n  ","\n  && label.Mui-focused {\n    color: rgba(255, 255, 255, 0.7);\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){let e=(0,l._)(["\n  && {\n    color: white;\n  }\n"]);return _templateObject3=function(){return e},e}let P=(0,a.D)({trim:!0}),L={rawName:"EquipmentTransparent108"},MaterialsTooltip=e=>{let{name:t,items:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{fontWeight:"bold",variant:"h5",children:(0,Z.cleanUnderscore)(t)}),(0,i.jsx)(d.Z,{direction:"row",gap:1,flexWrap:"wrap",children:null==n?void 0:n.map((e,t)=>{let{rawName:n,itemQuantity:l}=e;return(0,i.jsxs)(d.Z,{alignItems:"center",children:[(0,i.jsx)(R,{src:"".concat(Z.prefix,"data/").concat(n,".png"),alt:""}),(0,i.jsx)(u.Z,{children:l})]},n+""+t)})})]})},R=S.Z.img(item_planner_templateObject()),B=S.Z.div(_templateObject1()),z=(0,S.Z)(s.Z)(_templateObject2(),e=>{let{width:t}=e;return t?"width:".concat(t,";"):""}),H=(0,S.Z)(b.Z)(_templateObject3());var item_planner=e=>{var t,n;let{}=e,{state:l,lastUpdated:a,dispatch:b}=(0,o.useContext)(I.I),{planner:S={sections:[]}}=l,[q]=(0,o.useState)(Object.keys(r.crafts)),[F,U]=(0,o.useState)({0:""}),[R,G]=(0,o.useState)([]),[J,X]=(0,o.useState)([L]),[K,V]=(0,o.useState)("0"),[Y,$]=(0,o.useState)(!1),[ee,et]=(0,o.useState)(1),[en,el]=(0,o.useState)({}),[ei,eo]=(0,o.useState)(),er=(0,o.useMemo)(()=>(0,Q.tP)(null==l?void 0:l.characters,Y),[Y]),ea=(0,o.useMemo)(()=>(0,Q.Nx)(null==l?void 0:l.characters,null==l?void 0:l.account),[null==l?void 0:l.characters,null==l?void 0:l.account]),eu=(0,o.useRef)();(0,o.useEffect)(()=>{var e;(null==l?void 0:l.characters)||(null==l?void 0:l.account)?G(Y?[...ea||[],...er||[]]:ea):G(r.itemsArray),X(null==S?void 0:null===(e=S.sections)||void 0===e?void 0:e.map(()=>L))},[l,a,Y]);let handleFileChange=async e=>{let t=e.target.files[0];if(!t||(null==t?void 0:t.type)!=="application/json"){console.error("File isn't a json file");return}let n=await t.text();n&&(null==(n=(0,Z.tryToParse)(n))?void 0:n.sections)&&b({type:"planner",data:{sections:null==n?void 0:n.sections}})},onItemChange=(e,t)=>{let n=J.map((n,l)=>l===t?e?r.crafts[e]:L:n);U({...F,["".concat(t)]:e}),X(n)},onRemoveItem=(e,t,n,l)=>{var i;let o,a;if((null==t?void 0:t.itemQuantity)===0&&n>0)return;let u=null==S?void 0:null===(i=S.sections)||void 0===i?void 0:i[e],d=r.crafts[null==t?void 0:t.itemName];if(d){o=calculateItemsQuantity(null==u?void 0:u.items,d,!1,!1,n,l);let i=Array.isArray(t)?t:(0,Q.F6)(t);a=null==i?void 0:i.reduce((e,t)=>calculateItemsQuantity(e,t,!0,!1,n,l),null==u?void 0:u.materials);let r=updateSectionData(e,{materials:a,items:o,name:null==u?void 0:u.name});b({type:"planner",data:{sections:r}})}},onAddItem=(e,t,n)=>{if((null==t?void 0:t.rawName)!==L.rawName){var l;let i,o;let a=null==S?void 0:null===(l=S.sections)||void 0===l?void 0:l[e];i=calculateItemsQuantity(null==a?void 0:a.items,t,!1,!0,n);let u=Array.isArray(r.crafts[null==t?void 0:t.itemName])?r.crafts[null==t?void 0:t.itemName]:(0,Q.F6)(r.crafts[null==t?void 0:t.itemName]);o=null==u?void 0:u.reduce((e,t)=>calculateItemsQuantity(e,t,!0,!0,n),null==a?void 0:a.materials);let d=updateSectionData(e,{materials:o,items:i,name:null==a?void 0:a.name});b({type:"planner",data:{sections:d}}),U({...F,[e]:""}),et(1)}},updateSectionData=(e,t)=>{var n;return null==S?void 0:null===(n=S.sections)||void 0===n?void 0:n.map((n,l)=>e===l?t:n)},calculateItemsQuantity=function(e,t,n){let l=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,r=null==e?void 0:e.find(e=>(null==t?void 0:t.itemName)===(null==e?void 0:e.itemName));return r?null==e?void 0:e.reduce((e,n)=>{if((null==t?void 0:t.itemName)!==(null==n?void 0:n.itemName))return[...e,n];let a=i?i*(null==t?void 0:t.itemQuantity):null==n?void 0:n.itemQuantity;return!l&&(null==r?void 0:r.itemQuantity)-a<=0&&o?e:[...e,{...r,itemQuantity:l?(null==r?void 0:r.itemQuantity)+a:(null==r?void 0:r.itemQuantity)-a,itemCount:parseFloat(i)}]},[]):l?[...e||[],{...t,itemQuantity:(null==t?void 0:t.itemQuantity)*i,itemCount:parseFloat(i)}]:e},removeSection=e=>{let t=S.sections.filter((t,n)=>n!==e);U({...F,[e]:""}),b({type:"planner",data:{sections:t}})};return(0,i.jsxs)(B,{children:[(0,i.jsx)(W.PB,{title:"Idleon Toolbox | Item Planner",description:"Useful tool to keep track of your crafting projects by tracking existing and missing materials"}),(null==l?void 0:l.characters)||(null==l?void 0:l.account)?null:(0,i.jsx)(u.Z,{component:"div",sx:{mb:2},variant:"caption",children:"* This tool will work better if you're logged in"}),(0,i.jsxs)(d.Z,{direction:"row",gap:5,flexWrap:"wrap",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Z,{direction:"row",alignItems:"center",children:(0,i.jsx)(s.Z,{sx:{mt:1},label:"Section name",placeholder:"Enter section name",onChange:e=>eo(e.target.value),InputProps:{endAdornment:(0,i.jsx)(c.Z,{position:"end",children:(0,i.jsx)(_.Z,{onClick:()=>{b({type:"planner",data:{sections:[...(null==S?void 0:S.sections)||[],{items:[],materials:[],name:ei||"section-".concat(Math.floor(100*Math.random()))}]}})},children:(0,i.jsx)(O.Z,{})})})}})}),(0,i.jsx)(k.Z,{title:"This will reset all sections and items",children:(0,i.jsxs)(N.Z,{sx:{mt:1},onClick:()=>{U({0:""}),X([L]),b({type:"planner",data:{sections:[]}})},children:[(0,i.jsx)(T.Z,{})," Reset all sections"]})})]}),(0,i.jsxs)(d.Z,{sx:{pl:1,mt:1},children:[(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(m.Z,{id:"demo-radio-buttons-group-label",children:"Display"}),(0,i.jsxs)(p.Z,{row:!0,"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"0",name:"radio-buttons-group",onChange:e=>V(e.target.value),children:[(0,i.jsx)(x.Z,{value:"0",control:(0,i.jsx)(h.Z,{}),label:"Show Missing Items"}),(0,i.jsx)(x.Z,{value:"1",control:(0,i.jsx)(h.Z,{}),label:"Show All Items"})]})]}),(0,i.jsx)(x.Z,{control:(0,i.jsx)(H,{checked:Y,onChange:()=>$(!Y),name:"Include Equipped Items",color:"default"}),label:"Include Equipped Items"})]}),(0,i.jsxs)(d.Z,{gap:1,sx:{ml:"auto"},alignItems:"center",justifyContent:"center",direction:"row",children:[(0,i.jsx)(k.Z,{title:"Export all sections",children:(0,i.jsxs)(N.Z,{onClick:()=>{var e;let t=localStorage.getItem("planner");t&&(null==S?void 0:null===(e=S.sections)||void 0===e?void 0:e.length)!==0&&(0,Z.downloadFile)(t,"it-item-planner.json")},children:[(0,i.jsx)(D.Z,{sx:{mr:1}}),"Export"]})}),(0,i.jsx)(k.Z,{title:"Import (this will override your sections)",children:(0,i.jsxs)(N.Z,{onClick:()=>{eu.current.click()},children:[(0,i.jsx)(M.Z,{sx:{mr:1}}),"Import"]})}),(0,i.jsx)("input",{type:"file",id:"file",ref:eu,style:{display:"none"},accept:".json",onChange:handleFileChange})]})]}),(0,i.jsx)(d.Z,{sx:{mt:2},children:(null==S?void 0:null===(t=S.sections)||void 0===t?void 0:t.length)>0?null==S?void 0:null===(n=S.sections)||void 0===n?void 0:n.map((e,t)=>{var n;let{items:a,materials:s,name:c}=e;return(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(j.Z,{expandIcon:(0,i.jsx)(C.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,i.jsx)(u.Z,{children:c||"Accordion-".concat(t)})}),(0,i.jsxs)(y.Z,{children:[(0,i.jsxs)(N.Z,{onClick:()=>removeSection(t),children:[(0,i.jsx)(A.Z,{})," Remove Section"]}),(0,i.jsxs)("div",{className:"controls",children:[(0,i.jsx)("div",{className:"preview",children:(null==J?void 0:J[t])?(0,i.jsx)("img",{src:"".concat(Z.prefix,"data/").concat(null==J?void 0:null===(n=J[t])||void 0===n?void 0:n.rawName,".png"),alt:""}):null}),(0,i.jsx)(g.Z,{id:"item-locator",value:null==F?void 0:F[t],onChange:(e,n)=>onItemChange(n,t),autoComplete:!0,options:[null==F?void 0:F[t],...q],filterSelectedOptions:!0,filterOptions:P,getOptionLabel:e=>e?null==e?void 0:e.replace(/_/g," "):"",renderOption:(e,t)=>{var n,l;return t?(0,o.createElement)(d.Z,{gap:2,...e,key:null===r.crafts||void 0===r.crafts?void 0:null===(n=r.crafts[t])||void 0===n?void 0:n.rawName,direction:"row",children:[(0,i.jsx)("img",{width:24,height:24,src:"".concat(Z.prefix,"data/").concat(null===r.crafts||void 0===r.crafts?void 0:null===(l=r.crafts[t])||void 0===l?void 0:l.rawName,".png"),alt:""}),null==t?void 0:t.replace(/_/g," ")]}):(0,i.jsx)("span",{style:{height:0}},"empty")},style:{width:300},renderInput:e=>(0,i.jsx)(z,{...e,label:"Item Name",variant:"outlined"})}),(0,i.jsx)(z,{value:ee,width:"100px",inputProps:{min:1},onChange:e=>{var t;return et(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)},type:"number",label:"Item Count",variant:"outlined"}),(0,i.jsx)(N.Z,{color:"primary",variant:"contained",onClick:()=>onAddItem(t,null==J?void 0:J[t],ee),title:"Add Item",children:"Add"})]}),(0,i.jsxs)("div",{className:"content",children:[(0,i.jsxs)("div",{className:"items-wrapper",children:[(0,i.jsx)("span",{className:"title",children:"Tracked Items"}),(0,i.jsx)("div",{className:"items",children:null==a?void 0:a.map((e,n)=>(0,i.jsxs)("div",{className:"item-wrapper",onMouseEnter:()=>el({...en,["".concat(t,"-").concat(n)]:!0}),onMouseLeave:()=>el({...en,["".concat(t,"-").concat(n)]:!1}),children:[(0,i.jsx)(w.Z,{badgeContent:(0,Z.numberWithCommas)(null==e?void 0:e.itemQuantity),max:1e4,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:(0,i.jsx)(k.Z,{title:(0,i.jsx)(MaterialsTooltip,{name:null==e?void 0:e.itemName,items:(0,Q.F6)(e)}),children:(0,i.jsx)("img",{src:"".concat(Z.prefix,"data/").concat(null==e?void 0:e.rawName,".png"),alt:""},(null==e?void 0:e.rawName)+" "+n)})}),(null==en?void 0:en["".concat(t,"-").concat(n)])?(0,i.jsxs)("div",{className:"buttons",children:[(0,i.jsx)(_.Z,{type:"bottom",size:"small",onClick:()=>onAddItem(t,{...e,itemQuantity:1},1),children:(0,i.jsx)(O.Z,{})}),(0,i.jsx)(_.Z,{type:"bottom",size:"small",onClick:()=>onRemoveItem(t,e,1),children:(0,i.jsx)(A.Z,{})}),(0,i.jsx)(_.Z,{size:"small",onClick:()=>onRemoveItem(t,e,null==e?void 0:e.itemQuantity,!0),children:(0,i.jsx)(E.Z,{})})]}):null]},t+""+(null==e?void 0:e.itemName)+n))})]}),(0,i.jsxs)("div",{className:"crafts-container",children:[(0,i.jsx)("span",{className:"title",children:"Required Materials"}),(null==R?void 0:R.length)>0?(0,i.jsx)(item_planner_ItemsList,{itemsList:s,account:null==l?void 0:l.account,inventoryItems:R,itemDisplay:K}):null]})]})]})]},"accordion-".concat(t))}):(0,i.jsx)(u.Z,{sx:{mt:3},variant:"h3",children:"Please add a section"})})]})}},88344:function(e,t,n){"use strict";n.d(t,{AN:function(){return findQuantityOwned},F6:function(){return flattenCraftObject},Nx:function(){return getAllItems},QU:function(){return findItemInInventory},ju:function(){return calculateItemTotalAmount},t8:function(){return addStoneDataToEquip},tP:function(){return addEquippedItems},tT:function(){return createItemsWithUpgrades},w$:function(){return getAllTools},wA:function(){return findItemByDescriptionInInventory},zi:function(){return getStatsFromGear}});var l=n(70473);let addStoneDataToEquip=(e,t)=>{var n;return e&&t?null===(n=Object.keys(t))||void 0===n?void 0:n.reduce((n,l)=>{if("UQ1txt"===l||"UQ2txt"===l)return{...n,[l]:(null==e?void 0:e[l])||(null==t?void 0:t[l])};let i=null==e?void 0:e[l],o=null==t?void 0:t[l],r=i;return isNaN(o)||o<0?{...n,[l]:o}:(r=(i||0)+((null==t?void 0:t.UQ1txt)&&(null==e?void 0:e.Type)!=="KEYCHAIN"&&(null==e?void 0:e.UQ1txt)!==(null==t?void 0:t.UQ1txt)?0:o),{...n,[l]:parseFloat(r)})},{}):{}},calculateItemTotalAmount=function(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null==e?void 0:e.reduce((e,i)=>{if(n)t===(l?null==i?void 0:i.rawName:null==i?void 0:i.name)&&(e+=null==i?void 0:i.amount);else{var o,r;(l?null==i?void 0:null===(o=i.rawName)||void 0===o?void 0:o.includes(t):null==i?void 0:null===(r=i.name)||void 0===r?void 0:r.includes(t))&&(e+=null==i?void 0:i.amount)}return e},0)},getStatsFromGear=(e,t,n)=>{var i,o,r,a,u,d,s,c,v,m,p,x;let{equipment:h}=e||{},f=null!==(m=null==n?void 0:null===(r=n.lab)||void 0===r?void 0:null===(o=r.playersChips)||void 0===o?void 0:null===(i=o[null==e?void 0:e.playerId])||void 0===i?void 0:i.find(e=>16===e.index))&&void 0!==m?m:0,j=null!==(p=null==n?void 0:null===(d=n.lab)||void 0===d?void 0:null===(u=d.playersChips)||void 0===u?void 0:null===(a=u[null==e?void 0:e.playerId])||void 0===a?void 0:a.find(e=>17===e.index))&&void 0!==p?p:0,y=null!==(x=null==n?void 0:null===(v=n.lab)||void 0===v?void 0:null===(c=v.playersChips)||void 0===c?void 0:null===(s=c[null==e?void 0:e.playerId])||void 0===s?void 0:s.find(e=>18===e.index))&&void 0!==x?x:0;return isNaN(t)?null==h?void 0:h.reduce((e,n)=>e+getStatFromEquipment(n,t),0):null==h?void 0:h.reduce((e,n,i)=>{var o;return e+getStatFromEquipment(n,null===l.bonuses||void 0===l.bonuses?void 0:null===(o=l.bonuses.etcBonuses)||void 0===o?void 0:o[t])*(3===i&&y||10===i&&f||9===i&&j?2:1)},0)},getStatFromEquipment=(e,t)=>{let n=(null==e?void 0:e.UQ1txt)===t?null==e?void 0:e.UQ1val:0,l=(null==e?void 0:e.UQ2txt)===t?null==e?void 0:e.UQ2val:0;return(null==e?void 0:e[t])?null==e?void 0:e[t]:n+l},createItemsWithUpgrades=(e,t,n)=>Array.from(Object.values(e)).reduce((e,i,o)=>{var r;let a=addStoneDataToEquip(null===l.items||void 0===l.items?void 0:l.items[i],null==t?void 0:t[o]),u="",d={...null===l.items||void 0===l.items?void 0:l.items[i],...a};return(null==d?void 0:d.UQ1txt)&&(u+=null==d?void 0:d.UQ1txt),(null==d?void 0:d.UQ2txt)&&(u+=" ".concat(null==d?void 0:d.UQ2txt)),i?[...e,{name:null===l.items||void 0===l.items?void 0:null===(r=l.items[i])||void 0===r?void 0:r.displayName,rawName:i,owner:n,..."Blank"===i?{}:{...null===l.items||void 0===l.items?void 0:l.items[i],...a},misc:u}]:e},[]),findItemInInventory=(e,t)=>t?e.reduce((e,n)=>{let{name:l,owner:i,amount:o}=n;if(l===t){var r;return null!=e&&e[i]?{...e,[i]:{amount:(null==e?void 0:null===(r=e[i])||void 0===r?void 0:r.amount)+1}}:{...e,[i]:{amount:o}}}return e},{}):{},findItemByDescriptionInInventory=(e,t)=>{if(!t)return{};let n=e.filter(e=>{var n,l;let{misc:i,description:o}=e;return(null==o?void 0:null===(n=o.toLowerCase())||void 0===n?void 0:n.includes(null==t?void 0:t.toLowerCase()))||(null==i?void 0:null===(l=i.toLowerCase())||void 0===l?void 0:l.includes(null==t?void 0:t.toLowerCase()))},[]);return null==n?void 0:n.reduce((e,t)=>{let n=null==e?void 0:e.findIndex(e=>(null==e?void 0:e.rawName)===(null==t?void 0:t.rawName)),l=null==e?void 0:e[n];if(l){var i;let o=null==l?void 0:null===(i=l.owners)||void 0===i?void 0:i.includes(null==t?void 0:t.owner),r=o?null==l?void 0:l.owners:[...null==l?void 0:l.owners,null==t?void 0:t.owner];(null==l?void 0:l.misc)===(null==t?void 0:t.misc)&&(null==e||e.splice(n,1)),e=[...e,{...t,owners:r}]}else e=[...e,{...t,owners:[null==t?void 0:t.owner]}];return e},[])},flattenCraftObject=e=>{if(!e)return[];let t={},n=JSON.parse(JSON.stringify(e)),flatten=(e,n)=>null==e?void 0:e.reduce((e,l)=>(e.push(l),l.materials&&(e=e.concat(flatten(null==l?void 0:l.materials,n)),l.materials=[]),t[null==l?void 0:l.itemName]?t[null==l?void 0:l.itemName].itemQuantity+=null==l?void 0:l.itemQuantity:t[null==l?void 0:l.itemName]=l,e),[]);return flatten(null==n?void 0:n.materials,t),Object.values(t)},findQuantityOwned=(e,t)=>{var n;let l=findItemInInventory(e,t);return null===(n=Object.entries(l))||void 0===n?void 0:n.reduce((e,t)=>{let[n,{amount:l}]=t;return{amount:(null==e?void 0:e.amount)+l,owner:[...null==e?void 0:e.owner,n]}},{amount:0,owner:[]})},addEquippedItems=(e,t)=>t?null==e?void 0:e.reduce((e,t)=>{let{tools:n,equipment:l,food:i}=t;return[...e,...n,...l,...i]},[]).filter(e=>{let{rawName:t}=e;return"Blank"!==t}).map(e=>(null==e?void 0:e.amount)?e:{...e,amount:1}):[],getAllItems=(e,t)=>{let n=null==e?void 0:e.reduce((e,t)=>{let{inventory:n=[]}=t;return[...e,...n]},[]);return[...n||[],...(null==t?void 0:t.storage)||[]]},getAllTools=()=>{var e,t,n,i,o;let r=null===l.itemsArray||void 0===l.itemsArray?void 0:null===(e=l.itemsArray.filter(e=>{let{rawName:t}=e;return null==t?void 0:t.match(/EquipmentTools[0-9]+/)}))||void 0===e?void 0:e.filter(e=>{let{rawName:t}=e;return"EquipmentTools13"!==t&&"EquipmentTools10"!==t}),a=null===l.itemsArray||void 0===l.itemsArray?void 0:null===(t=l.itemsArray.filter(e=>{let{rawName:t}=e;return null==t?void 0:t.match(/EquipmentToolsHatchet[0-9]+/)}))||void 0===t?void 0:t.filter(e=>{let{rawName:t}=e;return"EquipmentToolsHatchet0"!==t&&"EquipmentToolsHatchet3"!==t&&"EquipmentToolsHatchet11"!==t&&"EquipmentToolsHatchet10"!==t}),u=null===l.itemsArray||void 0===l.itemsArray?void 0:null===(n=l.itemsArray.filter(e=>{let{rawName:t}=e;return null==t?void 0:t.match(/FishingRod[0-9]+/)}))||void 0===n?void 0:n.filter(e=>{let{rawName:t}=e;return"FishingRod1"!==t}),d=null===l.itemsArray||void 0===l.itemsArray?void 0:null===(i=l.itemsArray.filter(e=>{let{rawName:t}=e;return null==t?void 0:t.match(/CatchingNet[0-9]+/)}))||void 0===i?void 0:i.filter(e=>{let{rawName:t}=e;return"CatchingNet1"!==t}),s=null===l.itemsArray||void 0===l.itemsArray?void 0:l.itemsArray.filter(e=>{let{rawName:t}=e;return null==t?void 0:t.match(/TrapBoxSet[0-9]+/)}),c=null===l.itemsArray||void 0===l.itemsArray?void 0:null===(o=l.itemsArray.filter(e=>{let{rawName:t}=e;return null==t?void 0:t.match(/WorshipSkull[0-9]+/)}))||void 0===o?void 0:o.filter(e=>{let{rawName:t}=e;return"WorshipSkull8"!==t});return[r,a,u,d,s,c]}}},function(e){e.O(0,[9584,417,8165,9774,2888,179],function(){return e(e.s=65539)}),_N_E=e.O()}]);