(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5053],{8364:function(e,l,t){"use strict";var r=t(64836);l.Z=void 0;var a=r(t(64938)),n=t(85893),i=(0,a.default)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");l.Z=i},77957:function(e,l,t){"use strict";var r=t(64836);l.Z=void 0;var a=r(t(64938)),n=t(85893),i=(0,a.default)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");l.Z=i},74721:function(e,l,t){"use strict";var r=t(64836);l.Z=void 0;var a=r(t(64938)),n=t(85893),i=(0,a.default)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");l.Z=i},50292:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/material-tracker",function(){return t(84534)}])},84534:function(e,l,t){"use strict";t.r(l);var r=t(85893),a=t(67294),n=t(21785),i=t(98396),o=t(51233),s=t(417),d=t(87918),c=t(15861),u=t(50135),h=t(66242),m=t(44267),v=t(30925),p=t(70473),x=t(83321),g=t(74721),f=t(2511),j=t(88344),Z=t(21480),w=t(2962),N=t(8364),k=t(93946),b=t(77957);let S=(0,n.D)({trim:!0,limit:250});l.default=()=>{var e;let{state:l}=(0,a.useContext)(Z.I),t=(0,i.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),[n,y]=(0,a.useState)([]),[C,_]=(0,a.useState)(""),[E,L]=(0,a.useState)(""),[O,I]=(0,a.useState)({}),[M,z]=(0,a.useState)(JSON.parse(localStorage.getItem("material-tracker"))||{}),T=(0,a.useMemo)(()=>p.itemsArray.filter(e=>{let{itemType:l,typeGen:t,displayName:r}=e;return"ERROR"!==r&&"Blank"!==r&&"Filler"!==r&&"DONTFILL"!==r&&"FILLER"!==r&&"Equip"!==l}),[]),F=(0,a.useMemo)(()=>(0,j.Nx)(null==l?void 0:l.characters,null==l?void 0:l.account),[null==l?void 0:l.characters,null==l?void 0:l.account]),[D,W]=(0,a.useState)({material:!1,threshold:!1}),handleDeleteThreshold=e=>{let l={...M};delete l[e],z(l),I({}),localStorage.setItem("material-tracker",JSON.stringify(l))},handleEdit=e=>{let{threshold:l,note:t}=null==M?void 0:M[e],r=null==T?void 0:T.find(l=>{let{rawName:t}=l;return t===e}),a=null==n?void 0:n.find(l=>{let{rawName:t}=l;return t===e});if(a)return;y([...n,r]);let i=l.toString().replace(/,/g,"");_((0,v.numberWithCommas)(i)),L(t)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.PB,{title:"Material Tracker | Idleon Toolbox",description:"Add a material, set your own threshold and keep track of your inventory."}),(0,r.jsx)(o.Z,{children:(0,r.jsx)(s.Z,{id:"material tracker",value:n,onChange:(e,l)=>{y(l),W({...D,material:!1})},multiple:!0,options:[...T],filterSelectedOptions:!0,disableCloseOnSelect:!0,filterOptions:S,getOptionLabel:e=>{var l;return(null==e?void 0:e.displayName)?null==e?void 0:null===(l=e.displayName)||void 0===l?void 0:l.replace(/_/g," "):""},sx:{width:t?"100%":600,mb:3,flexShrink:1},renderTags:(e,l)=>e.map((e,t)=>{var a;return(0,r.jsx)(d.Z,{icon:(0,r.jsx)("img",{width:24,height:24,src:"".concat(v.prefix,"data/").concat(null==e?void 0:e.rawName,".png"),alt:""}),label:null==e?void 0:null===(a=e.displayName)||void 0===a?void 0:a.replace(/_/g," "),...l({index:t})},t)}),renderOption:(e,l)=>{var t;return l?(0,a.createElement)(o.Z,{...e,key:e.id,gap:2,direction:"row",children:[(0,r.jsx)("img",{width:24,height:24,src:"".concat(v.prefix,"data/").concat(null==l?void 0:l.rawName,".png"),alt:""},"img-".concat(e.id)),(0,r.jsx)(c.Z,{children:null==l?void 0:null===(t=l.displayName)||void 0===t?void 0:t.replace(/_/g," ")},"text-".concat(e.id))]}):null},renderInput:e=>(0,r.jsx)(u.Z,{...e,error:null==D?void 0:D.material,label:"Material name",variant:"outlined"})})}),(0,r.jsxs)(o.Z,{justifyContent:t?"space-between":"flex-start",direction:"row",gap:3,alignItems:"center",flexWrap:"wrap",children:[(0,r.jsx)(u.Z,{error:null==D?void 0:D.threshold,value:C,onChange:e=>{let{target:l}=e,t=l.value.replace(/,/g,"");_((0,v.numberWithCommas)(t)),W({...D,threshold:!1})},label:"Threshold"}),(0,r.jsx)(u.Z,{value:E,onChange:e=>{let{target:l}=e;return L(l.value)},label:"Note"}),(0,r.jsx)(x.Z,{onClick:()=>{let e={};0===n.length&&(e.material=!0);let l=null==C?void 0:C.replace(/,/g,"");if((!C||isNaN(l))&&(e.threshold=!0),(null==e?void 0:e.material)||(null==e?void 0:e.threshold)){W(e);return}let t={...M};n.forEach(e=>{t[null==e?void 0:e.rawName]={item:e,threshold:parseInt(l),note:E}}),z(t),localStorage.setItem("material-tracker",JSON.stringify(t)),y([]),_(""),L("")},sx:{height:"fit-content"},variant:"contained",children:"Add threshold"})]}),(0,r.jsx)(o.Z,{mt:3,direction:t?"column":"row",gap:1,flexWrap:"wrap",children:null===(e=Object.values(M))||void 0===e?void 0:e.map((e,l)=>{let{item:a,threshold:n,note:i}=e,{amount:s}=(0,j.AN)(F,null==a?void 0:a.displayName),d,u=.02*n;return d=s<n?"error.light":s<=n+u?"warning.main":"success.main",(0,r.jsxs)(o.Z,{onMouseEnter:()=>I({[l]:!0}),onMouseLeave:()=>I({[l]:!1}),children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)(m.Z,{children:(0,r.jsxs)(o.Z,{direction:t?"row":"column",alignItems:"center",justifyContent:t?"space-between":"flex-start",gap:t?2:0,flexWrap:"wrap",sx:{position:"relative"},children:[(0,r.jsx)("img",{style:t?{marginLeft:16}:{},width:48,height:48,src:"".concat(v.prefix,"data/").concat(null==a?void 0:a.rawName,".png"),alt:""}),(0,r.jsxs)(o.Z,{direction:"row",gap:2,children:[i&&t?(0,r.jsx)(f.Z,{title:i,children:(0,r.jsx)(g.Z,{})}):null,(0,r.jsx)(c.Z,{children:(0,v.cleanUnderscore)(null==a?void 0:a.displayName)}),i&&!t?(0,r.jsx)(f.Z,{title:i,children:(0,r.jsx)(g.Z,{})}):null]}),(0,r.jsxs)(c.Z,{color:d,mt:t?0:1,children:[(0,v.notateNumber)(s),"/",(0,v.notateNumber)(n)]})]})})}),(0,r.jsx)(o.Z,{sx:{minHeight:34,mt:1},direction:"row",justifyContent:"center",children:(null==O?void 0:O[l])?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.Z,{size:"small",onClick:()=>handleDeleteThreshold(null==a?void 0:a.rawName),children:(0,r.jsx)(N.Z,{})}),(0,r.jsx)(k.Z,{size:"small",onClick:()=>handleEdit(null==a?void 0:a.rawName),children:(0,r.jsx)(b.Z,{})})]}):null})]},"tracked-item-".concat(l))})})]})}}},function(e){e.O(0,[417,9774,2888,179],function(){return e(e.s=50292)}),_N_E=e.O()}]);