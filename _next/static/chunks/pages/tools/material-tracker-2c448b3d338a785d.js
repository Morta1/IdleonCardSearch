(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5053],{8364:function(e,l,t){"use strict";var n=t(64836);l.Z=void 0;var i=n(t(64938)),r=t(85893),o=(0,i.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");l.Z=o},77957:function(e,l,t){"use strict";var n=t(64836);l.Z=void 0;var i=n(t(64938)),r=t(85893),o=(0,i.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");l.Z=o},74721:function(e,l,t){"use strict";var n=t(64836);l.Z=void 0;var i=n(t(64938)),r=t(85893),o=(0,i.default)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");l.Z=o},66242:function(e,l,t){"use strict";t.d(l,{Z:function(){return w}});var n=t(87462),i=t(63366),r=t(67294),o=t(86010),u=t(94780),a=t(90948),d=t(71657),s=t(90629),v=t(1588),c=t(34867);function m(e){return(0,c.Z)("MuiCard",e)}(0,v.Z)("MuiCard",["root"]);var h=t(85893);let f=["className","raised"],p=e=>{let{classes:l}=e;return(0,u.Z)({root:["root"]},m,l)},x=(0,a.ZP)(s.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,l)=>l.root})(()=>({overflow:"hidden"}));var w=r.forwardRef(function(e,l){let t=(0,d.Z)({props:e,name:"MuiCard"}),{className:r,raised:u=!1}=t,a=(0,i.Z)(t,f),s=(0,n.Z)({},t,{raised:u}),v=p(s);return(0,h.jsx)(x,(0,n.Z)({className:(0,o.Z)(v.root,r),elevation:u?8:void 0,ref:l,ownerState:s},a))})},44267:function(e,l,t){"use strict";t.d(l,{Z:function(){return x}});var n=t(87462),i=t(63366),r=t(67294),o=t(86010),u=t(94780),a=t(90948),d=t(71657),s=t(1588),v=t(34867);function c(e){return(0,v.Z)("MuiCardContent",e)}(0,s.Z)("MuiCardContent",["root"]);var m=t(85893);let h=["className","component"],f=e=>{let{classes:l}=e;return(0,u.Z)({root:["root"]},c,l)},p=(0,a.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,l)=>l.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var x=r.forwardRef(function(e,l){let t=(0,d.Z)({props:e,name:"MuiCardContent"}),{className:r,component:u="div"}=t,a=(0,i.Z)(t,h),s=(0,n.Z)({},t,{component:u}),v=f(s);return(0,m.jsx)(p,(0,n.Z)({as:u,className:(0,o.Z)(v.root,r),ownerState:s,ref:l},a))})},2097:function(e,l,t){"use strict";var n=t(67294);l.Z=e=>{let l=n.useRef({});return n.useEffect(()=>{l.current=e}),l.current}},50292:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/material-tracker",function(){return t(86697)}])},86697:function(e,l,t){"use strict";t.r(l);var n=t(85893),i=t(67294),r=t(21785),o=t(98396),u=t(51233),a=t(417),d=t(87918),s=t(15861),v=t(50135),c=t(66242),m=t(44267),h=t(16954),f=t(25611),p=t(83321),x=t(74721),w=t(35193),Z=t(57692),N=t(11688),g=t(2962),y=t(8364),j=t(93946),C=t(77957);let b=(0,r.D)({trim:!0,limit:250});l.default=()=>{var e;let{state:l}=(0,i.useContext)(N.I),t=(0,o.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),[r,A]=(0,i.useState)([]),[k,S]=(0,i.useState)(""),[E,M]=(0,i.useState)(""),[O,T]=(0,i.useState)({}),[I,L]=(0,i.useState)(JSON.parse(localStorage.getItem("material-tracker"))||{}),Q=(0,i.useMemo)(()=>f.itemsArray.filter(e=>{let{itemType:l,typeGen:t,displayName:n}=e;return"ERROR"!==n&&"Blank"!==n&&"Filler"!==n&&"DONTFILL"!==n&&"FILLER"!==n&&"Equip"!==l}),[]),U=(0,i.useMemo)(()=>(0,Z.Nx)(null==l?void 0:l.characters,null==l?void 0:l.account),[null==l?void 0:l.characters,null==l?void 0:l.account]),[_,R]=(0,i.useState)({material:!1,threshold:!1}),z=e=>{let l={...I};delete l[e],L(l),T({}),localStorage.setItem("material-tracker",JSON.stringify(l))},F=e=>{let{threshold:l,note:t}=null==I?void 0:I[e],n=null==Q?void 0:Q.find(l=>{let{rawName:t}=l;return t===e});if(null==r?void 0:r.find(l=>{let{rawName:t}=l;return t===e}))return;A([...r,n]);let i=l.toString().replace(/,/g,"");S((0,h.numberWithCommas)(i)),M(t)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.PB,{title:"Material Tracker | Idleon Toolbox",description:"Add a material, set your own threshold and keep track of your inventory."}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(a.Z,{id:"material tracker",value:r,onChange:(e,l)=>{A(l),R({..._,material:!1})},multiple:!0,options:[...Q],filterSelectedOptions:!0,disableCloseOnSelect:!0,filterOptions:b,getOptionLabel:e=>{var l;return(null==e?void 0:e.displayName)?null==e?void 0:null===(l=e.displayName)||void 0===l?void 0:l.replace(/_/g," "):""},sx:{width:t?"100%":600,mb:3,flexShrink:1},renderTags:(e,l)=>e.map((e,t)=>{var i;return(0,n.jsx)(d.Z,{icon:(0,n.jsx)("img",{width:24,height:24,src:"".concat(h.prefix,"data/").concat(null==e?void 0:e.rawName,".png"),alt:""}),label:null==e?void 0:null===(i=e.displayName)||void 0===i?void 0:i.replace(/_/g," "),...l({index:t})},t)}),renderOption:(e,l)=>{var t;return l?(0,i.createElement)(u.Z,{...e,key:e.id,gap:2,direction:"row",children:[(0,n.jsx)("img",{width:24,height:24,src:"".concat(h.prefix,"data/").concat(null==l?void 0:l.rawName,".png"),alt:""},"img-".concat(e.id)),(0,n.jsx)(s.Z,{children:null==l?void 0:null===(t=l.displayName)||void 0===t?void 0:t.replace(/_/g," ")},"text-".concat(e.id))]}):null},renderInput:e=>(0,n.jsx)(v.Z,{...e,error:null==_?void 0:_.material,label:"Material name",variant:"outlined"})})}),(0,n.jsxs)(u.Z,{justifyContent:t?"space-between":"flex-start",direction:"row",gap:3,alignItems:"center",flexWrap:"wrap",children:[(0,n.jsx)(v.Z,{error:null==_?void 0:_.threshold,value:k,onChange:e=>{let{target:l}=e,t=l.value.replace(/,/g,"");S((0,h.numberWithCommas)(t)),R({..._,threshold:!1})},label:"Threshold"}),(0,n.jsx)(v.Z,{value:E,onChange:e=>{let{target:l}=e;return M(l.value)},label:"Note"}),(0,n.jsx)(p.Z,{onClick:()=>{let e={};0===r.length&&(e.material=!0);let l=null==k?void 0:k.replace(/,/g,"");if((!k||isNaN(l))&&(e.threshold=!0),(null==e?void 0:e.material)||(null==e?void 0:e.threshold)){R(e);return}let t={...I};r.forEach(e=>{t[null==e?void 0:e.rawName]={item:e,threshold:parseInt(l),note:E}}),L(t),localStorage.setItem("material-tracker",JSON.stringify(t)),A([]),S(""),M("")},sx:{height:"fit-content"},variant:"contained",children:"Add threshold"})]}),(0,n.jsx)(u.Z,{mt:3,direction:t?"column":"row",gap:1,flexWrap:"wrap",children:null===(e=Object.values(I))||void 0===e?void 0:e.map((e,l)=>{let{item:i,threshold:r,note:o}=e,{amount:a}=(0,Z.AN)(U,null==i?void 0:i.displayName),d=.02*r;return(0,n.jsxs)(u.Z,{onMouseEnter:()=>T({[l]:!0}),onMouseLeave:()=>T({[l]:!1}),children:[(0,n.jsx)(c.Z,{children:(0,n.jsx)(m.Z,{children:(0,n.jsxs)(u.Z,{direction:t?"row":"column",alignItems:"center",justifyContent:t?"space-between":"flex-start",gap:t?2:0,flexWrap:"wrap",sx:{position:"relative"},children:[(0,n.jsx)("img",{style:t?{marginLeft:16}:{},width:48,height:48,src:"".concat(h.prefix,"data/").concat(null==i?void 0:i.rawName,".png"),alt:""}),(0,n.jsxs)(u.Z,{direction:"row",gap:2,children:[o&&t?(0,n.jsx)(w.Z,{title:o,children:(0,n.jsx)(x.Z,{})}):null,(0,n.jsx)(s.Z,{children:(0,h.cleanUnderscore)(null==i?void 0:i.displayName)}),o&&!t?(0,n.jsx)(w.Z,{title:o,children:(0,n.jsx)(x.Z,{})}):null]}),(0,n.jsxs)(s.Z,{color:a<r?"error.light":a<=r+d?"warning.main":"success.main",mt:t?0:1,children:[(0,h.notateNumber)(a),"/",(0,h.notateNumber)(r)]})]})})}),(0,n.jsx)(u.Z,{sx:{minHeight:34,mt:1},direction:"row",justifyContent:"center",children:(null==O?void 0:O[l])?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{size:"small",onClick:()=>z(null==i?void 0:i.rawName),children:(0,n.jsx)(y.Z,{})}),(0,n.jsx)(j.Z,{size:"small",onClick:()=>F(null==i?void 0:i.rawName),children:(0,n.jsx)(C.Z,{})})]}):null})]},"tracked-item-".concat(l))})})]})}},57692:function(e,l,t){"use strict";t.d(l,{AN:function(){return c},F6:function(){return v},Nx:function(){return h},QU:function(){return d},ju:function(){return r},t8:function(){return i},tP:function(){return m},tT:function(){return a},w$:function(){return f},wA:function(){return s},zi:function(){return o}});var n=t(25611);let i=(e,l)=>{var t;return e&&l?null===(t=Object.keys(l))||void 0===t?void 0:t.reduce((t,n)=>{if("UQ1txt"===n||"UQ2txt"===n)return{...t,[n]:(null==e?void 0:e[n])||(null==l?void 0:l[n])};let i=null==e?void 0:e[n],r=null==l?void 0:l[n],o=i;return isNaN(r)||r<0?{...t,[n]:r}:(o=(i||0)+((null==l?void 0:l.UQ1txt)&&(null==e?void 0:e.Type)!=="KEYCHAIN"&&(null==e?void 0:e.UQ1txt)!==(null==l?void 0:l.UQ1txt)?0:r),{...t,[n]:parseFloat(o)})},{}):{}},r=function(e,l,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null==e?void 0:e.reduce((e,i)=>{if(t)l===(n?null==i?void 0:i.rawName:null==i?void 0:i.name)&&(e+=null==i?void 0:i.amount);else{var r,o;(n?null==i?void 0:null===(r=i.rawName)||void 0===r?void 0:r.includes(l):null==i?void 0:null===(o=i.name)||void 0===o?void 0:o.includes(l))&&(e+=null==i?void 0:i.amount)}return e},0)},o=function(e,l,t){var i,r,o,a,d,s,v,c,m,h,f,p;let x=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{equipment:w,tools:Z}=e||{},N=null!==(h=null==t?void 0:null===(o=t.lab)||void 0===o?void 0:null===(r=o.playersChips)||void 0===r?void 0:null===(i=r[null==e?void 0:e.playerId])||void 0===i?void 0:i.find(e=>16===e.index))&&void 0!==h?h:0,g=null!==(f=null==t?void 0:null===(s=t.lab)||void 0===s?void 0:null===(d=s.playersChips)||void 0===d?void 0:null===(a=d[null==e?void 0:e.playerId])||void 0===a?void 0:a.find(e=>17===e.index))&&void 0!==f?f:0,y=null!==(p=null==t?void 0:null===(m=t.lab)||void 0===m?void 0:null===(c=m.playersChips)||void 0===c?void 0:null===(v=c[null==e?void 0:e.playerId])||void 0===v?void 0:v.find(e=>18===e.index))&&void 0!==p?p:0,j=x?Z:w;return isNaN(l)?null==j?void 0:j.reduce((e,t)=>e+u(t,l),0):null==j?void 0:j.reduce((e,t,i)=>{var r;return e+u(t,null===n.bonuses||void 0===n.bonuses?void 0:null===(r=n.bonuses.etcBonuses)||void 0===r?void 0:r[l])*(3===i&&y||10===i&&N||9===i&&g?2:1)},0)},u=(e,l)=>{let t=(null==e?void 0:e.UQ1txt)===l?null==e?void 0:e.UQ1val:0,n=(null==e?void 0:e.UQ2txt)===l?null==e?void 0:e.UQ2val:0;return(null==e?void 0:e[l])?null==e?void 0:e[l]:t+n},a=(e,l,t)=>Array.from(Object.values(e)).reduce((e,r,o)=>{var u;let a=i(null===n.items||void 0===n.items?void 0:n.items[r],null==l?void 0:l[o]),d="",s={...null===n.items||void 0===n.items?void 0:n.items[r],...a};return(null==s?void 0:s.UQ1txt)&&(d+=null==s?void 0:s.UQ1txt),(null==s?void 0:s.UQ2txt)&&(d+=" ".concat(null==s?void 0:s.UQ2txt)),r?[...e,{name:null===n.items||void 0===n.items?void 0:null===(u=n.items[r])||void 0===u?void 0:u.displayName,rawName:r,owner:t,..."Blank"===r?{}:{...null===n.items||void 0===n.items?void 0:n.items[r],...a},misc:d}]:e},[]),d=(e,l)=>l?e.reduce((e,t)=>{let{name:n,owner:i,amount:r}=t;if(n===l){var o;return null!=e&&e[i]?{...e,[i]:{amount:(null==e?void 0:null===(o=e[i])||void 0===o?void 0:o.amount)+1}}:{...e,[i]:{amount:r}}}return e},{}):{},s=(e,l)=>{if(!l)return{};let t=e.filter(e=>{var t,n;let{misc:i,description:r}=e;return(null==r?void 0:null===(t=r.toLowerCase())||void 0===t?void 0:t.includes(null==l?void 0:l.toLowerCase()))||(null==i?void 0:null===(n=i.toLowerCase())||void 0===n?void 0:n.includes(null==l?void 0:l.toLowerCase()))},[]);return null==t?void 0:t.reduce((e,l)=>{let t=null==e?void 0:e.findIndex(e=>(null==e?void 0:e.rawName)===(null==l?void 0:l.rawName)),n=null==e?void 0:e[t];if(n){var i;let r=(null==n?void 0:null===(i=n.owners)||void 0===i?void 0:i.includes(null==l?void 0:l.owner))?null==n?void 0:n.owners:[...null==n?void 0:n.owners,null==l?void 0:l.owner];(null==n?void 0:n.misc)===(null==l?void 0:l.misc)&&(null==e||e.splice(t,1)),e=[...e,{...l,owners:r}]}else e=[...e,{...l,owners:[null==l?void 0:l.owner]}];return e},[])},v=e=>{if(!e)return[];let l={},t=JSON.parse(JSON.stringify(e)),n=(e,t)=>null==e?void 0:e.reduce((e,i)=>(e.push(i),i.materials&&(e=e.concat(n(null==i?void 0:i.materials,t)),i.materials=[]),l[null==i?void 0:i.itemName]?l[null==i?void 0:i.itemName].itemQuantity+=null==i?void 0:i.itemQuantity:l[null==i?void 0:i.itemName]=i,e),[]);return n(null==t?void 0:t.materials,l),Object.values(l)},c=(e,l)=>{var t;return null===(t=Object.entries(d(e,l)))||void 0===t?void 0:t.reduce((e,l)=>{let[t,{amount:n}]=l;return{amount:(null==e?void 0:e.amount)+n,owner:[...null==e?void 0:e.owner,t]}},{amount:0,owner:[]})},m=(e,l)=>l?null==e?void 0:e.reduce((e,l)=>{let{tools:t,equipment:n,food:i}=l;return[...e,...t,...n,...i]},[]).filter(e=>{let{rawName:l}=e;return"Blank"!==l}).map(e=>(null==e?void 0:e.amount)?e:{...e,amount:1}):[],h=(e,l)=>[...(null==e?void 0:e.reduce((e,l)=>{let{inventory:t=[]}=l;return[...e,...t]},[]))||[],...(null==l?void 0:l.storage)||[]],f=()=>{var e,l,t,i,r;let o=null===n.itemsArray||void 0===n.itemsArray?void 0:null===(e=n.itemsArray.filter(e=>{let{rawName:l}=e;return null==l?void 0:l.match(/EquipmentTools[0-9]+/)}))||void 0===e?void 0:e.filter(e=>{let{rawName:l}=e;return"EquipmentTools13"!==l&&"EquipmentTools10"!==l}),u=null===n.itemsArray||void 0===n.itemsArray?void 0:null===(l=n.itemsArray.filter(e=>{let{rawName:l}=e;return null==l?void 0:l.match(/EquipmentToolsHatchet[0-9]+/)}))||void 0===l?void 0:l.filter(e=>{let{rawName:l}=e;return"EquipmentToolsHatchet0"!==l&&"EquipmentToolsHatchet3"!==l&&"EquipmentToolsHatchet11"!==l&&"EquipmentToolsHatchet10"!==l}),a=null===n.itemsArray||void 0===n.itemsArray?void 0:null===(t=n.itemsArray.filter(e=>{let{rawName:l}=e;return null==l?void 0:l.match(/FishingRod[0-9]+/)}))||void 0===t?void 0:t.filter(e=>{let{rawName:l}=e;return"FishingRod1"!==l});return[o,u,a,null===n.itemsArray||void 0===n.itemsArray?void 0:null===(i=n.itemsArray.filter(e=>{let{rawName:l}=e;return null==l?void 0:l.match(/CatchingNet[0-9]+/)}))||void 0===i?void 0:i.filter(e=>{let{rawName:l}=e;return"CatchingNet1"!==l}),null===n.itemsArray||void 0===n.itemsArray?void 0:n.itemsArray.filter(e=>{let{rawName:l}=e;return null==l?void 0:l.match(/TrapBoxSet[0-9]+/)}),null===n.itemsArray||void 0===n.itemsArray?void 0:null===(r=n.itemsArray.filter(e=>{let{rawName:l}=e;return null==l?void 0:l.match(/WorshipSkull[0-9]+/)}))||void 0===r?void 0:r.filter(e=>{let{rawName:l}=e;return"WorshipSkull8"!==l})]}}},function(e){e.O(0,[417,2888,9774,179],function(){return e(e.s=50292)}),_N_E=e.O()}]);