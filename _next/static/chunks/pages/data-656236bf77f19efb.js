(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5081],{82374:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data",function(){return a(80619)}])},80619:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return data}});var n=a(82729),r=a(85893),l=a(65582),o=a(15861),i=a(51233),s=a(57922),d=a(50135),c=a(23795),u=a(16628),h=a(50480),p=a(69368),x=a(56815),m=a(14564),v=a(83321),f=a(67294),j=a(56868),g=a(74721),w=a(61599),Z=a(11163),b=a(18972),y=a(31812),S=a(60970),Normal=e=>{let{date:t,done:a}=e,[n,l]=(0,f.useState)({days:0,hours:0,minutes:0,seconds:0});(0,f.useEffect)(()=>{l(t)},[t]);let updateTimer=()=>{let{days:e,hours:t,minutes:a,seconds:r}=n;-1==(r-=1)&&(r=59,-1==(a-=1)&&(a=59,-1==(t-=1)&&(t=0,e-=1))),l({...n,days:e,hours:t,minutes:a,seconds:r})};return(0,S.Z)(()=>{updateTimer()},1e3),(0,r.jsx)("div",{children:a?(0,r.jsx)("span",{children:"00:00:00"}):(0,r.jsxs)("span",{children:[String(n.hours).padStart(2,"0"),":",String(n.minutes).padStart(2,"0"),":",String(n.seconds).padStart(2,"0")]})})},k=a(40929),I=a(24228),C=a(61436),T=a(94967),O=a(23513),_=a(60888),N=a(2962),E=a(21596),J=a(93946),P=a(87357),R=a(54364);function _templateObject(){let e=(0,n._)(["\n  text-transform: none;\n"]);return _templateObject=function(){return e},e}let D=(0,w.Z)(v.Z)(_templateObject()),Popper=e=>{let{anchorEl:t,handleClose:a}=e,n=!!t;return(0,r.jsx)(m.ZP,{sx:{ml:1},id:n?"simple-popover":void 0,open:n,anchorEl:t,onClose:a,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"},children:(0,r.jsx)(o.Z,{sx:{py:1,px:2},children:"Copied to clipboard!"})})};var data=()=>{var e,t,a,n;let m=(0,Z.useRouter)(),{state:v}=(0,f.useContext)(O.I),[w,S]=(0,f.useState)("all"),[U,z]=f.useState(null),[G,L]=(0,f.useState)(!1),[M,B]=(0,f.useState)(!1),[H,W]=(0,f.useState)(!1),[X,Y]=(0,f.useState)(!1),[q,A]=(0,f.useState)(!1),[F,Q]=(0,f.useState)(""),[K,V]=(0,f.useState)(!1);(0,f.useEffect)(()=>{(null==v?void 0:v.uid)&&(B(localStorage.getItem("".concat(null==v?void 0:v.uid,"/lastUpload"))),A("true"===localStorage.getItem("".concat(null==v?void 0:v.uid,"/leaderboardConsent"))))},[null==v?void 0:v.uid]),(0,f.useEffect)(()=>{M&&W(144e5-(Date.now()-M)>0)},[M]);let handleCopyITRaw=async e=>{try{z(e.currentTarget),await navigator.clipboard.writeText(localStorage.getItem("rawJson"))}catch(e){console.error(e)}},handleCopyRaw=async e=>{try{z(e.currentTarget);let t=JSON.parse(localStorage.getItem("rawJson"));await navigator.clipboard.writeText(JSON.stringify(null==t?void 0:t.data))}catch(e){console.error(e)}},handleUpdate=async()=>{let e=JSON.parse(localStorage.getItem("rawJson"));if(delete e.data.GemsOwned,delete e.data.ServerGems,delete e.data.ServerGemsReceived,delete e.data.BundlesReceived,delete e.data.GemsPacksPurchased,Y(!1),!M||144e5-(Date.now()-M)<0){L(!0);try{await (0,T.UQ)({profile:e,uid:null==v?void 0:v.uid,leaderboardConsent:q},null==v?void 0:v.accessToken),Y(!0);let t=Date.now();localStorage.setItem("".concat(null==v?void 0:v.uid,"/lastUpload"),t),B(t)}catch(e){Q(e)}L(!1)}};return!function(e,t){let a=(0,f.useRef)(null),n=(0,f.useRef)(e);(0,f.useEffect)(()=>{n.current=e},[e]),(0,f.useEffect)(()=>{if("number"==typeof t)return a.current=window.setTimeout(()=>n.current(),t),()=>window.clearTimeout(a.current)},[t])}(()=>{z(null)},U?1e3:null),(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(N.PB,{title:"Idleon Toolbox | Data",description:"Website settings and profile management"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{variant:"h4",children:"Data"}),(0,r.jsx)(o.Z,{variant:"body1",children:"Use this when asked for data"}),(0,r.jsx)(D,{component:"span",variant:"outlined",startIcon:(0,r.jsx)(j.Z,{}),onClick:handleCopyITRaw,children:"IdleonToolbox JSON"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.Z,{mt:3,direction:"row",alignItems:"center",children:[(0,r.jsx)(D,{sx:{textTransform:"none",fontSize:12},variant:"outlined",startIcon:(0,r.jsx)(j.Z,{}),size:"small",onClick:handleCopyRaw,children:"Raw Game JSON"}),(0,r.jsx)(J.Z,{onClick:()=>V(!K),children:(0,r.jsx)(E.Z,{style:{transform:K?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease-in-out"}})})]}),(0,r.jsx)(s.Z,{in:K,children:(0,r.jsx)("div",{style:{whiteSpace:"pre-wrap",overflowWrap:"break-word"},children:JSON.stringify(JSON.parse(localStorage.getItem("rawJson")),null,2)})})]}),(0,r.jsx)(Popper,{anchorEl:U,handleClose:()=>z(null)})]}),(0,r.jsx)(o.Z,{variant:"h4",mt:8,children:"Local Storage"}),(0,r.jsx)(o.Z,{component:"div",variant:"caption",mb:2,color:"warning.light",children:"Use this if you're having any issues loading the website"}),(0,r.jsx)("div",{children:(0,r.jsxs)(i.Z,{direction:"row",gap:2,children:[(0,r.jsxs)(d.Z,{sx:{width:250},label:"Local storage key",select:!0,value:w,onChange:e=>S(e.target.value),children:[(0,r.jsx)(b.Z,{value:"all",children:"All"}),(0,r.jsx)(b.Z,{value:"filters",children:"Characters page filters"}),(0,r.jsx)(b.Z,{value:"trackers",children:"Dashboard config"}),(0,r.jsx)(b.Z,{value:"planner",children:"Item Planner"}),(0,r.jsx)(b.Z,{value:"material-tracker",children:"Material tracker"})]}),(0,r.jsx)(D,{color:"warning",variant:"outlined",onClick:()=>{if("all"===w){let e=Object.keys(localStorage);e.forEach(e=>{e.includes("lastUpload")||localStorage.removeItem(e)})}else localStorage.removeItem(w);m.reload()},startIcon:(0,r.jsx)(g.Z,{}),children:"Clear"})]})}),!m.query.profile&&(null==v?void 0:v.characters)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{variant:"h4",mt:8,children:"Profile"}),(0,r.jsx)(o.Z,{variant:"body1",children:"* You can update your profile once every 4 hours"}),(0,r.jsx)(o.Z,{variant:"body1",mb:3,children:"* Gems and bundle information won't be saved"}),(0,r.jsxs)(o.Z,{variant:"body1",mb:3,children:["* Your profile link: ",(0,r.jsxs)(c.Z,{href:"https://idleontoolbox.com/?profile=".concat(null==v?void 0:null===(t=v.characters)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.name),children:["https://idleontoolbox.com/?profile=",null==v?void 0:null===(n=v.characters)||void 0===n?void 0:null===(a=n[0])||void 0===a?void 0:a.name]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,r.jsx)(y.Z,{disabled:H,loading:G,onClick:handleUpdate,variant:"contained",children:"Upload my profile"}),(0,r.jsx)(u.Z,{in:X,children:(0,r.jsx)(_.Z,{color:"success"})})]}),(0,r.jsx)(h.Z,{control:(0,r.jsx)(p.Z,{name:"mini",checked:q,size:"small",onChange:e=>{localStorage.setItem("".concat(null==v?void 0:v.uid,"/leaderboardConsent"),!q),A(!q)}}),label:"Participate in idleontoolbox leaderboard ranking"}),(0,r.jsx)(x.Z,{sx:{whiteSpace:"pre-wrap"},children:"Leave this box unchecked if you prefer not to participate in the leaderboard.\nTo exclude your profile, simply uncheck the box and re-upload your profile."}),(0,r.jsx)(o.Z,{sx:{mt:1},color:"error",variant:"body2",children:F}),(0,C.Z)(parseInt(M))?(0,r.jsxs)(o.Z,{sx:{mt:3},variant:"body2",children:["Last update: ",(0,k.Z)(parseInt(M),"MM/dd/yyyy HH:mm:ss")]}):null,M?(0,r.jsx)(o.Z,{variant:"body2",children:"Time to next upload"}):null,M?(0,r.jsx)(Normal,{done:144e5-(Date.now()-M)<0,date:(0,I.Z)({start:new Date(parseInt(M)),end:new Date().getTime()-144e5})}):null]})]}):null,K?(0,r.jsx)(P.Z,{sx:{position:"fixed",right:50,bottom:95},children:(0,r.jsx)(J.Z,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},size:"large",children:(0,r.jsx)(R.Z,{})})}):null]})}}},function(e){e.O(0,[5265,9774,2888,179],function(){return e(e.s=82374)}),_N_E=e.O()}]);