!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="7a765ba5-f66c-4d6c-9a57-5b45f174ff2a",e._sentryDebugIdIdentifier="sentry-dbid-7a765ba5-f66c-4d6c-9a57-5b45f174ff2a")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{89572:function(e,s,n){"use strict";var t=n(64836);s.Z=void 0;var l=t(n(64938)),r=n(85893),i=(0,l.default)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error");s.Z=i},90813:function(e,s,n){"use strict";var t=n(64836);s.Z=void 0;var l=t(n(64938)),r=n(85893),i=(0,l.default)((0,r.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");s.Z=i},1849:function(e,s,n){"use strict";var t=n(64836);s.Z=void 0;var l=t(n(64938)),r=n(85893),i=(0,l.default)((0,r.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");s.Z=i},30045:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guilds",function(){return n(59399)}])},59399:function(e,s,n){"use strict";n.r(s);var t=n(85893),l=n(67294),r=n(51575),i=n(23972),d=n(51233),a=n(98456),o=n(72882),u=n(90629),c=n(7906),x=n(53184),h=n(53816),j=n(53252),m=n(295),g=n(81458),y=n(57922),f=n(2962),Z=n(65298),p=n(93946),b=n(89572),v=n(75503),w=n(90813),T=n(87357),C=n(40929),I=n(61436),S=n(1849),_=n(74612),G=n(41915);s.default=()=>{let[e,s]=(0,l.useState)({func:null}),[n,k]=(0,l.useState)(null),[N,D]=(0,l.useState)(null),E=(0,Z.tryToParse)(sessionStorage.getItem("snapshotDate")),[z,L]=(0,l.useState)(""),B=(0,l.useCallback)(e=>{var s;return null==e?void 0:null===(s=e.slice(0,100))||void 0===s?void 0:s.map(e=>{var s,n,t,l,r;let i=null==e?void 0:null===(s=e.members)||void 0===s?void 0:s.find(e=>{let{g:s}=e;return 0===s}),d=null==e?void 0:null===(l=e.members)||void 0===l?void 0:null===(t=l.sort((e,s)=>(null==s?void 0:s.e)-(null==e?void 0:e.e)))||void 0===t?void 0:null===(n=t.slice(0,5))||void 0===n?void 0:n.map(e=>{let{a:s,e:n}=e;return{name:s,gpEarned:n}});return{guildIcon:null==e?void 0:e.guildIcon,guildName:null==e?void 0:e.guildName,totalGp:null==e?void 0:e.totalGp,membersCount:null==e?void 0:null===(r=e.members)||void 0===r?void 0:r.length,leader:i,topContributors:d}})},[]),handleGuildsUpdate=e=>{let{guilds:s,error:n}=e;if(n)return L("An unexpected error has occurred");let t=B(s);sessionStorage.setItem("guildsLeaderboard",JSON.stringify(t)),sessionStorage.setItem("snapshotDate",new Date().getTime()),k(t)},subscribe=async()=>{let e=(0,r.n6)(handleGuildsUpdate);s({func:e})};return(0,l.useEffect)(()=>{let s=(0,Z.getDuration)(new Date,E);return(null==s?void 0:s.days)>0||(null==s?void 0:s.hours)>0||(null==s?void 0:s.minutes)>=15||!E?setTimeout(()=>subscribe(),3e3):k((0,Z.tryToParse)(sessionStorage.getItem("guildsLeaderboard"))),()=>{e&&"function"==typeof(null==e?void 0:e.func)&&(null==e||e.func())}},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.PB,{title:"Guilds | Idleon Toolbox",description:"Top guilds in idleon","data-sentry-element":"NextSeo","data-sentry-source-file":"guilds.jsx"}),(0,t.jsx)(i.Z,{variant:"h2","data-sentry-element":"Typography","data-sentry-source-file":"guilds.jsx",children:"Guilds Leaderboard"}),(0,t.jsxs)(d.Z,{direction:"row",alignItems:"center",gap:1,"data-sentry-element":"Stack","data-sentry-source-file":"guilds.jsx",children:[(0,t.jsxs)(d.Z,{gap:2,direction:"row","data-sentry-element":"Stack","data-sentry-source-file":"guilds.jsx",children:["Last Updated: ",n?(0,I.Z)(E)?(0,C.Z)(E,"dd/MM/yyyy HH:mm:ss"):null:(0,t.jsx)(a.Z,{size:"22px",disableShrink:!0})]}),(0,t.jsx)(_.Z,{title:"Reload guild data","data-sentry-element":"Tooltip","data-sentry-source-file":"guilds.jsx",children:(0,t.jsx)("span",{children:(0,t.jsx)(p.Z,{disabled:!n,onClick:()=>{if(!n)return null;k(null),sessionStorage.removeItem("guildsLeaderboard"),sessionStorage.removeItem("snapshotDate"),subscribe()},"data-sentry-element":"IconButton","data-sentry-source-file":"guilds.jsx",children:(0,t.jsx)(S.Z,{"data-sentry-element":"RefreshIcon","data-sentry-source-file":"guilds.jsx"})})})})]}),(0,t.jsx)(i.Z,{variant:"caption",component:"div",sx:{mb:2},"data-sentry-element":"Typography","data-sentry-source-file":"guilds.jsx",children:"* Updates every 15 minutes"}),(0,t.jsx)(o.Z,{component:u.Z,"data-sentry-element":"TableContainer","data-sentry-source-file":"guilds.jsx",children:(0,t.jsxs)(c.Z,{size:"small","data-sentry-element":"Table","data-sentry-source-file":"guilds.jsx",children:[(0,t.jsx)(x.Z,{"data-sentry-element":"TableHead","data-sentry-source-file":"guilds.jsx",children:(0,t.jsxs)(h.Z,{"data-sentry-element":"TableRow","data-sentry-source-file":"guilds.jsx",children:[(0,t.jsx)(j.Z,{sx:{width:"1px"},"data-sentry-element":"TableCell","data-sentry-source-file":"guilds.jsx"}),(0,t.jsx)(j.Z,{sx:{width:30},"data-sentry-element":"TableCell","data-sentry-source-file":"guilds.jsx"}),(0,t.jsx)(j.Z,{"data-sentry-element":"TableCell","data-sentry-source-file":"guilds.jsx",children:"Guild Name"}),(0,t.jsx)(j.Z,{"data-sentry-element":"TableCell","data-sentry-source-file":"guilds.jsx",children:"Guild Points"}),(0,t.jsx)(j.Z,{"data-sentry-element":"TableCell","data-sentry-source-file":"guilds.jsx",children:"Guild Leader"}),(0,t.jsx)(j.Z,{"data-sentry-element":"TableCell","data-sentry-source-file":"guilds.jsx",children:"Guild Level"}),(0,t.jsx)(j.Z,{"data-sentry-element":"TableCell","data-sentry-source-file":"guilds.jsx",children:"Members Count"})]})}),(0,t.jsxs)(m.Z,{"data-sentry-element":"TableBody","data-sentry-source-file":"guilds.jsx",children:[n||z?null:(0,t.jsx)(h.Z,{children:(0,t.jsx)(j.Z,{colSpan:7,align:"center",children:(0,t.jsxs)(d.Z,{alignItems:"center",gap:2,children:[(0,t.jsx)(i.Z,{children:"Gathering guild info"}),(0,t.jsx)(g.Z,{sx:{width:300}})]})})}),z?(0,t.jsx)(h.Z,{children:(0,t.jsx)(j.Z,{colSpan:7,align:"center",children:(0,t.jsxs)(d.Z,{sx:{my:3},direction:"row",alignItems:"center",justifyContent:"center",gap:2,children:[(0,t.jsx)(b.Z,{}),(0,t.jsx)(i.Z,{variant:"h6",children:z})]})})}):null,null==n?void 0:n.map((e,s)=>{let{totalGp:n,leader:r,membersCount:a,guildIcon:o,guildName:u,topContributors:g}=e,f=(0,G.J2)(n);return(0,t.jsxs)(l.Fragment,{children:[(0,t.jsxs)(h.Z,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,t.jsx)(j.Z,{sx:{p:"4px"},children:(0,t.jsx)(p.Z,{"aria-label":"expand row",size:"small",onClick:()=>D(N===s?null:s),children:N===s?(0,t.jsx)(w.Z,{}):(0,t.jsx)(v.Z,{})})}),(0,t.jsx)(j.Z,{sx:{p:1,textAlign:"center"},children:s+1}),(0,t.jsx)(j.Z,{children:(0,t.jsxs)(d.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,t.jsx)("img",{src:"".concat(Z.prefix,"data/G2icon").concat(o,".png"),style:{width:24},alt:"guild-icon"}),(0,t.jsx)(i.Z,{children:u})]})}),(0,t.jsx)(j.Z,{children:(0,Z.numberWithCommas)(n)}),(0,t.jsx)(j.Z,{children:null==r?void 0:r.a}),(0,t.jsx)(j.Z,{children:f}),(0,t.jsxs)(j.Z,{children:[a," / ",30+4*f]})]}),(0,t.jsx)(h.Z,{sx:{"& > *":{borderBottom:"unset"}},children:(0,t.jsx)(j.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:(0,t.jsx)(y.Z,{in:N===s,timeout:"auto",unmountOnExit:!0,children:(0,t.jsxs)(T.Z,{sx:{p:1},children:[(0,t.jsx)(i.Z,{variant:"h6",sx:{mb:1},children:"Top Contributors"}),(0,t.jsxs)(c.Z,{size:"small",sx:{width:300},children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(j.Z,{children:"Name"}),(0,t.jsx)(j.Z,{children:"Gp"})]})}),(0,t.jsx)(m.Z,{children:null==g?void 0:g.map(e=>{let{name:s,gpEarned:n}=e;return(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(j.Z,{children:s}),(0,t.jsx)(j.Z,{children:(0,Z.numberWithCommas)(n)})]},"top-3-".concat(s))})})]})]})})})})]},"row"+s)})]})]})})]})}}},function(e){e.O(0,[2307,9774,2888,179],function(){return e(e.s=30045)}),_N_E=e.O()}]);