(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7196],{66242:function(e,n,r){"use strict";r.d(n,{Z:function(){return g}});var t=r(87462),o=r(63366),l=r(67294),i=r(86010),s=r(94780),a=r(90948),c=r(71657),d=r(90629),u=r(1588),v=r(34867);function m(e){return(0,v.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var x=r(85893);let h=["className","raised"],Z=e=>{let{classes:n}=e;return(0,s.Z)({root:["root"]},m,n)},p=(0,a.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({overflow:"hidden"}));var g=l.forwardRef(function(e,n){let r=(0,c.Z)({props:e,name:"MuiCard"}),{className:l,raised:s=!1}=r,a=(0,o.Z)(r,h),d=(0,t.Z)({},r,{raised:s}),u=Z(d);return(0,x.jsx)(p,(0,t.Z)({className:(0,i.Z)(u.root,l),elevation:s?8:void 0,ref:n,ownerState:d},a))})},44267:function(e,n,r){"use strict";r.d(n,{Z:function(){return p}});var t=r(87462),o=r(63366),l=r(67294),i=r(86010),s=r(94780),a=r(90948),c=r(71657),d=r(1588),u=r(34867);function v(e){return(0,u.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var m=r(85893);let x=["className","component"],h=e=>{let{classes:n}=e;return(0,s.Z)({root:["root"]},v,n)},Z=(0,a.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var p=l.forwardRef(function(e,n){let r=(0,c.Z)({props:e,name:"MuiCardContent"}),{className:l,component:s="div"}=r,a=(0,o.Z)(r,x),d=(0,t.Z)({},r,{component:s}),u=h(d);return(0,m.jsx)(Z,(0,t.Z)({as:s,className:(0,i.Z)(u.root,l),ownerState:d,ref:n},a))})},34599:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/misc/guild",function(){return r(42e3)}])},60527:function(e,n,r){"use strict";var t=r(85893),o=r(87357),l=r(81458),i=r(15861);r(67294),n.Z=e=>{let{percent:n,bgColor:r,label:s=!0,sx:a,boxSx:c={},pre:d}=e;return(0,t.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",...c},children:[d,(0,t.jsx)(o.Z,{sx:{width:"100%",mr:1},children:(0,t.jsx)(l.Z,{sx:{width:"100%",height:10,borderRadius:5,"& .MuiLinearProgress-bar":{backgroundColor:r||""},...a},variant:"determinate",value:n>100?100:n})}),s?(0,t.jsx)(o.Z,{children:(0,t.jsx)(i.Z,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(n),"%")})}):null]})}},55429:function(e,n,r){"use strict";var t=r(85893),o=r(67294),l=r(98396),i=r(11703),s=r(40044);n.Z=e=>{let{tabs:n,children:r,onTabChange:a}=e,[c,d]=(0,o.useState)(0),u=(0,l.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),v=Array.isArray(r)?r:[r];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{centered:!u||u&&n.length<4,scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:u&&n.length>4?"scrollable":"standard",value:c,onChange:(e,n)=>{d(n),a&&a(n)},children:null==n?void 0:n.map((e,n)=>(0,t.jsx)(s.Z,{label:e},"".concat(e,"-").concat(n)))}),a?r:null==v?void 0:v.map((e,n)=>n===c?e:null)]})}},42e3:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return J}});var t=r(85893),o=r(2962),l=r(15861),i=r(51233),s=r(83321),a=r(66242),c=r(44267),d=r(67294),u=r(11688),v=r(55429),m=r(72882),x=r(90629),h=r(7906),Z=r(53184),p=r(53816),g=r(53252),j=r(63366),f=r(87462),b=r(94780),y=r(86010),w=r(47739),S=(0,r(88169).Z)((0,t.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),C=r(90948),M=r(71657),N=r(98216),R=r(1588),k=r(34867);function E(e){return(0,k.Z)("MuiTableSortLabel",e)}let I=(0,R.Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),T=["active","children","className","direction","hideSortIcon","IconComponent"],D=e=>{let{classes:n,direction:r,active:t}=e,o={root:["root",t&&"active"],icon:["icon",`iconDirection${(0,N.Z)(r)}`]};return(0,b.Z)(o,E,n)},_=(0,C.ZP)(w.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:r}=e;return[n.root,r.active&&n.active]}})(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${I.icon}`]:{opacity:.5}},[`&.${I.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${I.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}})),L=(0,C.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,n)=>{let{ownerState:r}=e;return[n.icon,n[`iconDirection${(0,N.Z)(r.direction)}`]]}})(({theme:e,ownerState:n})=>(0,f.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},"desc"===n.direction&&{transform:"rotate(0deg)"},"asc"===n.direction&&{transform:"rotate(180deg)"})),P=d.forwardRef(function(e,n){let r=(0,M.Z)({props:e,name:"MuiTableSortLabel"}),{active:o=!1,children:l,className:i,direction:s="asc",hideSortIcon:a=!1,IconComponent:c=S}=r,d=(0,j.Z)(r,T),u=(0,f.Z)({},r,{active:o,direction:s,hideSortIcon:a,IconComponent:c}),v=D(u);return(0,t.jsxs)(_,(0,f.Z)({className:(0,y.Z)(v.root,i),component:"span",disableRipple:!0,ownerState:u,ref:n},d,{children:[l,a&&!o?null:(0,t.jsx)(L,{as:c,className:(0,y.Z)(v.icon),ownerState:u})]}))});var B=r(295),G=r(16954),A=r(87357),H=r(40929),O=e=>{let{members:n,saves:r}=e,[o,i]=(0,d.useState)(),[s,a]=(0,d.useState)("desc"),[c,u]=(0,d.useState)("gpEarned");(0,d.useEffect)(()=>{i(v(n,c,s))},[n]);let v=(e,n,r)=>e.sort((e,t)=>"asc"===r?(null==e?void 0:e[n])-(null==t?void 0:t[n]):(null==t?void 0:t[n])-(null==e?void 0:e[n])),j=(e,r)=>{a(r),u(e),i(v(n,e,r))};return(0,t.jsx)(m.Z,{component:x.Z,children:(0,t.jsxs)(h.Z,{children:[(0,t.jsxs)(Z.Z,{children:[(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(g.Z,{children:"Name"}),(0,t.jsx)(g.Z,{sortDirection:s,children:(0,t.jsx)(P,{direction:s,active:"level"===c,onClick:()=>j("level","asc"===s?"desc":"asc"),children:"Level"})}),(0,t.jsx)(g.Z,{sortDirection:s,align:(null==r?void 0:r.length)===0?"left":"center",colSpan:(null==r?void 0:r.length)||1,children:(0,t.jsx)(P,{direction:s,active:"gpEarned"===c,onClick:()=>j("gpEarned","asc"===s?"desc":"asc"),children:"Earned GP"})}),(0,t.jsx)(g.Z,{children:"Wanted Bonus"})]}),(null==r?void 0:r.length)>0?(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(g.Z,{colSpan:2}),null==r?void 0:r.map((e,n)=>{if(e)return(0,t.jsx)(g.Z,{children:(0,H.Z)(null==e?void 0:e.timestamp,"dd/MM/yyyy HH:mm:ss")},(null==e?void 0:e.timestamp)+n)}),(0,t.jsx)(g.Z,{})]}):null]}),(0,t.jsx)(B.Z,{children:null==o?void 0:o.map((e,n)=>{let{name:o,level:i,gpEarned:s,wantedBonus:a,rank:c}=e,d=null==r?void 0:r.reduce((e,n)=>{var r;let t=null==n?void 0:null===(r=n.members)||void 0===r?void 0:r.find(e=>{let{name:n}=e;return n===o});return[...e,{gpChange:t?s-(null==t?void 0:t.gpEarned):s,timestamp:null==n?void 0:n.timestamp}]},[]);return o?(0,t.jsxs)(p.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,t.jsxs)(g.Z,{children:[c<5?(0,t.jsx)("img",{src:"".concat(G.prefix,"etc/GuildRank").concat(c,".png"),alt:"rank-".concat(c)}):(0,t.jsx)(A.Z,{component:"span",sx:{display:"inline-block",width:15,height:17}}),(0,t.jsxs)(l.Z,{component:"span",sx:{ml:1},children:[o," ",0===c?"(King)":1===c?"(Leader)":""]})]}),(0,t.jsx)(g.Z,{children:i}),(null==r?void 0:r.length)===0?(0,t.jsx)(g.Z,{children:s}):null,d.map((e,n)=>{let{gpChange:r}=e;return(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(l.Z,{component:"span",mr:1,children:s}),(0,t.jsxs)(l.Z,{variant:"caption",color:r>0?"success.light":"error.light",children:["(",r>0?"+":"",r,")"]})]},"change"+n)}),(0,t.jsx)(g.Z,{children:(0,G.cleanUnderscore)(null==a?void 0:a.name)||"Guild Gifts"})]},o+i+n):null})})]})})},W=e=>{let{bonuses:n}=e,r=e=>{let{maxLevel:n,level:r,gpBaseCost:t,gpIncrease:o}=e,l=0;for(let e=r;e<n;e++)l+=t+e*o;return l};return(0,t.jsx)(i.Z,{direction:"row",flexWrap:"wrap",gap:2,children:null==n?void 0:n.map((e,n)=>{let{name:o,level:s,gpIncrease:d,maxLevel:u,bonus:v,func:m,x1:x,x2:h,gpBaseCost:Z}=e,p=r(e);return(0,t.jsx)(a.Z,{sx:{width:300},children:(0,t.jsx)(c.Z,{children:(0,t.jsxs)(i.Z,{gap:2,children:[(0,t.jsxs)(i.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,t.jsx)("img",{src:"".concat(G.prefix,"data/Gbonus").concat(n,".png"),alt:""}),(0,t.jsx)(l.Z,{children:(0,G.cleanUnderscore)(o)})]}),(0,t.jsxs)(i.Z,{gap:1,children:[(0,t.jsxs)(l.Z,{children:["level: ",s," / ",u]}),(0,t.jsxs)(l.Z,{children:["Cost: ",(0,G.notateNumber)(Z+s*d)]}),(0,t.jsxs)(l.Z,{children:["Cost To Max: ",(0,G.notateNumber)(p)]}),(0,t.jsx)(l.Z,{sx:{fontSize:16},children:(0,G.cleanUnderscore)(v.replace("{",(0,G.growth)(m,s,x,h)))})]})]})})},o+n)})})},$=r(60527);let z=e=>{let{cardSx:n,title:r,value:o,children:i}=e;return(0,t.jsx)(a.Z,{sx:{my:{xs:0,md:3},width:"fit-content",...n},children:(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(l.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:r}),o?(0,t.jsx)(l.Z,{children:o}):i]})})};var J=()=>{var e,n,r,a,c,m,x,h;let{state:Z}=(0,d.useContext)(u.I),{guild:p}=null==Z?void 0:Z.account,[g,j]=(0,d.useState)([]),[f,b]=(0,d.useState)("");(0,d.useEffect)(()=>{let e=(0,G.tryToParse)(localStorage.getItem("guild"));e&&j(Array.isArray(e)?e:[e])},[]);let y=async()=>{try{var e;let n={date:(0,H.Z)(new Date,"dd/MM/yyyy HH:mm:ss"),members:null==p?void 0:null===(e=p.members)||void 0===e?void 0:e.map(e=>{let{name:n,gpEarned:r}=e;return{name:n,gpEarned:r}})};await navigator.clipboard.writeText(JSON.stringify(n))}catch(e){console.error("exportToJson -> ",e)}};return p&&(null==p?void 0:null===(e=p.members)||void 0===e?void 0:e.length)!==0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.PB,{title:"Guild | Idleon Toolbox",description:"Keep track of your guild members, gp, bonuses and more"}),(0,t.jsxs)(i.Z,{children:[(0,t.jsxs)(i.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,t.jsx)("img",{src:"".concat(G.prefix,"data/G2icon").concat(null==Z?void 0:null===(r=Z.account)||void 0===r?void 0:null===(n=r.accountOptions)||void 0===n?void 0:n[38],".png"),alt:"guild-icon"}),(0,t.jsxs)(l.Z,{variant:"h3",children:[null==Z?void 0:null===(c=Z.account)||void 0===c?void 0:null===(a=c.accountOptions)||void 0===a?void 0:a[37]," ",(0,t.jsxs)(l.Z,{component:"span",variant:"h5",children:["(",null==p?void 0:null===(m=p.members)||void 0===m?void 0:m.length," / ",null==p?void 0:p.maxMembers,")"]})]})]}),(0,t.jsxs)(i.Z,{sx:{mb:1},direction:"row",gap:2,flexWrap:"wrap",children:[(0,t.jsx)(z,{title:"Members",value:"".concat(null==p?void 0:null===(x=p.members)||void 0===x?void 0:x.length," / ").concat(null==p?void 0:p.maxMembers)}),(0,t.jsxs)(z,{title:"Exp",children:[(0,t.jsx)($.Z,{boxSx:{width:200},percent:(null==p?void 0:p.totalGp)/Math.round(null==p?void 0:p.levelReq)*100,bgColor:"#f3dd4c"}),(0,t.jsxs)(l.Z,{children:[(0,G.numberWithCommas)(null==p?void 0:p.totalGp)," / ",(0,G.numberWithCommas)(Math.round(null==p?void 0:p.levelReq))]})]}),(0,t.jsx)(z,{title:"Saves (up to 3)",children:(0,t.jsxs)(i.Z,{gap:1,children:[(0,t.jsx)(A.Z,{children:null==g?void 0:null===(h=g.reverse())||void 0===h?void 0:h.map((e,n)=>{let{timestamp:r}=e;return(0,t.jsxs)(l.Z,{children:["#",n+1," - ",(0,H.Z)(new Date(r),"dd/MM/yyyy HH:mm:ss")]},r+n)})}),(0,t.jsxs)(i.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,t.jsx)(s.Z,{variant:"contained",onClick:()=>{let e;let n=new Date().getTime(),r=(0,G.tryToParse)(localStorage.getItem("guild"));j(e=Array.isArray(r)?[...(r=(null==r?void 0:r.length)>=3?null==r?void 0:r.slice(1):r)||[],{timestamp:n,members:null==p?void 0:p.members}]:r?[r,{timestamp:n,members:null==p?void 0:p.members}]:[{timestamp:n,members:null==p?void 0:p.members}]),localStorage.setItem("guild",JSON.stringify(e)),b("")},children:"Save"}),(0,t.jsx)(s.Z,{variant:"contained",onClick:y,children:"Export"}),(0,t.jsx)(s.Z,{variant:"contained",color:"warning",onClick:()=>{localStorage.removeItem("guild"),j([])},children:"Clear all"})]}),f?(0,t.jsx)(l.Z,{color:"error.light",children:f}):null]})})]})]}),(0,t.jsxs)(v.Z,{tabs:["Members","Bonuses"],children:[(0,t.jsx)(O,{members:null==p?void 0:p.members,saves:g}),(0,t.jsx)(W,{bonuses:null==p?void 0:p.guildBonuses})]})]}):(0,t.jsx)(l.Z,{variant:"h3",mb:3,children:"You have to be in a guild to view this page's content"})}}},function(e){e.O(0,[2307,2888,9774,179],function(){return e(e.s=34599)}),_N_E=e.O()}]);