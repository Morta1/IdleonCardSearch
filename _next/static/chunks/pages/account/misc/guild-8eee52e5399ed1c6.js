(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7196],{66242:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(87462),l=n(63366),i=n(67294),o=n(86010),s=n(94780),a=n(90948),d=n(71657),c=n(90629),u=n(1588),m=n(34867);function getCardUtilityClass(e){return(0,m.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var v=n(85893);let x=["className","raised"],useUtilityClasses=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},getCardUtilityClass,t)},h=(0,a.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),Z=i.forwardRef(function(e,t){let n=(0,d.Z)({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=n,a=(0,l.Z)(n,x),c=(0,r.Z)({},n,{raised:s}),u=useUtilityClasses(c);return(0,v.jsx)(h,(0,r.Z)({className:(0,o.Z)(u.root,i),elevation:s?8:void 0,ref:t,ownerState:c},a))});var p=Z},44267:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(87462),l=n(63366),i=n(67294),o=n(86010),s=n(94780),a=n(90948),d=n(71657),c=n(1588),u=n(34867);function getCardContentUtilityClass(e){return(0,u.Z)("MuiCardContent",e)}(0,c.Z)("MuiCardContent",["root"]);var m=n(85893);let v=["className","component"],useUtilityClasses=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},getCardContentUtilityClass,t)},x=(0,a.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),h=i.forwardRef(function(e,t){let n=(0,d.Z)({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=n,a=(0,l.Z)(n,v),c=(0,r.Z)({},n,{component:s}),u=useUtilityClasses(c);return(0,m.jsx)(x,(0,r.Z)({as:s,className:(0,o.Z)(u.root,i),ownerState:c,ref:t},a))});var Z=h},34599:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/misc/guild",function(){return n(13319)}])},83014:function(e,t,n){"use strict";var r=n(85893),l=n(87357),i=n(81458),o=n(15861);n(67294),t.Z=e=>{let{percent:t,bgColor:n,label:s=!0,sx:a,boxSx:d={},pre:c}=e;return(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",...d},children:[c,(0,r.jsx)(l.Z,{sx:{width:"100%",mr:1},children:(0,r.jsx)(i.Z,{sx:{width:"100%",height:10,borderRadius:5,"& .MuiLinearProgress-bar":{backgroundColor:n||""},...a},variant:"determinate",value:t>100?100:t})}),s?(0,r.jsx)(l.Z,{children:(0,r.jsx)(o.Z,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(t),"%")})}):null]})}},68575:function(e,t,n){"use strict";var r=n(85893),l=n(67294),i=n(98396),o=n(11703),s=n(40044);t.Z=e=>{let{tabs:t,children:n,onTabChange:a}=e,[d,c]=(0,l.useState)(0),u=(0,i.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),m=Array.isArray(n)?n:[n];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{centered:!u||u&&t.length<4,scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:u&&t.length>4?"scrollable":"standard",value:d,onChange:(e,t)=>{c(t),a&&a(t)},children:null==t?void 0:t.map((e,t)=>(0,r.jsx)(s.Z,{label:e},"".concat(e,"-").concat(t)))}),a?n:null==m?void 0:m.map((e,t)=>t===d?e:null)]})}},13319:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return guild}});var r=n(85893),l=n(2962),i=n(15861),o=n(51233),s=n(83321),a=n(66242),d=n(44267),c=n(67294),u=n(23513),m=n(68575),v=n(72882),x=n(90629),h=n(7906),Z=n(53184),p=n(53816),g=n(53252),j=n(63366),b=n(87462),f=n(94780),y=n(86010),C=n(47739),S=(0,n(88169).Z)((0,r.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),w=n(90948),M=n(71657),T=n(98216),G=n(1588),N=n(34867);function getTableSortLabelUtilityClass(e){return(0,N.Z)("MuiTableSortLabel",e)}let R=(0,G.Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),_=["active","children","className","direction","hideSortIcon","IconComponent"],useUtilityClasses=e=>{let{classes:t,direction:n,active:r}=e,l={root:["root",r&&"active"],icon:["icon",`iconDirection${(0,T.Z)(n)}`]};return(0,f.Z)(l,getTableSortLabelUtilityClass,t)},k=(0,w.ZP)(C.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.active&&t.active]}})(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${R.icon}`]:{opacity:.5}},[`&.${R.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${R.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}})),U=(0,w.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.icon,t[`iconDirection${(0,T.Z)(n.direction)}`]]}})(({theme:e,ownerState:t})=>(0,b.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},"desc"===t.direction&&{transform:"rotate(0deg)"},"asc"===t.direction&&{transform:"rotate(180deg)"})),E=c.forwardRef(function(e,t){let n=(0,M.Z)({props:e,name:"MuiTableSortLabel"}),{active:l=!1,children:i,className:o,direction:s="asc",hideSortIcon:a=!1,IconComponent:d=S}=n,c=(0,j.Z)(n,_),u=(0,b.Z)({},n,{active:l,direction:s,hideSortIcon:a,IconComponent:d}),m=useUtilityClasses(u);return(0,r.jsxs)(k,(0,b.Z)({className:(0,y.Z)(m.root,o),component:"span",disableRipple:!0,ownerState:u,ref:t},c,{children:[i,a&&!l?null:(0,r.jsx)(U,{as:d,className:(0,y.Z)(m.icon),ownerState:u})]}))});var I=n(295),L=n(42168),A=n(87357),D=n(40929),Guild_GuildMembers=e=>{let{members:t,saves:n}=e,[l,o]=(0,c.useState)(),[s,a]=(0,c.useState)("desc"),[d,u]=(0,c.useState)("gpEarned");(0,c.useEffect)(()=>{o(getSortedMembers(t,d,s))},[t]);let getSortedMembers=(e,t,n)=>e.sort((e,r)=>"asc"===n?(null==e?void 0:e[t])-(null==r?void 0:r[t]):(null==r?void 0:r[t])-(null==e?void 0:e[t])),handleSort=(e,n)=>{a(n),u(e);let r=getSortedMembers(t,e,n);o(r)};return(0,r.jsx)(v.Z,{component:x.Z,children:(0,r.jsxs)(h.Z,{children:[(0,r.jsxs)(Z.Z,{children:[(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(g.Z,{children:"Name"}),(0,r.jsx)(g.Z,{sortDirection:s,children:(0,r.jsx)(E,{direction:s,active:"level"===d,onClick:()=>handleSort("level","asc"===s?"desc":"asc"),children:"Level"})}),(0,r.jsx)(g.Z,{sortDirection:s,align:(null==n?void 0:n.length)===0?"left":"center",colSpan:(null==n?void 0:n.length)||1,children:(0,r.jsx)(E,{direction:s,active:"gpEarned"===d,onClick:()=>handleSort("gpEarned","asc"===s?"desc":"asc"),children:"Earned GP"})}),(0,r.jsx)(g.Z,{children:"Wanted Bonus"})]}),(null==n?void 0:n.length)>0?(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(g.Z,{colSpan:2}),null==n?void 0:n.map((e,t)=>{if(e)return(0,r.jsx)(g.Z,{children:(0,D.Z)(null==e?void 0:e.timestamp,"MM/dd/yyyy")},(null==e?void 0:e.timestamp)+t)}),(0,r.jsx)(g.Z,{})]}):null]}),(0,r.jsx)(I.Z,{children:null==l?void 0:l.map((e,t)=>{let{name:l,level:o,gpEarned:s,wantedBonus:a,rank:d}=e,c=null==n?void 0:n.reduce((e,t)=>{var n;let r=null==t?void 0:null===(n=t.members)||void 0===n?void 0:n.find(e=>{let{name:t}=e;return t===l});return[...e,{gpChange:r?s-(null==r?void 0:r.gpEarned):s,timestamp:null==t?void 0:t.timestamp}]},[]);return l?(0,r.jsxs)(p.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,r.jsxs)(g.Z,{children:[d<5?(0,r.jsx)("img",{src:"".concat(L.prefix,"etc/GuildRank").concat(d,".png"),alt:"rank-".concat(d)}):(0,r.jsx)(A.Z,{component:"span",sx:{display:"inline-block",width:15,height:17}}),(0,r.jsxs)(i.Z,{component:"span",sx:{ml:1},children:[l," ",0===d?"(King)":1===d?"(Leader)":""]})]}),(0,r.jsx)(g.Z,{children:o}),(null==n?void 0:n.length)===0?(0,r.jsx)(g.Z,{children:s}):null,c.map((e,t)=>{let{gpChange:n}=e;return(0,r.jsxs)(g.Z,{children:[(0,r.jsx)(i.Z,{component:"span",mr:1,children:s}),(0,r.jsxs)(i.Z,{variant:"caption",color:n>0?"success.light":"error.light",children:["(",n>0?"+":"",n,")"]})]},"change"+t)}),(0,r.jsx)(g.Z,{children:(0,L.cleanUnderscore)(null==a?void 0:a.name)||"Guild Gifts"})]},l+o+t):null})})]})})},Guild_GuildBonuses=e=>{let{bonuses:t}=e,getCostToMax=e=>{let{maxLevel:t,level:n,gpBaseCost:r,gpIncrease:l}=e,i=0;for(let e=n;e<t;e++)i+=r+e*l;return i};return(0,r.jsx)(o.Z,{direction:"row",flexWrap:"wrap",gap:2,children:null==t?void 0:t.map((e,t)=>{let{name:n,level:l,gpIncrease:s,maxLevel:c,bonus:u,func:m,x1:v,x2:x,gpBaseCost:h}=e,Z=getCostToMax(e);return(0,r.jsx)(a.Z,{sx:{width:300},children:(0,r.jsx)(d.Z,{children:(0,r.jsxs)(o.Z,{gap:2,children:[(0,r.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,r.jsx)("img",{src:"".concat(L.prefix,"data/Gbonus").concat(t,".png"),alt:""}),(0,r.jsx)(i.Z,{children:(0,L.cleanUnderscore)(n)})]}),(0,r.jsxs)(o.Z,{gap:1,children:[(0,r.jsxs)(i.Z,{children:["level: ",l," / ",c]}),(0,r.jsxs)(i.Z,{children:["cost: ",(0,L.notateNumber)(h+l*s)]}),(0,r.jsxs)(i.Z,{children:["cost to max: ",(0,L.notateNumber)(Z)]}),(0,r.jsx)(i.Z,{sx:{fontSize:16},children:(0,L.cleanUnderscore)(u.replace("{",(0,L.growth)(m,l,v,x)))})]})]})})},n+t)})})},B=n(83014);let CardTitleAndValue=e=>{let{cardSx:t,title:n,value:l,children:o}=e;return(0,r.jsx)(a.Z,{sx:{my:{xs:0,md:3},width:"fit-content",...t},children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(i.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:n}),l?(0,r.jsx)(i.Z,{children:l}):o]})})};var guild=()=>{var e,t,n,a,d,v,x,h;let{state:Z}=(0,c.useContext)(u.I),{guild:p}=null==Z?void 0:Z.account,[g,j]=(0,c.useState)([]),[b,f]=(0,c.useState)("");(0,c.useEffect)(()=>{let e=(0,L.tryToParse)(localStorage.getItem("guild"));e&&j(Array.isArray(e)?e:[e])},[]);let exportToJson=async()=>{try{var e;let t={date:(0,D.Z)(new Date,"dd/MM/yyyy HH:mm:ss"),members:null==p?void 0:null===(e=p.members)||void 0===e?void 0:e.map(e=>{let{name:t,gpEarned:n}=e;return{name:t,gpEarned:n}})};await navigator.clipboard.writeText(JSON.stringify(t))}catch(e){console.error("exportToJson -> ",e)}};return p&&(null==p?void 0:null===(e=p.members)||void 0===e?void 0:e.length)!==0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.PB,{title:"Idleon Toolbox | Guild",description:"Keep track of your guild members, gp, bonuses and more"}),(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,r.jsx)("img",{src:"".concat(L.prefix,"data/G2icon").concat(null==Z?void 0:null===(n=Z.account)||void 0===n?void 0:null===(t=n.accountOptions)||void 0===t?void 0:t[38],".png"),alt:"guild-icon"}),(0,r.jsxs)(i.Z,{variant:"h3",children:[null==Z?void 0:null===(d=Z.account)||void 0===d?void 0:null===(a=d.accountOptions)||void 0===a?void 0:a[37]," ",(0,r.jsxs)(i.Z,{component:"span",variant:"h5",children:["(",null==p?void 0:null===(v=p.members)||void 0===v?void 0:v.length," / ",null==p?void 0:p.maxMembers,")"]})]})]}),(0,r.jsxs)(o.Z,{sx:{mb:1},direction:"row",gap:2,flexWrap:"wrap",children:[(0,r.jsx)(CardTitleAndValue,{title:"Members",value:"".concat(null==p?void 0:null===(x=p.members)||void 0===x?void 0:x.length," / ").concat(null==p?void 0:p.maxMembers)}),(0,r.jsxs)(CardTitleAndValue,{title:"Exp",children:[(0,r.jsx)(B.Z,{boxSx:{width:200},percent:(null==p?void 0:p.totalGp)/Math.round(null==p?void 0:p.levelReq)*100,bgColor:"#f3dd4c"}),(0,r.jsxs)(i.Z,{children:[(0,L.numberWithCommas)(null==p?void 0:p.totalGp)," / ",(0,L.numberWithCommas)(Math.round(null==p?void 0:p.levelReq))]})]}),(0,r.jsx)(CardTitleAndValue,{title:"Saves (up to 3)",children:(0,r.jsxs)(o.Z,{gap:1,children:[(0,r.jsx)(A.Z,{children:null==g?void 0:null===(h=g.reverse())||void 0===h?void 0:h.map((e,t)=>{let{timestamp:n}=e;return(0,r.jsxs)(i.Z,{children:["#",t+1," - ",(0,D.Z)(new Date(n),"dd/MM/yyyy HH:mm:ss")]},n+t)})}),(0,r.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,r.jsx)(s.Z,{variant:"contained",onClick:()=>{let e;let t=new Date().getTime(),n=(0,L.tryToParse)(localStorage.getItem("guild"));j(e=Array.isArray(n)?[...(n=(null==n?void 0:n.length)>=3?null==n?void 0:n.slice(1):n)||[],{timestamp:t,members:null==p?void 0:p.members}]:n?[n,{timestamp:t,members:null==p?void 0:p.members}]:[{timestamp:t,members:null==p?void 0:p.members}]),localStorage.setItem("guild",JSON.stringify(e)),f("")},children:"Save"}),(0,r.jsx)(s.Z,{variant:"contained",onClick:exportToJson,children:"Export"}),(0,r.jsx)(s.Z,{variant:"contained",color:"warning",onClick:()=>{localStorage.removeItem("guild"),j([])},children:"Clear all"})]}),b?(0,r.jsx)(i.Z,{color:"error.light",children:b}):null]})})]})]}),(0,r.jsxs)(m.Z,{tabs:["Members","Bonuses"],children:[(0,r.jsx)(Guild_GuildMembers,{members:null==p?void 0:p.members,saves:g}),(0,r.jsx)(Guild_GuildBonuses,{bonuses:null==p?void 0:p.guildBonuses})]})]}):(0,r.jsx)(i.Z,{variant:"h3",mb:3,children:"You have to be in a guild to view this page's content"})}}},function(e){e.O(0,[2307,9774,2888,179],function(){return e(e.s=34599)}),_N_E=e.O()}]);