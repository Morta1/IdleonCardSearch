!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e8aed5f2-c225-4672-807b-7f50a30f4044",e._sentryDebugIdIdentifier="sentry-dbid-e8aed5f2-c225-4672-807b-7f50a30f4044")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7196],{19920:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/misc/guild",function(){return n(68618)}])},64060:function(e,t,n){"use strict";var r=n(85893),l=n(14564),s=n(23972);n(67294),t.Z=e=>{let{anchorEl:t,handleClose:n}=e,a=!!t;return(0,r.jsx)(l.ZP,{sx:{ml:1},id:a?"simple-popover":void 0,open:a,anchorEl:t,onClose:n,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"},"data-sentry-element":"Popover","data-sentry-component":"Popper","data-sentry-source-file":"Popper.jsx",children:(0,r.jsx)(s.Z,{sx:{py:1,px:2},"data-sentry-element":"Typography","data-sentry-source-file":"Popper.jsx",children:"Copied to clipboard!"})})}},86649:function(e,t,n){"use strict";var r=n(85893),l=n(87357),s=n(81458),a=n(23972);n(67294),t.Z=e=>{let{percent:t,bgColor:n,label:i=!0,sx:o,boxSx:d={},pre:c}=e;return(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",...d},"data-sentry-element":"Box","data-sentry-component":"ProgressBar","data-sentry-source-file":"ProgressBar.jsx",children:[c,(0,r.jsx)(l.Z,{sx:{width:"100%",mr:i?1:0},"data-sentry-element":"Box","data-sentry-source-file":"ProgressBar.jsx",children:(0,r.jsx)(s.Z,{sx:{width:"100%",height:10,borderRadius:5,"& .MuiLinearProgress-bar":{backgroundColor:n||""},...o},variant:"determinate",value:t>100?100:t,"data-sentry-element":"LinearProgress","data-sentry-source-file":"ProgressBar.jsx"})}),i?(0,r.jsx)(l.Z,{children:(0,r.jsx)(a.Z,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(t),"%")})}):null]})}},63521:function(e,t,n){"use strict";var r=n(85893),l=n(67294),s=n(98396),a=n(11703),i=n(40044),o=n(65298),d=n(87357),c=n(11163);t.Z=e=>{var t;let{tabs:n,components:u,icons:m,children:x,onTabChange:y,forceScroll:h,orientation:p="horizontal",iconsOnly:g,queryKey:v="t",clearOnChange:j=[]}=e,f=(0,s.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),b=(0,c.useRouter)(),Z=b.query[v],T=n.findIndex(e=>e===Z),S=T>=0?T:0;(0,l.useEffect)(()=>{Z||b.replace({pathname:b.pathname,query:{...b.query,[v]:n[S]}},void 0,{shallow:!0})},[Z,v,n,S,b]);let w=Array.isArray(x)?x:[x];return(0,r.jsxs)(d.Z,{sx:"vertical"===p?{flexGrow:1,display:"flex"}:{},"data-sentry-element":"Box","data-sentry-component":"Tabber","data-sentry-source-file":"Tabber.jsx",children:[(0,r.jsx)(a.Z,{centered:!f||f&&n.length<4,scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:f&&n.length>=4||h?"scrollable":"standard",value:S,onChange:(e,t)=>{let r={...b.query,[v]:n[t]};j.forEach(e=>delete r[e]),b.push({pathname:b.pathname,query:r},void 0,{shallow:!0}),y&&y(t)},"data-sentry-element":"Tabs","data-sentry-source-file":"Tabber.jsx",children:null===(t=null!=u?u:n)||void 0===t?void 0:t.map((e,t)=>(0,r.jsx)(i.Z,{iconPosition:"start",icon:(null==m?void 0:m[t])?(0,r.jsx)("img",{src:"".concat(o.prefix).concat(null==m?void 0:m[t],".png")}):null,wrapped:!0,label:g?"":e,sx:{minWidth:62}},"".concat(e,"-").concat(t)))}),y?x:null==w?void 0:w.map((e,t)=>t===S?e:null)]})}},68618:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return guild}});var r=n(85893),l=n(2962),s=n(23972),a=n(51233),i=n(83321),o=n(66242),d=n(44267),c=n(67294),u=n(58437),m=n(63521),x=n(72882),y=n(90629),h=n(7906),p=n(53184),g=n(53816),v=n(53252),j=n(63366),f=n(87462),b=n(94780),Z=n(86010),T=n(47739),S=(0,n(88169).Z)((0,r.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),w=n(90948),C=n(71657),M=n(98216),G=n(1588),B=n(34867);function getTableSortLabelUtilityClass(e){return(0,B.Z)("MuiTableSortLabel",e)}let k=(0,G.Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),P=["active","children","className","direction","hideSortIcon","IconComponent"],useUtilityClasses=e=>{let{classes:t,direction:n,active:r}=e,l={root:["root",r&&"active"],icon:["icon",`iconDirection${(0,M.Z)(n)}`]};return(0,b.Z)(l,getTableSortLabelUtilityClass,t)},I=(0,w.ZP)(T.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.active&&t.active]}})(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${k.icon}`]:{opacity:.5}},[`&.${k.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${k.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}})),_=(0,w.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.icon,t[`iconDirection${(0,M.Z)(n.direction)}`]]}})(({theme:e,ownerState:t})=>(0,f.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},"desc"===t.direction&&{transform:"rotate(0deg)"},"asc"===t.direction&&{transform:"rotate(180deg)"})),E=c.forwardRef(function(e,t){let n=(0,C.Z)({props:e,name:"MuiTableSortLabel"}),{active:l=!1,children:s,className:a,direction:i="asc",hideSortIcon:o=!1,IconComponent:d=S}=n,c=(0,j.Z)(n,P),u=(0,f.Z)({},n,{active:l,direction:i,hideSortIcon:o,IconComponent:d}),m=useUtilityClasses(u);return(0,r.jsxs)(I,(0,f.Z)({className:(0,Z.Z)(m.root,a),component:"span",disableRipple:!0,ownerState:u,ref:t},c,{children:[s,o&&!l?null:(0,r.jsx)(_,{as:d,className:(0,Z.Z)(m.icon),ownerState:u})]}))});var A=n(295),D=n(65298),L=n(87357),N=n(40929),Guild_GuildMembers=e=>{let{members:t,saves:n}=e,[l,a]=(0,c.useState)(),[i,o]=(0,c.useState)("desc"),[d,u]=(0,c.useState)("gpEarned");(0,c.useEffect)(()=>{a(getSortedMembers(t,d,i))},[t]);let getSortedMembers=(e,t,n)=>e.sort((e,r)=>"asc"===n?(null==e?void 0:e[t])-(null==r?void 0:r[t]):(null==r?void 0:r[t])-(null==e?void 0:e[t])),handleSort=(e,n)=>{o(n),u(e);let r=getSortedMembers(t,e,n);a(r)};return(0,r.jsx)(x.Z,{component:y.Z,"data-sentry-element":"TableContainer","data-sentry-component":"GuildMembers","data-sentry-source-file":"GuildMembers.jsx",children:(0,r.jsxs)(h.Z,{"data-sentry-element":"Table","data-sentry-source-file":"GuildMembers.jsx",children:[(0,r.jsxs)(p.Z,{"data-sentry-element":"TableHead","data-sentry-source-file":"GuildMembers.jsx",children:[(0,r.jsxs)(g.Z,{"data-sentry-element":"TableRow","data-sentry-source-file":"GuildMembers.jsx",children:[(0,r.jsx)(v.Z,{"data-sentry-element":"TableCell","data-sentry-source-file":"GuildMembers.jsx",children:"Name"}),(0,r.jsx)(v.Z,{sortDirection:i,"data-sentry-element":"TableCell","data-sentry-source-file":"GuildMembers.jsx",children:(0,r.jsx)(E,{direction:i,active:"level"===d,onClick:()=>handleSort("level","asc"===i?"desc":"asc"),"data-sentry-element":"TableSortLabel","data-sentry-source-file":"GuildMembers.jsx",children:"Level"})}),(0,r.jsx)(v.Z,{sortDirection:i,align:(null==n?void 0:n.length)===0?"left":"center",colSpan:(null==n?void 0:n.length)||1,"data-sentry-element":"TableCell","data-sentry-source-file":"GuildMembers.jsx",children:(0,r.jsx)(E,{direction:i,active:"gpEarned"===d,onClick:()=>handleSort("gpEarned","asc"===i?"desc":"asc"),"data-sentry-element":"TableSortLabel","data-sentry-source-file":"GuildMembers.jsx",children:"Earned GP"})}),(0,r.jsx)(v.Z,{"data-sentry-element":"TableCell","data-sentry-source-file":"GuildMembers.jsx",children:"Wanted Bonus"})]}),(null==n?void 0:n.length)>0?(0,r.jsxs)(g.Z,{children:[(0,r.jsx)(v.Z,{colSpan:2}),null==n?void 0:n.map((e,t)=>{if(e)return(0,r.jsx)(v.Z,{children:(0,N.Z)(null==e?void 0:e.timestamp,"dd/MM/yyyy HH:mm:ss")},(null==e?void 0:e.timestamp)+t)}),(0,r.jsx)(v.Z,{})]}):null]}),(0,r.jsx)(A.Z,{"data-sentry-element":"TableBody","data-sentry-source-file":"GuildMembers.jsx",children:null==l?void 0:l.map((e,t)=>{let{name:l,level:a,gpEarned:i,wantedBonus:o,rank:d}=e,c=null==n?void 0:n.reduce((e,t)=>{var n;let r=null==t?void 0:null===(n=t.members)||void 0===n?void 0:n.find(e=>{let{name:t}=e;return t===l});return[...e,{gpChange:r?i-(null==r?void 0:r.gpEarned):i,timestamp:null==t?void 0:t.timestamp}]},[]);return l?(0,r.jsxs)(g.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,r.jsxs)(v.Z,{children:[d<5?(0,r.jsx)("img",{src:"".concat(D.prefix,"etc/GuildRank").concat(d,".png"),alt:"rank-".concat(d)}):(0,r.jsx)(L.Z,{component:"span",sx:{display:"inline-block",width:15,height:17}}),(0,r.jsxs)(s.Z,{component:"span",sx:{ml:1},children:[l," ",0===d?"(King)":1===d?"(Leader)":""]})]}),(0,r.jsx)(v.Z,{children:a}),(null==n?void 0:n.length)===0?(0,r.jsx)(v.Z,{children:i}):null,c.map((e,t)=>{let{gpChange:n}=e;return(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(s.Z,{component:"span",mr:1,children:i}),(0,r.jsxs)(s.Z,{variant:"caption",color:n>0?"success.light":"error.light",children:["(",n>0?"+":"",n,")"]})]},"change"+t)}),(0,r.jsx)(v.Z,{children:(0,D.cleanUnderscore)(null==o?void 0:o.name)||"Guild Gifts"})]},l+a+t):null})})]})})},Guild_GuildBonuses=e=>{let{bonuses:t}=e,getCostToMax=e=>{let{maxLevel:t,level:n,gpBaseCost:r,gpIncrease:l}=e,s=0;for(let e=n;e<t;e++)s+=r+e*l;return s};return(0,r.jsx)(a.Z,{direction:"row",flexWrap:"wrap",gap:2,"data-sentry-element":"Stack","data-sentry-component":"GuildBonuses","data-sentry-source-file":"GuildBonuses.jsx",children:null==t?void 0:t.map((e,t)=>{let{name:n,level:l,gpIncrease:i,maxLevel:c,bonus:u,func:m,x1:x,x2:y,gpBaseCost:h}=e,p=getCostToMax(e);return(0,r.jsx)(o.Z,{sx:{width:300},children:(0,r.jsx)(d.Z,{children:(0,r.jsxs)(a.Z,{gap:2,children:[(0,r.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,r.jsx)("img",{src:"".concat(D.prefix,"data/Gbonus").concat(t,".png"),alt:""}),(0,r.jsx)(s.Z,{children:(0,D.cleanUnderscore)(n)})]}),(0,r.jsxs)(a.Z,{gap:1,children:[(0,r.jsxs)(s.Z,{children:["level: ",l," / ",c]}),(0,r.jsxs)(s.Z,{children:["Cost: ",(0,D.notateNumber)(h+l*i)]}),(0,r.jsxs)(s.Z,{children:["Cost To Max: ",(0,D.notateNumber)(p)]}),(0,r.jsx)(s.Z,{sx:{fontSize:16},children:(0,D.cleanUnderscore)(u.replace("{",(0,D.growth)(m,l,x,y)))})]})]})})},n+t)})})},R=n(86649),V=n(64060);let CardTitleAndValue=e=>{let{cardSx:t,title:n,value:l,children:a}=e;return(0,r.jsx)(o.Z,{sx:{my:{xs:0,md:3},width:"fit-content",...t},"data-sentry-element":"Card","data-sentry-component":"CardTitleAndValue","data-sentry-source-file":"guild.jsx",children:(0,r.jsxs)(d.Z,{"data-sentry-element":"CardContent","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(s.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,"data-sentry-element":"Typography","data-sentry-source-file":"guild.jsx",children:n}),l?(0,r.jsx)(s.Z,{children:l}):a]})})};var guild=()=>{var e,t,n,o,d,x,y,h;let{state:p}=(0,c.useContext)(u.I),{guild:g}=null==p?void 0:p.account,[v,j]=(0,c.useState)([]),[f,b]=c.useState(null),[Z,T]=(0,c.useState)("");(0,c.useEffect)(()=>{let e=(0,D.tryToParse)(localStorage.getItem("guild"));e&&j(Array.isArray(e)?e:[e])},[]);let exportToJson=async e=>{b(e.currentTarget);try{var t;let e={date:(0,N.Z)(new Date,"dd/MM/yyyy HH:mm:ss"),members:null==g?void 0:null===(t=g.members)||void 0===t?void 0:t.map(e=>{let{name:t,gpEarned:n}=e;return{name:t,gpEarned:n}})};await navigator.clipboard.writeText(JSON.stringify(e,null,2))}catch(e){console.error("exportToJson -> ",e)}};return g&&(null==g?void 0:null===(e=g.members)||void 0===e?void 0:e.length)!==0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.PB,{title:"Guild | Idleon Toolbox",description:"Keep track of your guild members, gp, bonuses and more","data-sentry-element":"NextSeo","data-sentry-source-file":"guild.jsx"}),(0,r.jsxs)(a.Z,{"data-sentry-element":"Stack","data-sentry-source-file":"guild.jsx",children:[(0,r.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:1,"data-sentry-element":"Stack","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)("img",{src:"".concat(D.prefix,"data/G2icon").concat(null==p?void 0:null===(n=p.account)||void 0===n?void 0:null===(t=n.accountOptions)||void 0===t?void 0:t[38],".png"),alt:"guild-icon"}),(0,r.jsxs)(s.Z,{variant:"h3","data-sentry-element":"Typography","data-sentry-source-file":"guild.jsx",children:[null==p?void 0:null===(d=p.account)||void 0===d?void 0:null===(o=d.accountOptions)||void 0===o?void 0:o[37]," ",(0,r.jsxs)(s.Z,{component:"span",variant:"h5","data-sentry-element":"Typography","data-sentry-source-file":"guild.jsx",children:["(",null==g?void 0:null===(x=g.members)||void 0===x?void 0:x.length," / ",null==g?void 0:g.maxMembers,")"]})]})]}),(0,r.jsxs)(a.Z,{sx:{mb:1},direction:"row",gap:2,flexWrap:"wrap","data-sentry-element":"Stack","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(CardTitleAndValue,{title:"Members",value:"".concat(null==g?void 0:null===(y=g.members)||void 0===y?void 0:y.length," / ").concat(null==g?void 0:g.maxMembers),"data-sentry-element":"CardTitleAndValue","data-sentry-source-file":"guild.jsx"}),(0,r.jsxs)(CardTitleAndValue,{title:"Exp","data-sentry-element":"CardTitleAndValue","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(R.Z,{boxSx:{width:200},percent:(null==g?void 0:g.totalGp)/Math.round(null==g?void 0:g.levelReq)*100,bgColor:"#f3dd4c","data-sentry-element":"ProgressBar","data-sentry-source-file":"guild.jsx"}),(0,r.jsxs)(s.Z,{"data-sentry-element":"Typography","data-sentry-source-file":"guild.jsx",children:[(0,D.numberWithCommas)(null==g?void 0:g.totalGp)," / ",(0,D.numberWithCommas)(Math.round(null==g?void 0:g.levelReq))]})]}),(0,r.jsx)(CardTitleAndValue,{title:"Saves (up to 3)","data-sentry-element":"CardTitleAndValue","data-sentry-source-file":"guild.jsx",children:(0,r.jsxs)(a.Z,{gap:1,"data-sentry-element":"Stack","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(L.Z,{"data-sentry-element":"Box","data-sentry-source-file":"guild.jsx",children:null==v?void 0:null===(h=v.reverse())||void 0===h?void 0:h.map((e,t)=>{let{timestamp:n}=e;return(0,r.jsxs)(s.Z,{children:["#",t+1," - ",(0,N.Z)(new Date(n),"dd/MM/yyyy HH:mm:ss")]},n+t)})}),(0,r.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:2,"data-sentry-element":"Stack","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(i.Z,{variant:"contained",onClick:()=>{let e;let t=new Date().getTime(),n=(0,D.tryToParse)(localStorage.getItem("guild"));j(e=Array.isArray(n)?[...(n=(null==n?void 0:n.length)>=3?null==n?void 0:n.slice(1):n)||[],{timestamp:t,members:null==g?void 0:g.members}]:n?[n,{timestamp:t,members:null==g?void 0:g.members}]:[{timestamp:t,members:null==g?void 0:g.members}]),localStorage.setItem("guild",JSON.stringify(e)),T("")},"data-sentry-element":"Button","data-sentry-source-file":"guild.jsx",children:"Save"}),(0,r.jsx)(i.Z,{variant:"contained",onClick:exportToJson,"data-sentry-element":"Button","data-sentry-source-file":"guild.jsx",children:"Export"}),(0,r.jsx)(V.Z,{anchorEl:f,handleClose:()=>b(null),"data-sentry-element":"Popper","data-sentry-source-file":"guild.jsx"}),(0,r.jsx)(i.Z,{variant:"contained",color:"warning",onClick:()=>{localStorage.removeItem("guild"),j([])},"data-sentry-element":"Button","data-sentry-source-file":"guild.jsx",children:"Clear all"})]}),Z?(0,r.jsx)(s.Z,{color:"error.light",children:Z}):null]})})]})]}),(0,r.jsxs)(m.Z,{tabs:["Members","Bonuses"],"data-sentry-element":"Tabber","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(Guild_GuildMembers,{members:null==g?void 0:g.members,saves:v,"data-sentry-element":"GuildMembers","data-sentry-source-file":"guild.jsx"}),(0,r.jsx)(Guild_GuildBonuses,{bonuses:null==g?void 0:g.guildBonuses,"data-sentry-element":"GuildBonuses","data-sentry-source-file":"guild.jsx"})]})]}):(0,r.jsx)(s.Z,{variant:"h3",mb:3,children:"You have to be in a guild to view this page's content"})}}},function(e){e.O(0,[2307,9774,2888,179],function(){return e(e.s=19920)}),_N_E=e.O()}]);