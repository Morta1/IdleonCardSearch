(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3419],{51084:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-3/traps",function(){return n(51763)}])},57005:function(t,e,n){"use strict";var l=n(85893),r=n(67294),i=n(71924),a=n(33913),o=n(30925),c=n(23972);let d=(0,r.forwardRef)((t,e)=>{let{date:n,startDate:d,lastUpdated:s,stopAtZero:u,type:v,pause:x,staticTime:p,placeholder:m,loop:h,variant:j="inherit",...g}=t,[f,Z]=(0,r.useState)();(0,r.useEffect)(()=>{if(n){if(p){if(!isFinite(n))return;return Z({...(0,o.getDuration)(new Date().getTime(),n)})}let t=new Date,e=t.getTime()-(null!=s?s:0),l=(0,a.Z)(n);Z({...(0,o.getDuration)(null==t?void 0:t.getTime(),n+e*("countdown"===v?-1:1)),overtime:"countdown"===v&&l})}},[n,s]);let tickUp=()=>{let{days:t,hours:e,minutes:n,seconds:l}=f;60===(l+=1)&&(l=0,60===(n+=1)&&(n=0,24===(e+=1)&&(t+=1))),Z({...f,days:t,hours:e,minutes:n,seconds:l})},tickDown=()=>{let{days:t,hours:e,minutes:n,seconds:l}=f;if(0===t&&0===e&&0===n&&0===l){if(u)return;if(h)return Z({...(0,o.getDuration)(new Date().getTime(),d)})}-1==(l-=1)&&(l=59,-1==(n-=1)&&(n=59,-1==(e-=1)&&(e=0,t-=1))),Z({...f,days:t,hours:e,minutes:n,seconds:l})};(0,i.Z)(()=>{if(!f)return null;"countdown"!==v||(null==f?void 0:f.overtime)?tickUp():tickDown()},x||p?null:1e3);let wrapNumber=t=>{let e=String(t);return(null==e?void 0:e.length)===1?"0".concat(t):t};return f?((null==f?void 0:f.overtime)||x)&&m?(0,l.jsx)(c.Z,{...g,ref:e,children:m}):(0,l.jsxs)(c.Z,{...g,ref:e,variant:j,sx:{color:"".concat((null==f?void 0:f.overtime)&&!h?"#f91d1d":"")},component:"span",children:[(null==f?void 0:f.days)?wrapNumber(null==f?void 0:f.days)+"d:":"",wrapNumber(null==f?void 0:f.hours)+"h:",wrapNumber(null==f?void 0:f.minutes)+"m",(null==f?void 0:f.days)?"":":",(null==f?void 0:f.days)?"":wrapNumber(null==f?void 0:f.seconds)+"s"]}):null});e.Z=d},64885:function(t,e,n){"use strict";n.d(e,{Gr:function(){return MissingData},M5:function(){return h},Wd:function(){return PlayersList},Ye:function(){return CardTitleAndValue},iy:function(){return CardAndBorder},j8:function(){return j},tq:function(){return Breakdown},u3:function(){return TalentTooltip},uQ:function(){return TitleAndValue},wD:function(){return CenteredStack}});var l=n(82729),r=n(85893),i=n(67294),a=n(30925),o=n(51233),c=n(23972),d=n(49425),s=n(66242),u=n(44267),v=n(67720),x=n(61599),p=n(2511),m=n(54685);function _templateObject(){let t=(0,l._)(["\n  & .MuiBadge-badge {\n    background-color: #d5d5dc;\n    color: rgba(0, 0, 0, 0.87);\n  }\n"]);return _templateObject=function(){return t},t}function _templateObject1(){let t=(0,l._)(["\n  height: 20px;\n  object-fit: contain;\n"]);return _templateObject1=function(){return t},t}function _templateObject2(){let t=(0,l._)(["\n  width: 56px;\n  height: 72px;\n  object-fit: contain;\n  opacity: ",";\n"]);return _templateObject2=function(){return t},t}function _templateObject3(){let t=(0,l._)(["\n  position: absolute;\n  left: 50%;\n  top: -3px;\n  pointer-events: none;\n  transform: translateX(-50%);\n"]);return _templateObject3=function(){return t},t}let h=(0,i.forwardRef)((t,e)=>{let{stat:n,icon:l,img:i,title:d="",...s}=t;return(0,r.jsx)(p.Z,{title:d,children:(0,r.jsxs)(o.Z,{alignItems:"center",...s,ref:e,style:{position:"relative",width:"fit-content"},children:[(0,r.jsx)("img",{...i,src:"".concat(a.prefix,"data/").concat(l,".png"),alt:""}),(0,r.jsx)(c.Z,{variant:"body1",component:"span",children:n})]})})});h.displayName="IconWithText";let TitleAndValue=t=>{let{title:e,value:n,boldTitle:l,titleStyle:i={},valueStyle:a={}}=t;return(0,r.jsxs)(o.Z,{direction:"row",flexWrap:"wrap",alignItems:"center",children:[e?(0,r.jsxs)(c.Z,{sx:i,fontWeight:l?"bold":500,component:"span",children:[e,":\xa0"]}):null,(0,r.jsx)(c.Z,{fontSize:15,component:"span",sx:a,children:n})]})},j=(0,x.Z)(d.Z)(_templateObject()),CardAndBorder=t=>{let{cardName:e,stars:n,cardIndex:l,name:i,variant:o,rawName:c,amount:d,nextLevelReq:s}=t,u="cardSet"===o?"".concat(a.prefix,"data/").concat(c,".png"):"".concat(a.prefix,"data/2Cards").concat(l,".png");return(0,r.jsxs)(r.Fragment,{children:[n>0?(0,r.jsx)(Z,{src:"".concat(a.prefix,"data/CardEquipBorder").concat(n,".png"),alt:""}):null,(0,r.jsx)(p.Z,{title:(0,r.jsx)(CardTooltip,{...t,cardName:"cardSet"===o?i:e,nextLevelReq:s,amount:d}),children:(0,r.jsx)(f,{isCardSet:"cardSet"===o,amount:d,src:u,alt:""})})]})},CardTooltip=t=>{let{displayName:e,effect:n,bonus:l,stars:i,showInfo:d,nextLevelReq:s,amount:u}=t,v=l;return d&&(v=(0,m.BZ)({bonus:l,stars:i})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{fontWeight:"bold",variant:"h6",children:(0,a.cleanUnderscore)(e)}),(0,r.jsx)(c.Z,{children:(0,a.cleanUnderscore)(n.replace("{",v))}),d?(0,r.jsx)(o.Z,{mt:1,direction:"row",gap:1,flexWrap:"wrap",children:[1,2,3,4,5,6].map((t,n)=>(0,r.jsxs)(o.Z,{alignItems:"center",justifyContent:"space-between",children:[0===n?(0,r.jsx)(c.Z,{children:"Base"}):(0,r.jsx)(g,{src:"".concat(a.prefix,"etc/Star").concat(n,".png"),alt:""}),(0,r.jsx)(c.Z,{children:l*(n+1)})]},"".concat(e,"-").concat(n)))}):null,u>=s?(0,r.jsxs)(o.Z,{children:["You've collected ",(0,a.numberWithCommas)(u)," cards"]}):s>0?(0,r.jsxs)(o.Z,{children:["Progress: ",(0,a.numberWithCommas)(u)," / ",(0,a.numberWithCommas)(s)]}):null]})},g=x.Z.img(_templateObject1()),f=x.Z.img(_templateObject2(),t=>{let{amount:e,isCardSet:n}=t;return e||n?1:.5}),Z=x.Z.img(_templateObject3()),TalentTooltip=t=>{let{level:e,funcX:n,x1:l,x2:i,funcY:d,y1:s,y2:u,description:v,name:x,talentId:p}=t,m=e>0?(0,a.growth)(n,e,l,i):0,h=e>0?(0,a.growth)(d,e,s,u):0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,r.jsx)("img",{src:"".concat(a.prefix,"data/UISkillIcon").concat(p,".png"),alt:""}),(0,r.jsx)(c.Z,{fontWeight:"bold",variant:"h6",children:(0,a.cleanUnderscore)(x)})]}),(0,r.jsx)(c.Z,{children:(0,a.cleanUnderscore)(v).replace("{",m).replace("}",h)})]})},PlayersList=t=>{let{players:e,characters:n}=t;return(0,r.jsx)(o.Z,{gap:1,direction:"row",children:e.map(t=>{var e,l;let{index:i}=t;return(0,r.jsx)(p.Z,{title:null==n?void 0:null===(e=n[i])||void 0===e?void 0:e.name,children:(0,r.jsx)("img",{style:{width:24,height:24},src:"".concat(a.prefix,"data/ClassIcons").concat(null==n?void 0:null===(l=n[i])||void 0===l?void 0:l.classIndex,".png"),alt:""})},name+"-head-"+i)})})},MissingData=t=>{let{name:e}=t;return(0,r.jsxs)(c.Z,{variant:"h3",children:["Your account is missing data for ",e]})},CardTitleAndValue=t=>{let{variant:e,raised:n,cardSx:l,imgOnly:i,imgStyle:d,title:v,value:x,children:m,icon:h,tooltipTitle:j,stackProps:g}=t;return(0,r.jsx)(p.Z,{title:j||"",children:(0,r.jsx)(s.Z,{variant:e,raised:n,sx:{my:{xs:0,md:3},width:"fit-content",...l},children:(0,r.jsx)(u.Z,{children:(0,r.jsxs)(o.Z,{sx:{display:g?"flex":"block",...g||{}},children:[(0,r.jsx)(c.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:v}),x||i?h?(0,r.jsxs)(o.Z,{direction:"row",gap:2,alignItems:"center",children:[(0,r.jsx)("img",{style:{objectFit:"contain",...d},src:"".concat(a.prefix).concat(h),alt:""}),x?(0,r.jsx)(c.Z,{children:x}):null]}):(0,r.jsx)(c.Z,{children:x}):m]})})})})},Breakdown=t=>{let{breakdown:e,titleStyle:n={},notation:l="Big"}=t;return(0,r.jsx)(r.Fragment,{children:null==e?void 0:e.map((t,e)=>{let{name:i,value:o,title:d}=t;return d?(0,r.jsx)(c.Z,{sx:{fontWeight:500},children:d},"".concat(i,"-").concat(e)):i?(0,r.jsx)(TitleAndValue,{titleStyle:{width:120,...n},title:i,value:isNaN(o)?o:(0,a.notateNumber)(o,l)},"".concat(i,"-").concat(e)):(0,r.jsx)(v.Z,{sx:{my:1,bgcolor:"black"}},"".concat(i,"-").concat(e))})})},CenteredStack=t=>{let{direction:e="row",children:n}=t;return(0,r.jsx)(o.Z,{gap:1,direction:e,alignItems:"center",children:n})}},51763:function(t,e,n){"use strict";n.r(e);var l=n(82729),r=n(85893),i=n(94054),a=n(47312),o=n(153),c=n(23972),d=n(51233),s=n(66242),u=n(44267),v=n(67294),x=n(21480),p=n(30925),m=n(61599),h=n(57005),j=n(2511),g=n(64885),f=n(2962),Z=n(70508),w=n(18972);function _templateObject(){let t=(0,l._)(["\n  z-index: 2;\n  width: 42px;\n  height: 42px;\n"]);return _templateObject=function(){return t},t}function _templateObject1(){let t=(0,l._)(["\n  z-index: 1;\n  width: 42px;\n  height: 42px;\n"]);return _templateObject1=function(){return t},t}let Totals=t=>{let{array:e,index:n,outlined:l=!1,hideExp:i}=t;return(0,r.jsx)(d.Z,{direction:"row",mt:2,mb:"total"===n?2:1,gap:2,children:(0,r.jsx)(g.Ye,{variant:l?"outlined":"elevation",title:"Totals",children:(0,r.jsx)(d.Z,{direction:"row",gap:3,flexWrap:"wrap",children:Object.entries(e).map((t,e)=>{let[l,{critters:a,exp:o}]=t;return(0,r.jsxs)(d.Z,{alignItems:"center",gap:1,direction:"row",children:[(0,r.jsx)(b,{src:"".concat(p.prefix,"data/").concat(l,".png"),alt:""}),(0,r.jsxs)(d.Z,{children:[(0,r.jsxs)(c.Z,{variant:"body2",children:["Critters: ",(0,p.notateNumber)(a)]}),i?null:(0,r.jsxs)(c.Z,{variant:"body2",children:["Exp: ",(0,p.notateNumber)(o)]})]})]},"total-".concat(n,"-").concat(e,"-").concat(l))})})})})},TrapTooltip=t=>{let{quantity:e,exp:n,trapType:l,crittersQuantity:i,trapExp:a}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.uQ,{title:"Quantity",value:"x".concat(e)}),(0,r.jsx)(g.uQ,{title:0===l?"Exp":"Shiny",value:"x".concat(n)}),(0,r.jsx)(g.uQ,{title:"Trap exp",value:(0,p.notateNumber)(a)}),(0,r.jsx)(g.uQ,{title:"Critters",value:(0,p.notateNumber)(i)})]})},b=m.Z.img(_templateObject()),T=m.Z.img(_templateObject1());e.default=()=>{var t,e;let{state:n}=(0,v.useContext)(x.I),{traps:l}=(null==n?void 0:n.account)||{},[m,g]=(0,v.useState)("max"),_=(0,v.useMemo)(()=>(0,Z.oH)(null==n?void 0:n.account,null==n?void 0:n.characters),[n]),y=(0,v.useMemo)(()=>(0,Z.q6)(null==n?void 0:n.account,null==_?void 0:_[m]),[n,m]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.PB,{title:"Traps | Idleon Toolbox",description:"Keep track of your traps timing, critters amounts and more"}),(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(a.Z,{id:"demo-simple-select-label",children:"Collect as"}),(0,r.jsxs)(o.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:m,label:"Collect as",onChange:t=>g(t.target.value),children:[(0,r.jsx)(w.Z,{value:"max",children:"Hunter"}),(0,r.jsx)(w.Z,{value:"min",children:"Non Hunter"})]})]}),(0,r.jsxs)(c.Z,{component:"p",variant:"caption",children:["Collect Rates: ",Math.round((null==_?void 0:null===(t=_[m])||void 0===t?void 0:t.critter)*100),"% and ",Math.round((null==_?void 0:null===(e=_[m])||void 0===e?void 0:e.exp)*100),"% EXP"]}),y?(0,r.jsx)(Totals,{hideExp:!0,array:y,index:"total"}):null,(0,r.jsx)(d.Z,{gap:3,children:null==l?void 0:l.map((t,e)=>{var l,i,a,o,x,g,f,Z,w,y,E,C,N,I,O,k,B,M,A,S,W,D,L,F,H;let P=null==n?void 0:null===(i=n.characters)||void 0===i?void 0:null===(l=i[e])||void 0===l?void 0:l.classIndex,Q=null==n?void 0:null===(o=n.characters)||void 0===o?void 0:null===(a=o[e])||void 0===a?void 0:a.name,U=null==n?void 0:null===(f=n.characters)||void 0===f?void 0:null===(g=f[e].skillsInfo)||void 0===g?void 0:null===(x=g.trapping)||void 0===x?void 0:x.level,Y=null==n?void 0:null===(y=n.characters)||void 0===y?void 0:null===(w=y[e])||void 0===w?void 0:null===(Z=w.tools)||void 0===Z?void 0:Z.find(t=>{let{Type:e}=t;return"TRAP_BOX_SET"===e}),X=null==n?void 0:null===(O=n.account)||void 0===O?void 0:null===(I=O.alchemy)||void 0===I?void 0:null===(N=I.bubbles)||void 0===N?void 0:null===(C=N.quicc)||void 0===C?void 0:null===(E=C.find(t=>{let{bubbleName:e}=t;return"CALL_ME_ASH"===e}))||void 0===E?void 0:E.level,G=(null==n?void 0:null===(A=n.characters)||void 0===A?void 0:null===(M=A[e])||void 0===M?void 0:null===(B=M.tools)||void 0===B?void 0:null===(k=B[4])||void 0===k?void 0:k.rawName)!=="Blank"?null==n?void 0:null===(D=n.characters)||void 0===D?void 0:null===(W=D[e])||void 0===W?void 0:null===(S=W.tools)||void 0===S?void 0:S[4]:null,q=G?parseInt(null!==(H=null==G?void 0:null===(F=G.rawName)||void 0===F?void 0:F.charAt((null==G?void 0:null===(L=G.rawName)||void 0===L?void 0:L.length)-1))&&void 0!==H?H:0)+(X>0?1:0):t.length;q=Math.min(q,8);let V=t.length>=q?t:(0,p.fillArrayToLength)(q,t),z=t.reduce((t,e)=>{var n,l,r,i,a,o;let{crittersQuantity:c,trapExp:d,rawName:s}=e;return{...t,[s]:{critters:(null!==(a=null==t?void 0:null===(n=t[s])||void 0===n?void 0:n.critters)&&void 0!==a?a:0)+c*(null==_?void 0:null===(l=_[m])||void 0===l?void 0:l.critter),exp:(null!==(o=null==t?void 0:null===(r=t[s])||void 0===r?void 0:r.exp)&&void 0!==o?o:0)+d*(null==_?void 0:null===(i=_[m])||void 0===i?void 0:i.exp)}}},{});return(0,r.jsx)(v.Fragment,{children:(0,r.jsx)(s.Z,{sx:{width:{lg:920,xl:"fit-content"}},children:(0,r.jsx)(u.Z,{children:(0,r.jsxs)(d.Z,{direction:"row",alignItems:"center",gap:2,flexWrap:"wrap",children:[(0,r.jsx)(s.Z,{variant:"outlined",children:(0,r.jsx)(u.Z,{children:(0,r.jsxs)(d.Z,{sx:{width:175,textAlign:"center",flexDirection:{xs:"column",md:"row"}},alignItems:"center",gap:2,children:[(0,r.jsxs)(d.Z,{alignItems:"center",justifyContent:"center",children:[(0,r.jsx)("img",{className:"class-icon",src:"".concat(p.prefix,"data/ClassIcons").concat(P,".png"),alt:""}),(0,r.jsx)("img",{style:{height:38},src:"".concat(p.prefix,"data/").concat(null==Y?void 0:Y.rawName,".png"),alt:""})]}),(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(c.Z,{className:"character-name",children:Q}),(0,r.jsxs)(c.Z,{variant:"caption",children:["Trapping lv. ",U]})]})]})})}),(0,r.jsx)(d.Z,{direction:"row",alignItems:"center",flexWrap:"wrap",gap:3,children:null==V?void 0:V.map((t,e)=>{var l,i;return(0,r.jsx)(s.Z,{sx:{borderColor:(null==t?void 0:t.active)?"success.light":"none"},variant:"outlined",children:(0,r.jsx)(u.Z,{children:(0,r.jsx)(d.Z,{sx:{width:{xs:65,sm:80},height:50},position:"relative",justifyContent:"flex-start",alignItems:"center",children:(null==t?void 0:t.name)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.Z,{direction:"row",children:[(0,r.jsx)(j.Z,{title:(0,r.jsx)(TrapTooltip,{...null==t?void 0:t.trapData,trapExp:(null==t?void 0:t.trapExp)*(null==_?void 0:null===(l=_[m])||void 0===l?void 0:l.exp),crittersQuantity:(null==t?void 0:t.crittersQuantity)*(null==_?void 0:null===(i=_[m])||void 0===i?void 0:i.critter)}),children:(0,r.jsx)(T,{src:"".concat(p.prefix,"data/TrapBoxSet").concat((null==t?void 0:t.trapType)+1,".png"),alt:""})}),(0,r.jsx)(b,{src:"".concat(p.prefix,"data/").concat(null==t?void 0:t.rawName,".png"),alt:""})]}),(0,r.jsx)(h.Z,{type:"countdown",date:null==t?void 0:t.timeLeft,lastUpdated:null==n?void 0:n.lastUpdated})]}):(0,r.jsx)(c.Z,{color:(null==t?void 0:t.name)?"":"error.light",children:"Empty"})})})},"".concat((null==t?void 0:t.rawName)||"trap","-").concat(e))})}),(null==V?void 0:V.length)>0?(0,r.jsx)(Totals,{outlined:!0,title:"Total critters",array:z,index:e}):(0,r.jsx)(s.Z,{variant:"outlined",children:(0,r.jsxs)(u.Z,{children:[Q," has no traps"]})})]})})})},"printer-row-".concat(e))})})]})}},70508:function(t,e,n){"use strict";n.d(e,{aQ:function(){return getTraps},oH:function(){return getTrapsBonuses},q6:function(){return calcTotalCritters}});var l=n(70473),r=n(88054),i=n(30796);let getTraps=t=>parseTraps(t),parseTraps=t=>t.map(t=>{let e=(null==t?void 0:t.PldTraps)||[];return e.reduce((t,e)=>{var n;let[r,,i,a,o,c,d,s]=e;if(-1===r||"-1"===r)return t;let u=l.traps[c].find(t=>t.trapTime===d),v=d-i;return a?[...t,{name:null===(n=l.items[a])||void 0===n?void 0:n.displayName,rawName:a,crittersQuantity:o,trapType:c,trapExp:s,timeLeft:new Date().getTime()+1e3*v,trapData:u}]:t},[])}),calcTotalCritters=(t,e)=>{var n;let{critter:l,exp:r}=e;return null==t?void 0:null===(n=t.traps)||void 0===n?void 0:n.reduce((t,e)=>(e.reduce((e,n)=>{var i,a,o,c;let{crittersQuantity:d,trapExp:s,rawName:u}=n;t={...t,[u]:{critters:(null!==(o=null==t?void 0:null===(i=t[u])||void 0===i?void 0:i.critters)&&void 0!==o?o:0)+d*l,exp:(null!==(c=null==t?void 0:null===(a=t[u])||void 0===a?void 0:a.exp)&&void 0!==c?c:0)+s*r}}},{}),t),{})},getTrapsBonuses=(t,e)=>{let n=null==e?void 0:e.map((n,l)=>calcCrittersBonus({currentCharacterIndex:l,account:t,characters:e,isExp:!1})),l=null==e?void 0:e.map((n,l)=>calcCrittersBonus({currentCharacterIndex:l,account:t,characters:e,isExp:!0}));return{max:{critter:Math.max(...n||[1]),exp:Math.max(...l||[1])},min:{critter:Math.min(...n||[1]),exp:Math.min(...l||[1])}}},calcCrittersBonus=t=>{var e,n,l;let{currentCharacterIndex:a,account:o,characters:c,isExp:d}=t,s=d?0:(0,r.iu)(null==o?void 0:null===(e=o.alchemy)||void 0===e?void 0:e.vials,"TrapOvision");if((0,i.gW)(null==c?void 0:null===(n=c[a])||void 0===n?void 0:n.class,"Hunter")){let t=(0,i.L1)(c,2,"Hunter","EAGLE_EYE",d);s+=d?Math.max(40,Math.min((0,i._X)(null==t?void 0:t.talents,2,"EAGLE_EYE",d),99)):Math.max(50,(0,i._X)(null==t?void 0:t.talents,2,"EAGLE_EYE"))}else{let t=0;for(let e=0;e<(null==c?void 0:c.length);e++)if((0,i.gW)(null==c?void 0:null===(l=c[e])||void 0===l?void 0:l.class,"Hunter")){let e=(0,i.L1)(c,2,"Hunter","EAGLE_EYE",d,!0);t=Math.max(t,(0,i._X)(null==e?void 0:e.talents,2,"EAGLE_EYE",d,!0))}else t=Math.max(t,d?40:50);s+=t}return isNaN(s)?1:s/100}}},function(t){t.O(0,[9589,9774,2888,179],function(){return t(t.s=51084)}),_N_E=t.O()}]);