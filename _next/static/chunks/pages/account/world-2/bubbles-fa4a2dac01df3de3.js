(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{69822:function(n,l,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-2/bubbles",function(){return e(57190)}])},33458:function(n,l,e){"use strict";var t=e(85893),i=e(67294),o=e(98396),r=e(11703),d=e(40044);l.Z=n=>{let{tabs:l,children:e,onTabChange:a}=n,[c,u]=(0,i.useState)(0),s=(0,o.Z)(n=>n.breakpoints.down("md"),{noSsr:!0}),v=Array.isArray(e)?e:[e];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{centered:!s||s&&l.length<4,scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:s&&l.length>4?"scrollable":"standard",value:c,onChange:(n,l)=>{u(l),a&&a(l)},children:null==l?void 0:l.map((n,l)=>(0,t.jsx)(d.Z,{label:n},"".concat(n,"-").concat(l)))}),a?e:null==v?void 0:v.map((n,l)=>l===c?n:null)]})}},82557:function(n,l,e){"use strict";e.d(l,{Gr:function(){return M},M5:function(){return p},Wd:function(){return _},Ye:function(){return k},iy:function(){return w},j8:function(){return Z},u3:function(){return S},uQ:function(){return f},wD:function(){return N}});var t=e(82729),i=e(85893),o=e(67294),r=e(66092),d=e(51233),a=e(15861),c=e(49425),u=e(66242),s=e(44267),v=e(61599),h=e(44358),x=e(98118);function m(){let n=(0,t._)(["\n  & .MuiBadge-badge {\n    background-color: #d5d5dc;\n    color: rgba(0, 0, 0, 0.87);\n  }\n"]);return m=function(){return n},n}function g(){let n=(0,t._)(["\n  height: 20px;\n  object-fit: contain;\n"]);return g=function(){return n},n}function b(){let n=(0,t._)(["\n  width: 56px;\n  height: 72px;\n  object-fit: contain;\n  opacity: ",";\n"]);return b=function(){return n},n}function j(){let n=(0,t._)(["\n  position: absolute;\n  left: 50%;\n  top: -3px;\n  pointer-events: none;\n  transform: translateX(-50%);\n"]);return j=function(){return n},n}let p=(0,o.forwardRef)((n,l)=>{let{stat:e,icon:t,img:o,title:c="",...u}=n;return(0,i.jsx)(h.Z,{title:c,children:(0,i.jsxs)(d.Z,{alignItems:"center",...u,ref:l,style:{position:"relative",width:"fit-content"},children:[(0,i.jsx)("img",{...o,src:"".concat(r.prefix,"data/").concat(t,".png"),alt:""}),(0,i.jsx)(a.Z,{variant:"body1",component:"span",children:e})]})})});p.displayName="IconWithText";let f=n=>{let{title:l,value:e,boldTitle:t,titleStyle:o={},valueStyle:r={}}=n;return(0,i.jsxs)(d.Z,{direction:"row",flexWrap:"wrap",alignItems:"center",children:[l?(0,i.jsxs)(a.Z,{style:o,fontWeight:t?"bold":500,component:"span",children:[l,":\xa0"]}):null,(0,i.jsx)(a.Z,{fontSize:15,component:"span",sx:r,children:e})]})},Z=(0,v.Z)(c.Z)(m()),w=n=>{let{cardName:l,stars:e,cardIndex:t,name:o,variant:d,rawName:a,amount:c,nextLevelReq:u}=n,s="cardSet"===d?"".concat(r.prefix,"data/").concat(a,".png"):"".concat(r.prefix,"data/2Cards").concat(t,".png");return(0,i.jsxs)(i.Fragment,{children:[e>0?(0,i.jsx)(I,{src:"".concat(r.prefix,"data/CardEquipBorder").concat(e,".png"),alt:""}):null,(0,i.jsx)(h.Z,{title:(0,i.jsx)(y,{...n,cardName:"cardSet"===d?o:l,nextLevelReq:u,amount:c}),children:(0,i.jsx)(B,{isCardSet:"cardSet"===d,amount:c,src:s,alt:""})})]})},y=n=>{let{displayName:l,effect:e,bonus:t,stars:o,showInfo:c,nextLevelReq:u,amount:s}=n,v=t;return c&&(v=(0,x.BZ)({bonus:t,stars:o})),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Z,{fontWeight:"bold",variant:"h6",children:(0,r.cleanUnderscore)(l)}),(0,i.jsx)(a.Z,{children:(0,r.cleanUnderscore)(e.replace("{",v))}),c?(0,i.jsx)(d.Z,{mt:1,direction:"row",gap:1,flexWrap:"wrap",children:[1,2,3,4,5,6].map((n,e)=>(0,i.jsxs)(d.Z,{alignItems:"center",justifyContent:"space-between",children:[0===e?(0,i.jsx)(a.Z,{children:"Base"}):(0,i.jsx)(C,{src:"".concat(r.prefix,"etc/Star").concat(e,".png"),alt:""}),(0,i.jsx)(a.Z,{children:t*(e+1)})]},"".concat(l,"-").concat(e)))}):null,s>=u?(0,i.jsxs)(d.Z,{children:["You've collected ",(0,r.numberWithCommas)(s)," cards"]}):u>0?(0,i.jsxs)(d.Z,{children:["Progress: ",(0,r.numberWithCommas)(s)," / ",(0,r.numberWithCommas)(u)]}):null]})},C=v.Z.img(g()),B=v.Z.img(b(),n=>{let{amount:l,isCardSet:e}=n;return l||e?1:.5}),I=v.Z.img(j()),S=n=>{let{level:l,funcX:e,x1:t,x2:o,funcY:c,y1:u,y2:s,description:v,name:h,talentId:x}=n,m=l>0?(0,r.growth)(e,l,t,o):0,g=l>0?(0,r.growth)(c,l,u,s):0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,i.jsx)("img",{src:"".concat(r.prefix,"data/UISkillIcon").concat(x,".png"),alt:""}),(0,i.jsx)(a.Z,{fontWeight:"bold",variant:"h6",children:(0,r.cleanUnderscore)(h)})]}),(0,i.jsx)(a.Z,{children:(0,r.cleanUnderscore)(v).replace("{",m).replace("}",g)})]})},_=n=>{let{players:l,characters:e}=n;return(0,i.jsx)(d.Z,{gap:1,direction:"row",children:l.map(n=>{var l,t;let{index:o}=n;return(0,i.jsx)(h.Z,{title:null==e?void 0:null===(l=e[o])||void 0===l?void 0:l.name,children:(0,i.jsx)("img",{style:{width:24,height:24},src:"".concat(r.prefix,"data/ClassIcons").concat(null==e?void 0:null===(t=e[o])||void 0===t?void 0:t.classIndex,".png"),alt:""})},name+"-head-"+o)})})},M=n=>{let{name:l}=n;return(0,i.jsxs)(a.Z,{variant:"h3",children:["Your account is missing data for ",l]})},k=n=>{let{variant:l,raised:e,cardSx:t,imgStyle:o,title:c,value:v,children:x,icon:m,tooltipTitle:g}=n;return(0,i.jsx)(h.Z,{title:g||"",children:(0,i.jsx)(u.Z,{variant:l,raised:e,sx:{my:{xs:0,md:3},width:"fit-content",...t},children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(a.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:c}),v?m?(0,i.jsxs)(d.Z,{direction:"row",gap:2,alignItems:"center",children:[(0,i.jsx)("img",{style:{objectFit:"contain",...o},src:"".concat(r.prefix).concat(m),alt:""}),(0,i.jsx)(a.Z,{children:v})]}):(0,i.jsx)(a.Z,{children:v}):x]})})})},N=n=>{let{direction:l="row",children:e}=n;return(0,i.jsx)(d.Z,{gap:1,direction:l,alignItems:"center",children:e})}},57190:function(n,l,e){"use strict";e.r(l);var t=e(82729),i=e(85893),o=e(15861),r=e(67720),d=e(51233),a=e(50480),c=e(69368),u=e(50135),s=e(87109),v=e(66242),h=e(44267),x=e(21023),m=e(67294),g=e(80782),b=e(61599),j=e(66092),p=e(44358),f=e(91296),Z=e.n(f),w=e(72810),y=e(2962),C=e(6426),B=e(87357),I=e(33458),S=e(82557),_=e(74721);function M(){let n=(0,t._)(["\n  width: 32px;\n  height: 32px;\n  object-fit: contain;\n"]);return M=function(){return n},n}function k(){let n=(0,t._)(["\n  width: 32px;\n  height: 32px;\n"]);return k=function(){return n},n}function N(){let n=(0,t._)(["\n  opacity: ",";\n"]);return N=function(){return n},n}let q=n=>{let{tooltip:l,bubbleMaxBonus:e,goalBonus:t,effectHardCapPercent:r,itemReq:a,accumulatedCost:c,index:u,level:s,cauldron:v,account:h,bubble:m,goalLevel:g}=n;return(0,i.jsxs)(d.Z,{mt:1.5,direction:"row",justifyContent:"center",gap:3,flexWrap:"wrap",children:[l?(0,i.jsx)(O,{...m,goalLevel:g}):null,(0,i.jsxs)(d.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(p.Z,{title:"Bubble's effect",children:(0,i.jsx)(L,{src:"".concat(j.prefix,"data/SignStar3b.png"),alt:""})}),(0,i.jsx)(p.Z,{title:e?"".concat(t," is ").concat((0,j.notateNumber)(r),"% of possible hard cap effect of ").concat(e):"",children:(0,i.jsxs)(o.Z,{children:[t," ",e?"(".concat((0,j.notateNumber)(r),"%)"):""]})})]}),null==a?void 0:a.map((n,l)=>{var e,t,r,a,m,g,b,f,Z,w;let y,{rawName:B,name:I,baseCost:S}=n;if("Blank"===B||"ERROR"===B)return null;let{singleLevelCost:_,total:M}=c(u,s,S,null==I?void 0:I.includes("Liquid"),v),k=["sail","bits"].find(n=>B.toLowerCase().includes(n))?"".concat(B,"_x1"):B,N=_>1e8&&!(null==I?void 0:I.includes("Liquid"))&&!(null==I?void 0:I.includes("Bits"))&&(0,C.a2)(u,_);if(B.includes("Liquid")){let n={Liquid1:0,Liquid2:1,Liquid3:2,Liquid4:3};y=null==h?void 0:null===(a=h.alchemy)||void 0===a?void 0:null===(r=a.liquids)||void 0===r?void 0:r[null==n?void 0:n[B]]}else y=B.includes("Bits")?null==h?void 0:null===(m=h.gaming)||void 0===m?void 0:m.bits:B.includes("Sail")?null==h?void 0:null===(f=h.sailing)||void 0===f?void 0:null===(b=f.lootPile)||void 0===b?void 0:null===(g=b.find(n=>{let{rawName:l}=n;return l===B.replace("SailTr","SailT")}))||void 0===g?void 0:g.amount:null==h?void 0:null===(w=h.storage)||void 0===w?void 0:null===(Z=w.find(n=>{let{rawName:l}=n;return l===B}))||void 0===Z?void 0:Z.amount;return(0,i.jsxs)(d.Z,{direction:"row",gap:3,children:[N?(0,i.jsxs)(d.Z,{gap:2,alignItems:"center",children:[(0,i.jsx)(x.Z,{title:(0,i.jsxs)(o.Z,{color:(null==h?void 0:null===(e=h.atoms)||void 0===e?void 0:e.particles)>N?"success.light":"",children:[Math.floor(null==h?void 0:null===(t=h.atoms)||void 0===t?void 0:t.particles)," / ",N]}),children:(0,i.jsx)(P,{src:"".concat(j.prefix,"etc/Particle.png"),alt:""})}),(0,i.jsx)(p.Z,{title:N,children:(0,i.jsx)(o.Z,{children:(0,j.notateNumber)(N,"Big")})})]}):null,(0,i.jsxs)(d.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(p.Z,{title:(0,j.cleanUnderscore)(I),children:(0,i.jsx)(P,{src:"".concat(j.prefix,"data/").concat(k,".png"),alt:""})}),(0,i.jsx)(x.Z,{title:(0,i.jsxs)(o.Z,{color:y>=M?"success.light":"",children:[(0,j.notateNumber)(y,"Big")," / ",(0,j.notateNumber)(M,"Big")]}),children:(0,i.jsx)(o.Z,{children:(0,j.notateNumber)(M,"Big")})})]})]},"".concat(B,"-").concat(I,"-").concat(l))})]})},W=n=>{let{title:l,bubbles:e,lithium:t,accumulatedCost:r,account:a}=n;return(0,i.jsxs)(d.Z,{justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(o.Z,{children:l}),t?(0,i.jsx)(o.Z,{variant:"caption",children:"* 15% chance to be upgraded by lithium (atom collider)"}):null,(0,i.jsx)(d.Z,{direction:"row",flexWrap:"wrap",gap:1,children:null==e?void 0:e.map((n,l)=>{var e,c,u,s,v,h,m,g,b;let{rawName:f,bubbleName:Z,level:w,itemReq:y,index:B,cauldron:I}=n,{singleLevelCost:S,total:_}=r(B,w,null==y?void 0:null===(e=y[0])||void 0===e?void 0:e.baseCost,null==y?void 0:null===(u=y[0])||void 0===u?void 0:null===(c=u.name)||void 0===c?void 0:c.includes("Liquid"),I),M=S>1e8&&!(null==y?void 0:null===(v=y[0])||void 0===v?void 0:null===(s=v.name)||void 0===s?void 0:s.includes("Liquid"))&&!(null==y?void 0:null===(m=y[0])||void 0===m?void 0:null===(h=m.name)||void 0===h?void 0:h.includes("Bits"))&&(0,C.a2)(B,S);return(0,i.jsxs)(d.Z,{alignItems:"center",children:[(0,i.jsx)(p.Z,{title:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{sx:{fontWeight:"bold"},children:(0,j.pascalCase)((0,j.cleanUnderscore)(Z))}),(0,i.jsx)(d.Z,{direction:"row",justifyContent:"center",gap:1,children:null==y?void 0:y.map((n,l)=>{let{rawName:e}=n;if("Blank"===e||"ERROR"===e||e.includes("Liquid"))return null;let t=["sail","bits"].find(n=>e.toLowerCase().includes(n))?"".concat(e,"_x1"):e;return(0,i.jsxs)(d.Z,{alignItems:"center",direction:"row",gap:1,children:[(0,i.jsxs)(d.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(P,{src:"".concat(j.prefix,"data/").concat(t,".png"),alt:""}),(0,i.jsx)(o.Z,{children:(0,j.notateNumber)(_,"Big")})]}),M>0?(0,i.jsxs)(d.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(d.Z,{sx:{width:32,height:32},alignItems:"center",justifyContent:"center",children:(0,i.jsx)("img",{width:18,height:18,src:"".concat(j.prefix,"etc/Particle.png"),alt:""})}),(0,i.jsx)(o.Z,{children:M})]}):null]},"req"+e+l)})})]}),children:(0,i.jsx)("img",{style:{opacity:t?.8:1},width:42,height:42,src:"".concat(j.prefix,"data/").concat(f,".png"),alt:""})}),(0,i.jsxs)(d.Z,{direction:"row",alignItems:"center",gap:.5,children:[M>0?(0,i.jsx)(x.Z,{title:(0,i.jsxs)(o.Z,{color:(null==a?void 0:null===(g=a.atoms)||void 0===g?void 0:g.particles)>M?"success.light":"",children:[Math.floor(null==a?void 0:null===(b=a.atoms)||void 0===b?void 0:b.particles)," / ",M]}),children:(0,i.jsx)("img",{width:18,height:18,src:"".concat(j.prefix,"etc/Particle.png"),alt:""})}):null,(0,i.jsx)(o.Z,{variant:"body1",children:w})]})]},"".concat(f,"-").concat(l,"-").concat(t,"-nblb"))})})]})},L=b.Z.img(M()),P=b.Z.img(k()),E=b.Z.img(N(),n=>{let{level:l}=n;return 0===l?.5:1}),O=n=>{let{goalLevel:l,bubbleName:e,desc:t,func:r,x1:d,x2:a,level:c}=n,u=(0,j.growth)(r,c,d,a,!0),s=(0,j.growth)(r,l,d,a,!0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{fontWeight:"bold",variant:"h6",children:(0,j.cleanUnderscore)(e)}),(0,i.jsx)(o.Z,{variant:"body1",children:(0,j.cleanUnderscore)(t.replace(/{/,u))}),c!==l?(0,i.jsxs)(o.Z,{sx:{color:c>0?"multi":""},variant:"body1",children:["Goal: +",s]}):null]})},F=()=>{let n=Array(15).fill(25).map((n,l)=>(0,C.AK)(n+l)).toChunks(5);return(0,i.jsx)(d.Z,{gap:2,children:n.map((n,l)=>(0,i.jsxs)(d.Z,{children:[(0,i.jsxs)(o.Z,{sx:{fontWeight:"bold"},children:["World ",6+l]}),(0,i.jsx)(d.Z,{children:n.map((n,e)=>(0,i.jsxs)(o.Z,{children:[26+5*l+e," - ",(0,j.notateNumber)(n)]},n))})]},l))})};l.default=()=>{var n,l,e,t,x,b,f,M;let{state:k}=(0,m.useContext)(g.I),[N,L]=(0,m.useState)(!1),[P,U]=(0,m.useState)(!1),[R,T]=(0,m.useState)(0),[A,z]=(0,m.useState)(75),[Y,D]=(0,m.useState)(0),[G,X]=(0,m.useState)(),[H,K]=(0,m.useState)(),V=(0,m.useMemo)(()=>{var n,l,e,t;return null==k?void 0:null===(t=k.account)||void 0===t?void 0:null===(e=t.lab)||void 0===e?void 0:null===(l=e.labBonuses)||void 0===l?void 0:null===(n=l.find(n=>"My_1st_Chemistry_Set"===n.name))||void 0===n?void 0:n.active},[null==k?void 0:null===(n=k.account)||void 0===n?void 0:n.lab.vials]);(0,m.useEffect)(()=>{var n,l,e,t,i,o;let r=null===(n=Object.keys(null==k?void 0:null===(e=k.account)||void 0===e?void 0:null===(l=e.alchemy)||void 0===l?void 0:l.bubbles))||void 0===n?void 0:n[Y];X(null==k?void 0:null===(o=k.account)||void 0===o?void 0:null===(i=o.alchemy)||void 0===i?void 0:null===(t=i.bubbles)||void 0===t?void 0:t[r])},[]);let Q=n=>{var l;T(null==n?void 0:null===(l=n.target)||void 0===l?void 0:l.value)},J=Z()((n,l,e)=>{let{value:t}=n.target;K({...H,[l]:{...(null==H?void 0:H[l])||{},[e]:t?parseInt(t):0}})},100),$=function(n){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let l=arguments.length>2?arguments[2]:void 0,e=arguments.length>3?arguments[3]:void 0,t=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=(arguments.length>6&&arguments[6],arguments.length>7&&arguments[7],arguments.length>8?arguments[8]:void 0),r=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0,a=arguments.length>11?arguments[11]:void 0,c=arguments.length>12?arguments[12]:void 0;if(t)return e+Math.floor(l/20);{var u,s,v,h;let t=Math.max(.1,1-Math.round(10*(0,j.growth)("decay",i,90,100,!1))/10/100),x=(0,C.iu)(null==k?void 0:null===(s=k.account)||void 0===s?void 0:null===(u=s.alchemy)||void 0===u?void 0:u.vials,"AlchBubbleCost"),m=(0,C.om)(null==k?void 0:null===(h=k.account)||void 0===h?void 0:null===(v=h.alchemy)||void 0===v?void 0:v.bubbles,"kazam","UNDEVELOPED_COSTS",!1);return Math.min((n<15?e*Math.pow(1.35-.3*l/(50+l),l):e*Math.pow(1.37-.28*l/(60+l),l))*Math.max(.05,1-(0,j.growth)("decay",o,40,12,!1)/100*(0,j.growth)("decayMulti",r,2,50,!1)*(0,j.growth)("decayMulti",c,1.4,30,!1))*t*Math.max(.05,1-(x+m)/100)*Math.max(.1,Math.pow(.75,d))*Math.max(.9,1-.1*a),1e9)}},nn=(n,l,e,t,i)=>{var o,r,d,a,c,u,s,v,h,x,m,g,b,j,p,f,Z,w,y,C,B,I,S,_,M,q,W,L,P,E,O;let F=(null==k?void 0:null===(u=k.account)||void 0===u?void 0:null===(c=u.alchemy)||void 0===c?void 0:null===(a=c.cauldrons)||void 0===a?void 0:null===(d=a[t])||void 0===d?void 0:null===(r=d.boosts)||void 0===r?void 0:null===(o=r.cost)||void 0===o?void 0:o.level)||0,U=(null==k?void 0:null===(x=k.account)||void 0===x?void 0:null===(h=x.alchemy)||void 0===h?void 0:null===(v=h.bubbles)||void 0===v?void 0:null===(s=v.kazam)||void 0===s?void 0:s[6].level)||0,T=(null==k?void 0:null===(j=k.account)||void 0===j?void 0:null===(b=j.alchemy)||void 0===b?void 0:null===(g=b.vials)||void 0===g?void 0:null===(m=g[9])||void 0===m?void 0:m.level)||0,A="kazam"!==t&&(null==k?void 0:null===(y=k.account)||void 0===y?void 0:null===(w=y.alchemy)||void 0===w?void 0:null===(Z=w.bubbles)||void 0===Z?void 0:null===(f=Z[t])||void 0===f?void 0:null===(p=f[16])||void 0===p?void 0:p.level)||0;return $(i,V?2:1,n,l,e,F,U,T,(null==k?void 0:null===(_=k.account)||void 0===_?void 0:null===(S=_.alchemy)||void 0===S?void 0:null===(I=S.bubbles)||void 0===I?void 0:null===(B=I[t])||void 0===B?void 0:null===(C=B[14])||void 0===C?void 0:C.level)||0,N&&"kazam"!==t&&(null==k?void 0:null===(P=k.account)||void 0===P?void 0:null===(L=P.alchemy)||void 0===L?void 0:null===(W=L.bubbles)||void 0===W?void 0:null===(q=W[t])||void 0===q?void 0:null===(M=q[1])||void 0===M?void 0:M.level)||0,R||0,null==k?void 0:null===(O=k.account)||void 0===O?void 0:null===(E=O.achievements[108])||void 0===E?void 0:E.completed,A)},nl=(n,l,e,t,i)=>{var o,r;let d=(null!==(r=null==H?void 0:null===(o=H[i])||void 0===o?void 0:o[n])&&void 0!==r?r:0)-l;if(d<=0){let o=nn(l,e,t,i,n);return{singleLevelCost:o,total:o}}let a=Array(d||0).fill(1),c=0;return{total:a.reduce((o,r,d)=>{let a=nn(l+(0===d?1:d),e,t,i,n);return t||(c=a),o+a},nn(l,e,t,i,n)),singleLevelCost:c}},ne=(0,m.useCallback)((n,l,e,t,i)=>nl(n,l,e,t,i),[H,R,N]),nt=(n,l,e)=>{var t;let i=Object.values((null==n?void 0:null===(t=n.alchemy)||void 0===t?void 0:t.bubbles)||{}).map(n=>n.filter(n=>{let{level:e,index:t}=n;return e>=5&&t<l}).sort((n,l)=>n.level-l.level)),o=Math.ceil(e/4),r=[];for(let n=0;n<i.length;n++){let l=i[n];r.push(l.slice(0,o))}return r.flat()},ni=n=>{var l,e,t,i,o,r,d,a,c,u,s;let v=3;if(!(null==n?void 0:null===(t=n.lab)||void 0===t?void 0:null===(e=t.labBonuses)||void 0===e?void 0:null===(l=e.find(n=>"No_Bubble_Left_Behind"===n.name))||void 0===l?void 0:l.active))return null;let h=Object.values(null==n?void 0:null===(i=n.alchemy)||void 0===i?void 0:i.bubbles).flatMap((n,l)=>n.map((n,e)=>({...n,tab:l,flatIndex:1e3*l+e}))).filter(n=>{let{level:l,index:e}=n;return l>=5&&e<15}).sort((n,l)=>l.flatIndex-n.flatIndex).sort((n,l)=>n.level-l.level);(null==n?void 0:null===(d=n.lab)||void 0===d?void 0:null===(r=d.jewels)||void 0===r?void 0:null===(o=r.find(n=>"Pyrite_Rhinestone"===n.name))||void 0===o?void 0:o.active)&&v++;let x=(0,w.YS)(null==n?void 0:null===(a=n.sailing)||void 0===a?void 0:a.artifacts,"Amberite");x&&(v+=(null==x?void 0:x.acquired)===3?(null==x?void 0:x.baseBonus)*3:(null==x?void 0:x.acquired)===2?(null==x?void 0:x.baseBonus)*2:null==x?void 0:x.baseBonus);let m=null==n?void 0:null===(s=n.tasks)||void 0===s?void 0:null===(u=s[2])||void 0===u?void 0:null===(c=u[3])||void 0===c?void 0:c[6];return m>0&&(v+=m),{normal:h.slice(0,v),atomBubbles:nt(n,25,v)}},no=(0,m.useMemo)(()=>ni(null==k?void 0:k.account),[null==k?void 0:k.account]),nr=(n,l)=>{if(!(null==n?void 0:n.includes("decay")))return null;let e=l;return"decayMulti"===n&&(e+=1),e};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.PB,{title:"Bubbles | Idleon Toolbox",description:"Keep track of your bubbles level and requirements with a handy calculator"}),(0,i.jsx)(o.Z,{variant:"h2",textAlign:"center",mb:3,children:"Bubbles"}),(0,i.jsxs)(B.Z,{sx:{width:"fit-content",margin:"24px auto"},children:[(0,i.jsx)(W,{title:"Next bubble upgrades",bubbles:null==no?void 0:no.normal,accumulatedCost:ne,account:null==k?void 0:k.account}),(0,i.jsx)(r.Z,{sx:{my:2}}),(0,i.jsx)(W,{lithium:!0,bubbles:null==no?void 0:no.atomBubbles,accumulatedCost:ne,account:null==k?void 0:k.account})]}),(0,i.jsxs)(d.Z,{direction:"row",justifyContent:"center",mt:2,gap:2,flexWrap:"wrap",children:[(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(a.Z,{control:(0,i.jsx)(c.Z,{checked:P,onChange:()=>U(!P)}),name:"Condense view",label:"Condense view"}),(null===(l=Object.keys(null==k?void 0:null===(t=k.account)||void 0===t?void 0:null===(e=t.alchemy)||void 0===e?void 0:e.bubbles))||void 0===l?void 0:l[Y])!=="kazam"?(0,i.jsx)(a.Z,{control:(0,i.jsx)(c.Z,{checked:N,onChange:()=>L(!N)}),name:"classDiscount",label:"Class Discount"}):null]}),(0,i.jsxs)(d.Z,{gap:1,children:[(0,i.jsx)(u.Z,{sx:{width:150},label:"Efficiency threshold",value:A,type:"number",inputProps:{min:0,max:100},onChange:n=>{let{target:l}=n;return z(l.value)}}),(0,i.jsx)(u.Z,{value:R,type:"number",inputProps:{min:0,max:8},onChange:n=>Q(n),helperText:"".concat(parseFloat((-(25*(Math.pow(.75,R)-1)/.25)).toFixed(1)),"%"),InputProps:{startAdornment:(0,i.jsx)(s.Z,{position:"start",children:(0,i.jsx)("img",{width:36,height:36,src:"".concat(j.prefix,"data/aShopItems10.png"),alt:""})})}})]}),(0,i.jsx)(S.Ye,{cardSx:{height:"fit-content"},title:"Particle upgrades",value:(null==k?void 0:null===(b=k.account)||void 0===b?void 0:null===(x=b.accountOptions)||void 0===x?void 0:x[135])||"0"}),(0,i.jsx)(S.Ye,{cardSx:{height:"fit-content"},title:"Total bubbles",children:(0,i.jsxs)(d.Z,{direction:"row",alignItems:"center",gap:1,children:[null==G?void 0:G.length,(0,i.jsx)(p.Z,{title:(0,i.jsx)(F,{}),children:(0,i.jsx)(_.Z,{})})]})})]}),(0,i.jsx)(I.Z,{tabs:Object.keys(null==k?void 0:null===(M=k.account)||void 0===M?void 0:null===(f=M.alchemy)||void 0===f?void 0:f.bubbles),onTabChange:n=>{var l,e,t,i,o,r;D(n);let d=null===(l=Object.keys(null==k?void 0:null===(t=k.account)||void 0===t?void 0:null===(e=t.alchemy)||void 0===e?void 0:e.bubbles))||void 0===l?void 0:l[n];X(null==k?void 0:null===(r=k.account)||void 0===r?void 0:null===(o=r.alchemy)||void 0===o?void 0:null===(i=o.bubbles)||void 0===i?void 0:i[d]),3===n&&L(!1)},children:(0,i.jsx)(d.Z,{direction:"row",flexWrap:"wrap",gap:3,justifyContent:"center",children:null==G?void 0:G.map((n,l)=>{var e,t,r;if(l>24)return null;let{level:a,itemReq:c,rawName:s,bubbleName:x,func:g,x1:b,x2:f,cauldron:Z}=n,w=(null==H?void 0:null===(e=H[Z])||void 0===e?void 0:e[l])?(null==H?void 0:null===(t=H[Z])||void 0===t?void 0:t[l])<a?a:null==H?void 0:null===(r=H[Z])||void 0===r?void 0:r[l]:a,y=(0,j.growth)(g,w,b,f,!0),C=nr(g,b),B=w/(w+f)*100;return(0,i.jsx)(m.Fragment,{children:(0,i.jsx)(v.Z,{sx:{width:P?100:330,border:C&&B>=A?"1px solid":"",borderColor:"success.main"},children:(0,i.jsxs)(h.Z,{children:[(0,i.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"space-around",gap:2,children:[(0,i.jsxs)(d.Z,{alignItems:"center",children:[(0,i.jsx)(p.Z,{dark:P,title:P?(0,i.jsx)(q,{tooltip:!0,bubbleMaxBonus:C,goalBonus:y,cauldron:Z,effectHardCapPercent:B,itemReq:c,accumulatedCost:ne,account:null==k?void 0:k.account,level:a,index:l,bubble:n,goalLevel:w}):(0,i.jsx)(O,{...n,goalLevel:w}),children:(0,i.jsx)(E,{width:48,height:48,level:a,src:"".concat(j.prefix,"data/").concat(s,".png"),alt:""})}),(0,i.jsxs)(d.Z,{alignItems:"center",justifyContent:"center",children:[(0,i.jsxs)(o.Z,{variant:"caption",children:["Lv. ",a]}),P?null:(0,i.jsx)(o.Z,{variant:"caption",children:(0,j.cleanUnderscore)(x)})]})]}),P?null:(0,i.jsx)(u.Z,{type:"number",sx:{width:90},defaultValue:w,onChange:n=>J(n,Z,l),label:"Goal",variant:"outlined",inputProps:{min:a||0}})]}),P?null:(0,i.jsx)(q,{bubbleMaxBonus:C,goalBonus:y,cauldron:Z,effectHardCapPercent:B,itemReq:c,accumulatedCost:ne,account:null==k?void 0:k.account,level:a,index:l})]})})},s+""+x+l)})})})]})}}},function(n){n.O(0,[5127,1871,5039,6426,9774,2888,179],function(){return n(n.s=69822)}),_N_E=n.O()}]);