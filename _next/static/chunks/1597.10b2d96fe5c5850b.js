"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1597],{61597:function(e,l,o){o.d(l,{parseData:function(){return parseData}});var n=o(56552),i=o(54685),a=o(74805),t=o(1972),r=o(74861),s=o(64569);let u={0:"dewdrop",1:"sandstone",2:"chillsnap",3:"astro"},d={0:"chopping",1:"fishing",2:"catching",3:"mining"},getHighscores=(e,l)=>{var o,n,i,a;let t=(null==e?void 0:null===(o=e.FamilyValuesMap)||void 0===o?void 0:o.ColosseumHighscores)||(null==e?void 0:e.FamValColosseumHighscores),r=(null==e?void 0:null===(n=e.FamilyValuesMap)||void 0===n?void 0:n.MinigameHiscores)||(null==e?void 0:e.FamValMinigameHiscores);return{coloHighscores:parseColosseum(t),minigameHighscores:parseMinigame(r).concat([{name:"pen pals",score:(null==l?void 0:null===(i=l.accountOptions)||void 0===i?void 0:i[99])||0},{name:"poing",score:null==l?void 0:null===(a=l.gaming)||void 0===a?void 0:a.poingHighscore}])}},parseColosseum=e=>e.slice(1).filter((e,l)=>u[l]).map((e,l)=>({name:u[l],score:parseFloat(e)})),parseMinigame=e=>e.filter((e,l)=>d[l]).map((e,l)=>({name:d[l],score:e}));var v=o(30925);let getGemShop=e=>{let l=(0,v.tryToParse)(null==e?void 0:e.GemItemsPurchased)||(null==e?void 0:e.GemItemsPurchased);return parseGemShop(l)},parseGemShop=e=>e;var c=o(25081),m=o(88054),p=o(23515),g=o(29129),h=o(96707),f=o(15815),M=o(70473);let getForge=(e,l)=>{let o=null==e?void 0:e.ForgeItemOrder,n=(null==e?void 0:e.ForgeItemQuantity)||(null==e?void 0:e.ForgeItemQty),i=(null==e?void 0:e.FurnaceLevels)||(null==e?void 0:e.ForgeLV);return parseForge(o,n,i,l)},y=[{name:"New Forge Slot",maxLevel:16,description:"extra slots to smelt ores",costMulti:void 0},{name:"Ore Capacity Boost",maxLevel:50,description:"Increases max ores per slot",costMulti:1.41},{name:"Forge Speed",maxLevel:90,description:"Ores are turned into bars faster",costMulti:1.2},{name:"Forge EXP Gain",maxLevel:85,description:"Increased EXP gain from using the forge",costMulti:1.21},{name:"Bar Bonanza",maxLevel:75,description:"Increased chance to make an extra bar",costMulti:1.25},{name:"Puff Puff Go",maxLevel:60,description:"Increased chance for a card drop while afk",costMulti:1.33}],parseForge=(e,l,o,n)=>{var i,a,t,r;let s=null==y?void 0:y.map((e,l)=>({...e,level:o[l]})),u=null!==(a=null==n?void 0:null===(i=n.gemShopPurchases)||void 0===i?void 0:i.find((e,l)=>104===l))&&void 0!==a?a:0,d=[],v=0;for(let o=0;o<(null==e?void 0:e.length);o+=3){let[n,i,a]=null==e?void 0:e.slice(o,o+3),[c,m,p]=l.slice(o,o+3),g=null===M.items||void 0===M.items?void 0:M.items[i],h=null===M.items||void 0===M.items?void 0:M.items[n],f=v<u,y=Math.round(100+5*(null==s?void 0:null===(t=s[2])||void 0===t?void 0:t.level)),k=getSpeed(y,g,f),S=Math.round(c/(null==h?void 0:h.Amount))*((null==h?void 0:h.Cooldown)/(4*k));d=[...d,{isBrimestone:f,ore:{...h,name:null==h?void 0:h.displayName,rawName:n,amount:c,quantity:c,timeTillEmpty:1e3*S,owner:"forge"},barrel:{...g,name:null==g?void 0:g.displayName,rawName:i,amount:m,quantity:m,owner:"forge"},bar:{...null===M.items||void 0===M.items?void 0:M.items[a],name:null===M.items||void 0===M.items?void 0:null===(r=M.items[a])||void 0===r?void 0:r.displayName,rawName:a,amount:p,quantity:p,owner:"forge"}}],v++}return{list:d,upgrades:s}},getSpeed=(e,l,o)=>{let n=Math.round(e)/100;return n*=(null==l?void 0:l.Effect)==="SpeedForge"?null==l?void 0:l.Amount:1,o&&(n*=1.5),.25*n};var k=o(47212),S=o(9339),b=o(72664);let getTasks=e=>{var l;let o=(null==e?void 0:e.Tasks)||[(0,v.tryToParse)(null==e?void 0:e.TaskZZ0),(0,v.tryToParse)(null==e?void 0:e.TaskZZ1),(0,v.tryToParse)(null==e?void 0:e.TaskZZ2),(0,v.tryToParse)(null==e?void 0:e.TaskZZ3),(0,v.tryToParse)(null==e?void 0:e.TaskZZ4),(0,v.tryToParse)(null==e?void 0:e.TaskZZ5),(0,v.tryToParse)(null==e?void 0:e.TaskZZ6)],n=null===M.tasks||void 0===M.tasks?void 0:null===(l=M.tasks.map((e,l)=>null==e?void 0:e.map((e,n)=>{var i,a,t,r,s,u;let d=null==o?void 0:null===(a=o[0])||void 0===a?void 0:null===(i=a[l])||void 0===i?void 0:i[n],v=null==o?void 0:null===(r=o[1])||void 0===r?void 0:null===(t=r[l])||void 0===t?void 0:t[n],c=e;if(8===n){let e=null==o?void 0:null===(s=o[5])||void 0===s?void 0:s[l];c=null===M.tasks||void 0===M.tasks?void 0:null===(u=M.tasks[l])||void 0===u?void 0:u[8+e]}return{...c,stat:d,level:v,meritReward:Math.round(1+Math.floor(v/5))}})))||void 0===l?void 0:l.map(e=>null==e?void 0:e.slice(0,9)),i=null===M.merits||void 0===M.merits?void 0:M.merits.map((e,l)=>null==e?void 0:e.map((e,n)=>{var i,a;let t=null==o?void 0:null===(a=o[2])||void 0===a?void 0:null===(i=a[l])||void 0===i?void 0:i[n];return{...e,level:t}}));return{tasks:parseTasks(o),tasksDescriptions:n,meritsDescriptions:i}},parseTasks=e=>e;var T=o(71345),w=o(10924),x=o(32387),E=o(11028),F=o(89260),C=o(15893),P=o(64605),O=o(73592),I=o(70508),B=o(19225),_=o(74629),N=o(5432),L=o(19834),D=o(16727),R=o(20385),j=o(95331),G=o(67896),A=o(4056),Z=o(78713),H=o(72973),q=o(15265),z=o(8616),U=o(13339);let getFarming=(e,l)=>{let o=(0,v.tryToParse)(null==e?void 0:e.FarmUpg),n=(0,v.tryToParse)(null==e?void 0:e.FarmPlot),i=(0,v.tryToParse)(null==e?void 0:e.FarmCrop);return parseFarming(o,n,i,l)},parseFarming=(e,l,o,n)=>{var i,a;let t=null==n?void 0:null===(i=n.gemShopPurchases)||void 0===i?void 0:i.find((e,l)=>139===l),r=null==e?void 0:e.slice(2,M.marketInfo.length+1),s=null==e?void 0:e[1],u=null==e?void 0:e[19],d=null===M.marketInfo||void 0===M.marketInfo?void 0:M.marketInfo.map((e,l)=>{var o;let{cropId:n,cropIdIncrement:i,cost:a,costExponent:t,bonusPerLvl:s,maxLvl:u,bonus:d}=e,v=null!==(o=null==r?void 0:r[l])&&void 0!==o?o:0;return{...e,level:v,type:getCropType({index:l,cropId:n,cropIdIncrement:i,level:v}),cost:a*Math.pow(t,v),nextUpgrades:getNextUpgradesReq({index:l,cropId:n,cropIdIncrement:i,level:v,cost:a,costExponent:t}),costToMax:calcCostToMax({level:v,maxLvl:u,cost:a,costExponent:t}),value:d.includes("}")?1+v*s/100:v*s}}),v=null==l?void 0:l.map(e=>{var l;let[o,n,i,a,t,r,s]=e,u=Math.round((null===M.seedInfo||void 0===M.seedInfo?void 0:null===(l=M.seedInfo[o])||void 0===l?void 0:l.cropIdMin)+i);return{seedType:o,cropType:u,cropQuantity:t,cropProgress:s,progress:n,growthReq:14400*Math.pow(1.5,o),isLocked:a,currentOG:r,cropRawName:"FarmCrop".concat(u,".png"),seedRawName:"Seed_".concat(o,".png")}}),c=getMarketBonus(d,"LAND_PLOTS"),m=Object.entries(o||{}).reduce((e,l)=>{var o,n;let[i,a]=l,t=M.seedInfo.find(e=>parseFloat(i)>=e.cropIdMin&&parseFloat(i)<=e.cropIdMax);return e+parseFloat(a)*Math.pow(2.5,null!==(o=null==t?void 0:t.seedId)&&void 0!==o?o:0)*Math.pow(1.08,i-(null!==(n=null==t?void 0:t.cropIdMin)&&void 0!==n?n:0))},0),p=null!==(a=(0,z.x5)(n,"Deal_Sweetening"))&&void 0!==a?a:0,g=getMarketBonus(d,"MORE_BEENZ"),h=(0,S.k)(null==n?void 0:n.achievements,363);return{plot:v,crop:{...o,beans:s},market:d,cropsFound:Object.keys(o||{}).length,cropsOnVine:Math.floor(1+(c+20*t)/100),instaGrow:u,beanTrade:Math.pow(m,.5)*(1+g/100)*(1+25*p/100)+5*h}},updateFarming=(e,l)=>{var o,n;let i=null==l?void 0:null===(n=l.farming)||void 0===n?void 0:null===(o=n.plot)||void 0===o?void 0:o.map(o=>{var n,i,a,t,r,s,u;let d=getMarketBonus(null==l?void 0:null===(n=l.farming)||void 0===n?void 0:n.market,"OG_FERTILIZER"),v=(0,z.vq)(l,"Taffy_Disc"),c=(0,h.o9)(null==e?void 0:e[0],l,"OG_Chance"),p=(0,S.k)(null==l?void 0:l.achievements,365),g=Math.pow(.4,(null==o?void 0:o.currentOG)+1)*Math.max(1,d)*(1+v/100)*(1+c/100)*(1+15*p/100),f=getMarketBonus(null==l?void 0:null===(i=l.farming)||void 0===i?void 0:i.market,"NUTRITIOUS_SOIL"),M=getMarketBonus(null==l?void 0:null===(a=l.farming)||void 0===a?void 0:a.market,"SPEED_GMO"),y=null===(r=Object.values(null==l?void 0:null===(s=l.farming)||void 0===s?void 0:s.crop))||void 0===r?void 0:null===(t=r.filter(e=>e>=1e3))||void 0===t?void 0:t.length,k=(0,m.iu)(null==l?void 0:null===(u=l.alchemy)||void 0===u?void 0:u.vials,"6FarmSpd"),b=(0,U.R)(l,"<x Farming SPD"),T=Math.max(1,M*y)*(1+(f+k)/100)*(1+b/100),w=((null==o?void 0:o.growthReq)-(null==o?void 0:o.cropProgress))/T,x=Math.min(1e9,Math.max(1,Math.pow(2,null==o?void 0:o.currentOG)));return{...o,nextOGChance:g,growthRate:T,ogMulti:x,timeLeft:w}});return{...(null==l?void 0:l.farming)||{},plot:i,cropDepot:getCropDepotBonuses(l)}},getNextUpgradesReq=e=>{let{index:l,cropId:o,cropIdIncrement:n,level:i,cost:a,costExponent:t,isUnique:r=!0}=e,s=new Map,u=0;for(;s.size<4;){let e=getCropType({index:l,cropId:o,cropIdIncrement:n,level:i+u}),d=a*Math.pow(t,i+u);s.has(e)&&r?s.set(e,s.get(e)+d):s.set(e,d),u++}return Array.from(s.entries()).map(e=>{let[l,o]=e;return{type:l,cost:o}})},getCropType=e=>{let{index:l,cropId:o,cropIdIncrement:n,level:i}=e;return 0===l?Math.floor(o+n*(i+(2*Math.floor(i/3)+Math.floor(i/4)))):Math.floor(o+n*i)},getCropDepotBonuses=e=>{var l,o,n,i,a,t,r,s,u;let d=(0,C.c9)(null==e?void 0:null===(l=e.lab)||void 0===l?void 0:l.labBonuses,17),v=(0,C.c9)(null==e?void 0:e.lab.labBonuses,8),c=(0,C.pc)(null==e?void 0:null===(o=e.lab)||void 0===o?void 0:o.jewels,20,v),m={damage:{name:"DMG",value:0},gamingEvo:{name:"Gaming Evo",value:0},jadeCoin:{name:"Jade Coin",value:0},cookingSpeed:{name:"Meal Spd",value:0},cash:{name:"Cash",value:0},shiny:{name:"Pet Rate",value:0},critters:{name:"Critters",value:0}};return(0,z.x5)(e,"Reinforced_Science_Pencil")&&(m.damage.value=20*Math.round(null==e?void 0:null===(n=e.farming)||void 0===n?void 0:n.cropsFound)*(1+(d+c)/100)),(0,z.x5)(e,"Science_Pen")&&(m.gamingEvo.value=Math.pow(1.02,Math.round(null==e?void 0:null===(i=e.farming)||void 0===i?void 0:i.cropsFound))*(1+(d+c)/100)),(0,z.x5)(e,"Science_Marker")&&(m.jadeCoin.value=8*Math.round(null==e?void 0:null===(a=e.farming)||void 0===a?void 0:a.cropsFound)*(1+(d+c)/100)),(0,z.x5)(e,"Science_Featherpen")&&(m.cookingSpeed.value=Math.pow(1.1,Math.round(null==e?void 0:null===(t=e.farming)||void 0===t?void 0:t.cropsFound))*(1+(d+c)/100)),(0,z.x5)(e,"Science_Environmentally_Sourced_Pencil")&&(m.cash.value=15*Math.round(null==e?void 0:null===(r=e.farming)||void 0===r?void 0:r.cropsFound)*(1+(d+c)/100)),(0,z.x5)(e,"Science_Crayon")&&(m.shiny.value=7*Math.round(null==e?void 0:null===(s=e.farming)||void 0===s?void 0:s.cropsFound)*(1+(d+c)/100)),(0,z.x5)(e,"Science_Paintbrush")&&(m.critters.value=.1*Math.round(null==e?void 0:null===(u=e.farming)||void 0===u?void 0:u.cropsFound)*(1+(d+c)/100)),m},getMarketBonus=(e,l)=>{var o,n;return null!==(n=null===(o=null==e?void 0:e.find(e=>{let{name:o}=e;return o===l}))||void 0===o?void 0:o.value)&&void 0!==n?n:0},calcCostToMax=e=>{let{level:l,maxLvl:o,cost:n,costExponent:i}=e,a=0;for(let e=l;e<o;e++)a+=n*Math.pow(i,e);return null!=a?a:0},getTome=(e,l,o)=>(M.ninjaExtraInfo[32].split(" "),M.tomeData.map((e,l)=>({...e,tomeLvReq:50*l+(10*Math.max(0,l-30)+10*Math.max(0,l-50))+500}))),parseData=(e,l,o,n,i)=>{let a,t;try{console.info("%cStart Parsing","color:orange");let r=serializeData(e,l,o,n,i),s=serializeData(e,l,o,n,i,r);return a=null==s?void 0:s.accountData,t=null==s?void 0:s.charactersData,console.info("data",{account:a,characters:t}),console.info("%cParsed successfully","color: green"),{account:a,characters:t}}catch(e){console.error("Error while parsing data",e),void 0!==window.gtag&&window.gtag("event","error",{event_category:"error",event_label:"engagement",value:JSON.stringify(e)})}},serializeData=(e,l,o,u,d,y)=>{var V,X,W,K,Q,Y,J,$,ee,el,eo,en,ei,ea;let et=(null==y?void 0:y.accountData)||{},er=(null==y?void 0:y.charactersData)||[],es=(0,n.ql)(e,l);et.companions=(0,w.Rf)(o),et.bundles=(0,w.kU)(e),et.serverVars=d,et.accountOptions=(null==e?void 0:e.OptionsListAccount)||(0,v.tryToParse)(null==e?void 0:e.OptLacc),et.bribes=(0,g.t)(e),et.timeAway=(0,v.tryToParse)(null==e?void 0:e.TimeAway)||(null==e?void 0:e.TimeAway),et.alchemy=(0,m.p4)(e,et,es),et.equippedBubbles=(0,m.Tw)(e,null===(V=et.alchemy)||void 0===V?void 0:V.bubbles,es),et.storage=(0,p.cF)(e),et.saltLick=(0,x.U)(e,et.storage),et.dungeons=(0,E.MR)(e,et.accountOptions),et.prayers=(0,f.hn)(e,et.storage),et.cards=(0,i.vm)(e,et),et.gemShopPurchases=getGemShop(e),et.guild=(0,P.Sk)(e,u),et.currencies=(0,w.DE)(et,e),et.stamps=(0,t.t2)(e,et),et.obols=(0,a.dR)(e),et.looty=(0,w.NQ)(e);let{tasks:eu,tasksDescriptions:ed,meritsDescriptions:ev}=getTasks(e);et.tasks=eu,et.tasksDescriptions=ed,et.meritsDescriptions=ev,et.breeding=(0,N.N5)(e,et),et.cooking=(0,F.Tt)(e,et),et.divinity=(0,L.y0)(e,es,et),et.postOfficeShipments=(0,A.NU)(e),et.sneaking=(0,z.JL)(e,d,es,et),et.farming=getFarming(e,et),et.summoning=(0,U.a)(e,et,es),et.lab=(0,C.Cs)(e,es,et),et.towers=(0,k.d4)(e),et.shrines=(0,s.Xz)(e,et),et.statues=(0,r.Xl)(e,es),et.achievements=(0,S.j)(e),et.lab.connectedPlayers=null===(X=et.lab.connectedPlayers)||void 0===X?void 0:X.map(e=>{var l,o;return{...e,isDivinityConnected:(null==et?void 0:null===(o=et.divinity)||void 0===o?void 0:null===(l=o.linkedDeities)||void 0===l?void 0:l[null==e?void 0:e.playerId])===4||(0,C.p8)(e,4)}}),et.rift=(0,G.wE)(e),et.arcade=(0,T.z)(e,et,d);let ec=(0,C.c9)(et.lab.labBonuses,7);et.stamps=(0,t.Md)(et.stamps,ec),et.alchemy.vials=(0,m.B9)(et),et.equinox=(0,H.B)(e,et);let em=(0,C.c9)(et.lab.labBonuses,8),ep=(0,C.pc)(et.lab.jewels,16,em);et.cooking.meals=(0,F.wR)(et.cooking.meals,ep);let eg=null==es?void 0:es.map(e=>{var l,o,n;let i=null==e?void 0:e.PersonalValuesMap;return{level:null!==(o=null==i?void 0:null===(l=i.StatList)||void 0===l?void 0:l[4])&&void 0!==o?o:0,class:null!==(n=null===M.classes||void 0===M.classes?void 0:M.classes[null==e?void 0:e.CharacterClass])&&void 0!==n?n:""}});et.starSigns=(0,h.kz)(e),et.constellations=(0,h.tp)(e),et.charactersLevels=eg,er=es.map(l=>(0,n.SD)(l,eg,{...et},e)),et.farming=updateFarming(er,et),et.lab=(0,C.Cs)(e,es,et,er),et.alchemy.vials=(0,m.B9)(et),W=[1,2,3,4,5,6],et.finishedWorlds=void 0===W?void 0:W.reduce((e,l)=>({...e,["World".concat(l)]:!!(0,B.jZ)(er,l)}),{}),et.statues=(0,r.hE)(et,er);let eh=null==er?void 0:er.map(e=>{let{name:l,skillsInfo:o}=e;return{name:l,skillsInfo:o}});et.totalSkillsLevels=(0,w.B4)(eh),et.construction=(0,k.VR)(e,et),et.atoms=(0,j.nK)(e,et);let ef=(0,D.yN)(e,er,et);et.alchemy.p2w.sigils=(0,m.RG)(et.alchemy.p2w.sigils,ef),et.alchemy.liquidCauldrons=(0,m.jd)(et),et.gaming=(0,R.gm)(e,er,et,d),et.atoms=(0,j.nK)(e,et),et.sailing=(0,D.x0)(e,ef,er,et,d,eg);let eM=(0,w.tS)(eh);er=er.map(e=>({...e,skillsInfo:eM[null==e?void 0:e.name]})),et.highscores=getHighscores(e,et),et.shopStock=(0,c.u6)(e),et.forge=getForge(e,et),et.refinery=(0,b.wt)(e,et.storage,et.tasks),et.printer=(0,O.h)(e,er,et),et.traps=(0,I.aQ)(es),et.quests=(0,B.zz)(er),et.islands=(0,Z.P)(et),et.deathNote=(0,_.WA)(e,er,et),et.anvil=er.map(e=>{let{anvil:l}=e;return l});let ey=parseFloat(null==e?void 0:e.MoneyBANK),ek=null==er?void 0:er.reduce((e,l)=>e+parseFloat(null==l?void 0:l.money),0),eS=ey+ek;et.currencies.rawMoney=eS,et.currencies.money=(0,v.getCoinsArray)(eS),et.currencies.gems=null==e?void 0:e.GemsOwned,et.currencies.KeysAll=(0,w.Ix)(null==et?void 0:null===(K=et.currencies)||void 0===K?void 0:K.KeysAll,er,et),et.currencies.ColosseumTickets=(0,w.cg)(null==et?void 0:null===(Q=et.currencies)||void 0===Q?void 0:Q.ColosseumTickets,er,et),et.currencies.penPals=null!==(ea=null===(Y=et.accountOptions)||void 0===Y?void 0:Y[99])&&void 0!==ea?ea:0,et.cooking.kitchens=(0,F.vu)(e,er,et),et.libraryTimes=(0,w.W9)(e,er,et),et.breeding=(0,N.XM)(e,et),et.divinity&&(et.divinity.deities=(0,L.wl)(et)),er=null==er?void 0:er.map(e=>{let{carryCapBags:l}=e;return e.carryCapBags=null==l?void 0:l.map(l=>{let o=(0,w.HA)(null==l?void 0:l.Class),n=(0,w.z3)(o,e,et);return{...l,capacityPerSlot:null==n?void 0:n.value,breakdown:null==n?void 0:n.breakdown,maxCapacity:(null==n?void 0:n.value)*(null==e?void 0:e.inventorySlots)}}),e.constructionSpeed=(0,n.x6)(e,et),e.constructionExpPerHour=(0,n.NA)(e,et),e}),et.stamps=(0,t.bW)(et,er),et.shrinesExpBonus=(0,s.n)(er,et),et.msaTotalizer=(0,q.CU)(et);let eb=Math.floor((null==et?void 0:null===(ee=et.deathNote)||void 0===ee?void 0:null===($=ee[0])||void 0===$?void 0:null===(J=$.mobs)||void 0===J?void 0:J[0].kills)/1e6),eT=(null===(eo=et.lab.labBonuses)||void 0===eo?void 0:null===(el=eo[13])||void 0===el?void 0:el.active)?1.5*eb:0,ew=eb*(null===(ei=et.lab.labBonuses)||void 0===ei?void 0:null===(en=ei[9])||void 0===en?void 0:en.bonusOn);return et.lab.labBonuses=(0,C.ww)(et.lab.labBonuses,ew+eT,9),et.totems=(0,q.Ew)(e),et.tome=getTome(e,et,er),{accountData:et,charactersData:er}}},25081:function(e,l,o){o.d(l,{gN:function(){return getRawShopItems},u6:function(){return getShops}});var n=o(30925),i=o(70473);let getShops=e=>{let l=(null==e?void 0:e.ShopStock)||(0,n.tryToParse)(null==e?void 0:e.ShopStock);return parseShops(l)},parseShops=e=>e.reduce((e,l,o)=>{var n;let t=null===(n=Object.values(l))||void 0===n?void 0:n.reduce((e,l,n)=>{var t,r,s,u;let d=null==a?void 0:null===(t=a[o])||void 0===t?void 0:t[n],v=parseInt(l)||0;return v>0&&d?[...e,{amount:l,...null===(s=i.shops[o])||void 0===s?void 0:null===(r=s.items)||void 0===r?void 0:r[n],shopName:null===(u=i.shops[o])||void 0===u?void 0:u.name}]:e},[]);return[...e,t]},[]),getRawShopItems=()=>{var e;return null===(e=Object.entries(i.shops))||void 0===e?void 0:e.reduce((e,l)=>{var o;let[n,{items:i}]=l,t=null==i?void 0:null===(o=i.filter((e,l)=>{var o;return null==a?void 0:null===(o=a[n])||void 0===o?void 0:o[l]}))||void 0===o?void 0:o.map(e=>{let{rawName:l}=e;return l});return[...e,...t]},[]).toSimpleObject()},a={0:[3,8,13,14,17,23].toSimpleObject(),1:[2,8,9,13].toSimpleObject(),2:[0,1,2,3,4,5,6,7,8,9,10,18,19].toSimpleObject(),3:[12].toSimpleObject(),4:[0,1,2,8,9,10,19,22].toSimpleObject(),5:[2,3,4,8,9,10,11].toSimpleObject(),6:[0,1,2,3,4,5].toSimpleObject(),7:[0,2,3,4,5,6,7].toSimpleObject()}},70508:function(e,l,o){o.d(l,{aQ:function(){return getTraps},oH:function(){return getTrapsBonuses},q6:function(){return calcTotalCritters}});var n=o(70473),i=o(88054),a=o(30796);let getTraps=e=>parseTraps(e),parseTraps=e=>e.map(e=>{let l=(null==e?void 0:e.PldTraps)||[];return l.reduce((e,l)=>{var o;let[i,,a,t,r,s,u,d]=l;if(-1===i||"-1"===i)return e;let v=n.traps[s].find(e=>e.trapTime===u),c=u-a;return t?[...e,{name:null===(o=n.items[t])||void 0===o?void 0:o.displayName,rawName:t,crittersQuantity:r,trapType:s,trapExp:d,timeLeft:new Date().getTime()+1e3*c,trapData:v}]:e},[])}),calcTotalCritters=(e,l)=>{var o;let{critter:n,exp:i}=l;return null==e?void 0:null===(o=e.traps)||void 0===o?void 0:o.reduce((e,l)=>(l.reduce((l,o)=>{var a,t,r,s;let{crittersQuantity:u,trapExp:d,rawName:v}=o;e={...e,[v]:{critters:(null!==(r=null==e?void 0:null===(a=e[v])||void 0===a?void 0:a.critters)&&void 0!==r?r:0)+u*n,exp:(null!==(s=null==e?void 0:null===(t=e[v])||void 0===t?void 0:t.exp)&&void 0!==s?s:0)+d*i}}},{}),e),{})},getTrapsBonuses=(e,l)=>{let o=null==l?void 0:l.map((o,n)=>calcCrittersBonus({currentCharacterIndex:n,account:e,characters:l,isExp:!1})),n=null==l?void 0:l.map((o,n)=>calcCrittersBonus({currentCharacterIndex:n,account:e,characters:l,isExp:!0}));return{max:{critter:Math.max(...o||[1]),exp:Math.max(...n||[1])},min:{critter:Math.min(...o||[1]),exp:Math.min(...n||[1])}}},calcCrittersBonus=e=>{var l,o,n;let{currentCharacterIndex:t,account:r,characters:s,isExp:u}=e,d=u?0:(0,i.iu)(null==r?void 0:null===(l=r.alchemy)||void 0===l?void 0:l.vials,"TrapOvision");if((0,a.gW)(null==s?void 0:null===(o=s[t])||void 0===o?void 0:o.class,"Hunter")){let e=(0,a.L1)(s,2,"Hunter","EAGLE_EYE",u);d+=u?Math.max(40,Math.min((0,a._X)(null==e?void 0:e.talents,2,"EAGLE_EYE",u),99)):Math.max(50,(0,a._X)(null==e?void 0:e.talents,2,"EAGLE_EYE"))}else{let e=0;for(let l=0;l<(null==s?void 0:s.length);l++)if((0,a.gW)(null==s?void 0:null===(n=s[l])||void 0===n?void 0:n.class,"Hunter")){let l=(0,a.L1)(s,2,"Hunter","EAGLE_EYE",u,!0);e=Math.max(e,(0,a._X)(null==l?void 0:l.talents,2,"EAGLE_EYE",u,!0))}else e=Math.max(e,u?40:50);d+=e}return isNaN(d)?1:d/100}}}]);