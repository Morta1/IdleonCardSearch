"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2879],{52879:function(l,o,i){i.d(o,{parseData:function(){return parseData}});var n=i(56552),e=i(54685),t=i(74805),a=i(1972),u=i(74861),d=i(64569);let s={0:"dewdrop",1:"sandstone",2:"chillsnap",3:"astro",4:"molten",5:"whimsical"},v={0:"chopping",1:"fishing",2:"catching",3:"mining"},getHighscores=(l,o)=>{var i,n,e,t,a;let u=(null==l?void 0:null===(i=l.FamilyValuesMap)||void 0===i?void 0:i.ColosseumHighscores)||(null==l?void 0:l.FamValColosseumHighscores),d=(null==l?void 0:null===(n=l.FamilyValuesMap)||void 0===n?void 0:n.MinigameHiscores)||(null==l?void 0:l.FamValMinigameHiscores);return{coloHighscores:parseColosseum(u),minigameHighscores:parseMinigame(d).concat([{name:"pen pals",score:(null==o?void 0:null===(e=o.accountOptions)||void 0===e?void 0:e[99])||0},{name:"poing",score:null==o?void 0:null===(t=o.gaming)||void 0===t?void 0:t.poingHighscore},{name:"hoops",score:(null==o?void 0:null===(a=o.accountOptions)||void 0===a?void 0:a[242])||0}])}},parseColosseum=l=>l.slice(1).filter((l,o)=>s[o]).map((l,o)=>({name:s[o],score:parseFloat(l)})),parseMinigame=l=>l.filter((l,o)=>v[o]).map((l,o)=>({name:v[o],score:l})),calcColoTotalScore=l=>null==l?void 0:l.reduce((l,o)=>{let{score:i}=o;return l+i},0),calcMinigameTotalScore=l=>null==l?void 0:l.reduce((l,o,i)=>{let{score:n}=o;return l+(i<5?n:0)},0);var r=i(30925);let getGemShop=l=>{let o=(0,r.tryToParse)(null==l?void 0:l.GemItemsPurchased)||(null==l?void 0:l.GemItemsPurchased);return parseGemShop(o)},parseGemShop=l=>l;var c=i(25081),p=i(88054),m=i(23515),h=i(29129),g=i(96707),M=i(15815),O=i(70473);let getForge=(l,o)=>{let i=null==l?void 0:l.ForgeItemOrder,n=(null==l?void 0:l.ForgeItemQuantity)||(null==l?void 0:l.ForgeItemQty),e=(null==l?void 0:l.FurnaceLevels)||(null==l?void 0:l.ForgeLV);return parseForge(i,n,e,o)},y=[{name:"New Forge Slot",maxLevel:16,description:"extra slots to smelt ores",costMulti:void 0},{name:"Ore Capacity Boost",maxLevel:50,description:"Increases max ores per slot",costMulti:1.41},{name:"Forge Speed",maxLevel:90,description:"Ores are turned into bars faster",costMulti:1.2},{name:"Forge EXP Gain",maxLevel:85,description:"Increased EXP gain from using the forge",costMulti:1.21},{name:"Bar Bonanza",maxLevel:75,description:"Increased chance to make an extra bar",costMulti:1.25},{name:"Puff Puff Go",maxLevel:60,description:"Increased chance for a card drop while afk",costMulti:1.33}],parseForge=(l,o,i,n)=>{var e,t,a,u;let d=null==y?void 0:y.map((l,o)=>({...l,level:i[o]})),s=null!==(t=null==n?void 0:null===(e=n.gemShopPurchases)||void 0===e?void 0:e.find((l,o)=>104===o))&&void 0!==t?t:0,v=[],r=0;for(let i=0;i<(null==l?void 0:l.length);i+=3){let[n,e,t]=null==l?void 0:l.slice(i,i+3),[c,p,m]=o.slice(i,i+3),h=null===O.items||void 0===O.items?void 0:O.items[e],g=null===O.items||void 0===O.items?void 0:O.items[n],M=r<s,y=Math.round(100+5*(null==d?void 0:null===(a=d[2])||void 0===a?void 0:a.level)),b=getSpeed(y,h,M),f=Math.round(c/(null==g?void 0:g.Amount))*((null==g?void 0:g.Cooldown)/(4*b));v=[...v,{isBrimestone:M,ore:{...g,name:null==g?void 0:g.displayName,rawName:n,amount:c,quantity:c,timeTillEmpty:1e3*f,owner:"forge"},barrel:{...h,name:null==h?void 0:h.displayName,rawName:e,amount:p,quantity:p,owner:"forge"},bar:{...null===O.items||void 0===O.items?void 0:O.items[t],name:null===O.items||void 0===O.items?void 0:null===(u=O.items[t])||void 0===u?void 0:u.displayName,rawName:t,amount:m,quantity:m,owner:"forge"}}],r++}return{list:v,upgrades:d}},getSpeed=(l,o,i)=>{let n=Math.round(l)/100;return n*=(null==o?void 0:o.Effect)==="SpeedForge"?null==o?void 0:o.Amount:1,i&&(n*=1.5),.25*n};var b=i(47212),f=i(9339),k=i(72664);let getTasks=l=>{var o;let i=(null==l?void 0:l.Tasks)||[(0,r.tryToParse)(null==l?void 0:l.TaskZZ0),(0,r.tryToParse)(null==l?void 0:l.TaskZZ1),(0,r.tryToParse)(null==l?void 0:l.TaskZZ2),(0,r.tryToParse)(null==l?void 0:l.TaskZZ3),(0,r.tryToParse)(null==l?void 0:l.TaskZZ4),(0,r.tryToParse)(null==l?void 0:l.TaskZZ5),(0,r.tryToParse)(null==l?void 0:l.TaskZZ6)],n=null===O.tasks||void 0===O.tasks?void 0:null===(o=O.tasks.map((l,o)=>null==l?void 0:l.map((l,n)=>{var e,t,a,u,d,s;let v=null==i?void 0:null===(t=i[0])||void 0===t?void 0:null===(e=t[o])||void 0===e?void 0:e[n],r=null==i?void 0:null===(u=i[1])||void 0===u?void 0:null===(a=u[o])||void 0===a?void 0:a[n],c=l;if(8===n){let l=null==i?void 0:null===(d=i[5])||void 0===d?void 0:d[o];c=null===O.tasks||void 0===O.tasks?void 0:null===(s=O.tasks[o])||void 0===s?void 0:s[8+l]}return{...c,stat:v,level:r,meritReward:Math.round(1+Math.floor(r/5))}})))||void 0===o?void 0:o.map(l=>null==l?void 0:l.slice(0,9)),e=null===O.merits||void 0===O.merits?void 0:O.merits.map((l,o)=>null==l?void 0:l.map((l,n)=>{var e,t;let a=null==i?void 0:null===(t=i[2])||void 0===t?void 0:null===(e=t[o])||void 0===e?void 0:e[n];return{...l,level:a}}));return{tasks:parseTasks(i),tasksDescriptions:n,meritsDescriptions:e}},parseTasks=l=>l,calcTotalTasks=l=>{var o;return null==l?void 0:null===(o=l[1])||void 0===o?void 0:o.reduce((l,o)=>{let i=o.reduce((l,o)=>l+o,0);return l+i},0)};var w=i(71345),x=i(10924),T=i(32387),S=i(11028),E=i(89260),P=i(15893),C=i(64605),F=i(73592),L=i(70508),D=i(19225),B=i(74629),N=i(5432),A=i(19834),I=i(16727),G=i(20385),H=i(95331),R=i(67896),j=i(4056),_=i(78713),Z=i(72973),q=i(15265),z=i(8616),V=i(77115),W=i(13339),X=i(30796),Q=i(88344);let getTome=(l,o,i,n)=>{let e=O.ninjaExtraInfo[32].split(" "),t=O.ninjaExtraInfo[33].split(" "),a=calcTomeQuantity(o,i,l),u=0,d=O.tomeData.map((l,i)=>{let n=e.indexOf(i.toString()),t=50*n+(10*Math.max(0,n-30)+10*Math.max(0,n-50))+500,d=(null==a?void 0:a[i])||0,s=calcPointsPercent(l,d),v=Math.ceil(s*(null==l?void 0:l.x3));return u+=(null==o?void 0:o.accountLevel)>t?v:0,{...l,tomeLvReq:t,index:n,quantity:(null==a?void 0:a[i])||0,points:v,color:.4>s?"#ffc277":.75>s?"#d6dbe0":.999>s?"gold":"#56ccff"}}),s=t.map((l,i)=>({name:l.replace("+{%",""),bonus:getTomeBonus(o,u,i)}));d.sort((l,o)=>l.index-o.index);let v=(null==n?void 0:n.TomePct)||[],r=v.reduce((l,o,i)=>u>o?i:l,-1);return{tome:d,bonuses:s,totalPoints:u,tops:v,top:r}},getTomeBonus=(l,o,i)=>{var n,e,t,a,u;let d=(0,p.om)(null==l?void 0:null===(n=l.alchemy)||void 0===n?void 0:n.bubbles,"power","TOME_STRENGTH"),s=(0,p.om)(null==l?void 0:null===(e=l.alchemy)||void 0===e?void 0:e.bubbles,"quicc","TOME_AGILITY"),v=(0,p.om)(null==l?void 0:null===(t=l.alchemy)||void 0===t?void 0:t.bubbles,"high-iq","TOME_WISDOM"),r=(o-5e3)/2e3;return 0===i?10*Math.pow(Math.floor(o/100),.7):1===i?1===(null==l?void 0:null===(a=l.accountOptions)||void 0===a?void 0:a[196])?4*Math.pow(Math.floor(Math.max(0,o-4e3)/100),.7):0:2===i?1===(null==l?void 0:null===(u=l.accountOptions)||void 0===u?void 0:u[197])?2*Math.pow(Math.floor(Math.max(0,o-8e3)/100),.7):0:3===i?d*r:4===i?s*r:5===i?v*r:0},calcPointsPercent=(l,o)=>0===(null==l?void 0:l.x2)?0>o?0:Math.pow(1.7*o/(o+(null==l?void 0:l.x1)),.7):1===(null==l?void 0:l.x2)?2.4*(0,r.lavaLog)(o)/(2*(0,r.lavaLog)(o)+(null==l?void 0:l.x1)):2===(null==l?void 0:l.x2)?Math.min(1,o/(null==l?void 0:l.x1)):3!==(null==l?void 0:l.x2)?0:o>5*(null==l?void 0:l.x1)?0:Math.pow(1.2*(6*(null==l?void 0:l.x1)-o)/(7*(null==l?void 0:l.x1)-o),5),calcTomeQuantity=(l,o)=>{var i,n,t,d,s,v,r,c,h,g,O,y,b,k,w,T,S,P,C,F,L,D,A,G,R,j,_,Z,q,V,W,U,Y,K,J,$,ll,lo,li,ln,le,lt,la,lu,ld,ls,lv,lr,lc,lp,lm,lh,lg,lM,lO,ly,lb,lf,lk,lw,lx,lT,lS,lE,lP,lC,lF,lL,lD,lB,lN;let lA=[];return lA.push((0,a.bL)(null==l?void 0:l.stamps)),lA.push((0,u.ni)(null==l?void 0:l.statues)),lA.push((0,e.QN)(null==l?void 0:l.cards)),lA.push((0,X.gq)(o)),lA.push((0,x.vZ)(o)),lA.push(null==l?void 0:l.accountLevel),lA.push(calcTotalTasks(null==l?void 0:l.tasks)),lA.push((0,f.fC)(null==l?void 0:l.achievements)),lA.push(null===(i=l.accountOptions)||void 0===i?void 0:i[198]),lA.push(null===(n=l.accountOptions)||void 0===n?void 0:n[208]),lA.push((0,Q.lV)(null==l?void 0:l.looty)),lA.push(Object.entries(null==l?void 0:l.totalSkillsLevels).reduce((l,o)=>{let[i,{level:n}]=o;return"character"!==i?l+n:l},0)),lA.push(null===(t=l.accountOptions)||void 0===t?void 0:t[201]),lA.push(null==l?void 0:null===(v=l.tasks)||void 0===v?void 0:null===(s=v[0])||void 0===s?void 0:null===(d=s[0])||void 0===d?void 0:d[2]),lA.push(null===(r=l.accountOptions)||void 0===r?void 0:r[172]),lA.push((0,X.Es)(o,l)),lA.push(1/(null===(c=l.accountOptions)||void 0===c?void 0:c[202])),lA.push(null==l?void 0:null===(h=l.dungeons)||void 0===h?void 0:h.rank),lA.push(null===(g=l.accountOptions)||void 0===g?void 0:g[200]),lA.push(null==l?void 0:l.rawConstellationsDone),lA.push(null===(O=l.accountOptions)||void 0===O?void 0:O[203]),lA.push((0,Q.ZT)(null==l?void 0:l.looty)),lA.push((0,p.e5)(null==l?void 0:null===(y=l.alchemy)||void 0===y?void 0:y.bubbles)),lA.push((0,p.k_)(null==l?void 0:null===(b=l.alchemy)||void 0===b?void 0:b.vials)),lA.push((0,p.It)(null==l?void 0:null===(w=l.alchemy)||void 0===w?void 0:null===(k=w.p2w)||void 0===k?void 0:k.sigils)),lA.push(null===(T=l.accountOptions)||void 0===T?void 0:T[199]),lA.push((null==l?void 0:null===(S=l.currencies)||void 0===S?void 0:S.DeliveryBoxComplete)+(null==l?void 0:null===(P=l.currencies)||void 0===P?void 0:P.DeliveryBoxStreak)+(null==l?void 0:null===(C=l.currencies)||void 0===C?void 0:C.DeliveryBoxMisc)),lA.push(null===(F=l.accountOptions)||void 0===F?void 0:F[204]),lA.push(null===(L=l.accountOptions)||void 0===L?void 0:L[205]),lA.push(null===(D=l.accountOptions)||void 0===D?void 0:D[206]),lA.push(1e3-(null===(A=l.accountOptions)||void 0===A?void 0:A[207])),lA.push(null===(G=l.accountOptions)||void 0===G?void 0:G[211]),lA.push(null===(R=l.accountOptions)||void 0===R?void 0:R[212]),lA.push(null===(j=l.accountOptions)||void 0===j?void 0:j[213]),lA.push(null===(_=l.accountOptions)||void 0===_?void 0:_[214]),lA.push(null===(Z=l.accountOptions)||void 0===Z?void 0:Z[215]),lA.push(null===(q=l.accountOptions)||void 0===q?void 0:q[209]),lA.push(null==l?void 0:null===(V=l.towers)||void 0===V?void 0:V.totalWaves),lA.push((0,B.sr)(null==l?void 0:l.deathNote)),lA.push(null==l?void 0:null===(W=l.equinox)||void 0===W?void 0:W.completedClouds),lA.push(null==l?void 0:null===(U=l.refinery)||void 0===U?void 0:U.totalLevels),lA.push((0,H.Bm)(null==l?void 0:null===(Y=l.atoms)||void 0===Y?void 0:Y.atoms)),lA.push(null==l?void 0:null===(K=l.towers)||void 0===K?void 0:K.totalLevels),lA.push((0,m.cR)(null==l?void 0:l.storage,"Critter11A")),lA.push(null===(J=l.accountOptions)||void 0===J?void 0:J[224]),lA.push(null===($=l.rift)||void 0===$?void 0:$.currentRift),lA.push((0,N.sd)(null==l?void 0:l.breeding)),lA.push(1e3-(null===(ll=l.accountOptions)||void 0===ll?void 0:ll[220])),lA.push((0,E.eA)(null==l?void 0:null===(lo=l.cooking)||void 0===lo?void 0:lo.kitchens)),lA.push(null==l?void 0:null===(li=l.breeding)||void 0===li?void 0:li.totalShinyLevels),lA.push((0,E.QR)(null==l?void 0:null===(ln=l.cooking)||void 0===ln?void 0:ln.meals)),lA.push(null==l?void 0:null===(le=l.breeding)||void 0===le?void 0:le.totalBreedabilityLv),lA.push(null==l?void 0:null===(lt=l.lab)||void 0===lt?void 0:lt.totalRawChips),lA.push(calcColoTotalScore(null==l?void 0:null===(la=l.highscores)||void 0===la?void 0:la.coloHighscores)),lA.push(null===(lu=l.accountOptions)||void 0===lu?void 0:lu[217]),lA.push((0,u.$M)(l)),lA.push(1e3-(null===(ld=l.accountOptions)||void 0===ld?void 0:ld[218])),lA.push((0,I.NW)(null==l?void 0:null===(ls=l.sailing)||void 0===ls?void 0:ls.boats)),lA.push(null==l?void 0:null===(lv=l.divinity)||void 0===lv?void 0:lv.godRank),lA.push(null==l?void 0:null===(lr=l.gaming)||void 0===lr?void 0:lr.totalPlantsPicked),lA.push((0,I.JR)(null==l?void 0:null===(lc=l.sailing)||void 0===lc?void 0:lc.artifacts)),lA.push(null==l?void 0:null===(lh=l.sailing)||void 0===lh?void 0:null===(lm=lh.lootPile)||void 0===lm?void 0:null===(lp=lm[0])||void 0===lp?void 0:lp.amount),lA.push(Math.max(...(null==l?void 0:null===(lM=l.sailing)||void 0===lM?void 0:null===(lg=lM.captains)||void 0===lg?void 0:lg.map(l=>{let{level:o}=l;return o}))||[])),lA.push(Math.max(null==l?void 0:null===(lO=l.gaming)||void 0===lO?void 0:lO.snailLevel,null===(ly=l.accountOptions)||void 0===ly?void 0:ly[210])),lA.push(null==l?void 0:null===(lb=l.gaming)||void 0===lb?void 0:lb.bestNugget),lA.push(null==l?void 0:null===(lk=l.looty)||void 0===lk?void 0:null===(lf=lk.lootyRaw)||void 0===lf?void 0:lf.length),lA.push(null==l?void 0:null===(lw=l.gaming)||void 0===lw?void 0:lw.bits),lA.push(Math.pow(2,null===(lx=l.accountOptions)||void 0===lx?void 0:lx[219])),lA.push(null==l?void 0:null===(lT=l.farming)||void 0===lT?void 0:lT.cropsFound),lA.push((0,z.$8)(null==l?void 0:null===(lS=l.sneaking)||void 0===lS?void 0:lS.beanstalkData)),lA.push(null==l?void 0:null===(lE=l.summoning)||void 0===lE?void 0:lE.totalUpgradesLevels),lA.push(0),lA.push(null==l?void 0:null===(lP=l.sneaking)||void 0===lP?void 0:lP.unlockedFloors),lA.push(null==l?void 0:null===(lC=l.summoning)||void 0===lC?void 0:lC.familiarsOwned),lA.push(null==l?void 0:null===(lF=l.sneaking)||void 0===lF?void 0:lF.totalJadeEmporiumUnlocked),lA.push(calcMinigameTotalScore(null==l?void 0:null===(lL=l.highscores)||void 0===lL?void 0:lL.minigameHighscores)),lA.push((0,M.vR)(null==l?void 0:l.prayers)),lA.push(0),lA.push(null===(lD=l.accountOptions)||void 0===lD?void 0:lD[221]),lA.push(null===(lB=l.accountOptions)||void 0===lB?void 0:lB[222]),lA.push(null===(lN=l.arcade)||void 0===lN?void 0:lN.totalUpgradeLevels),lA},getOwl=(l,o)=>parseOwl(o),parseOwl=l=>{var o,i,n,e,t,a,u,d,s,v,r,c,p,m,h,g;let M=null==l?void 0:null===(o=l.accountOptions)||void 0===o?void 0:o[253],y=O.owlData.map((o,i)=>{var n,e,t,a,u,d,s,v;let r=1/(1+10*(null==l?void 0:null===(n=l.accountOptions)||void 0===n?void 0:n[257])/100)*(1/(1+20*(null==l?void 0:null===(e=l.accountOptions)||void 0===e?void 0:e[261])/100))*(1/(1+getMegaFeather(l,2)*(null==l?void 0:null===(t=l.accountOptions)||void 0===t?void 0:t[254])/100))*(null==o?void 0:o.x1),c=0===i?r*(null==l?void 0:null===(a=l.accountOptions)||void 0===a?void 0:a[254+i])*Math.pow(Math.max(1.05,(null==o?void 0:o.x2)-.025*getMegaFeather(l,8)),null==l?void 0:null===(u=l.accountOptions)||void 0===u?void 0:u[254+i|0]):r*Math.pow(null==o?void 0:o.x2,null==l?void 0:null===(d=l.accountOptions)||void 0===d?void 0:d[254+i]),p=null==l?void 0:null===(s=l.accountOptions)||void 0===s?void 0:s[254+i],m=null===O.owlData||void 0===O.owlData?void 0:null===(v=O.owlData[i+1])||void 0===v?void 0:v.x3;return{...o,cost:c,level:p,nextLvReq:m}}),b=(1+9*getMegaFeather(l,0))*((null==l?void 0:null===(i=l.accountOptions)||void 0===i?void 0:i[254])+(5*(null==l?void 0:null===(n=l.accountOptions)||void 0===n?void 0:n[259])+(2*getMegaFeather(l,4)*(null==l?void 0:null===(e=l.accountOptions)||void 0===e?void 0:e[257])+4*getMegaFeather(l,4)*(null==l?void 0:null===(t=l.accountOptions)||void 0===t?void 0:t[261]))))*(1+5*(null==l?void 0:null===(a=l.accountOptions)||void 0===a?void 0:a[256])/100)*Math.pow(3+2*getMegaFeather(l,6),null==l?void 0:null===(u=l.accountOptions)||void 0===u?void 0:u[258])*(1+(null==l?void 0:null===(d=l.accountOptions)||void 0===d?void 0:d[264])*(null==l?void 0:null===(s=l.accountOptions)||void 0===s?void 0:s[260])/100),f=100*getMegaFeather(l,1)+(100*getMegaFeather(l,3)+(100*getMegaFeather(l,5)+(100*getMegaFeather(l,7)+(100*Math.min(1,getMegaFeather(l,9))+50*Math.max(0,getMegaFeather(l,9)-1))))),k=[{name:"Feather/sec",bonus:b},{name:"Class XP",bonus:5*(1+f/100)*Math.max(0,Math.ceil((null==l?void 0:null===(v=l.accountOptions)||void 0===v?void 0:v[255])/6)),percentage:!0},{name:"Base DMG",bonus:10*(1+f/100)*Math.max(0,Math.ceil(((null==l?void 0:null===(r=l.accountOptions)||void 0===r?void 0:r[255])-1)/6))},{name:"Total DMG",bonus:2*(1+f/100)*Math.max(0,Math.ceil(((null==l?void 0:null===(c=l.accountOptions)||void 0===c?void 0:c[255])-2)/6)),percentage:!0},{name:"Skill XP",bonus:4*(1+f/100)*Math.max(0,Math.ceil(((null==l?void 0:null===(p=l.accountOptions)||void 0===p?void 0:p[255])-3)/6)),percentage:!0},{name:"Drop Rate",bonus:(1+f/100)*Math.max(0,Math.ceil(((null==l?void 0:null===(m=l.accountOptions)||void 0===m?void 0:m[255])-4)/6)),percentage:!0},{name:"All Stats",bonus:2*(1+f/100)*Math.max(0,Math.ceil(((null==l?void 0:null===(h=l.accountOptions)||void 0===h?void 0:h[255])-5)/6))}];return{upgrades:y,bonuses:k,feathers:M,restartMulti:Math.pow(3+2*getMegaFeather(l,6),(null==l?void 0:null===(g=l.accountOptions)||void 0===g?void 0:g[258])+1)}},getMegaFeather=(l,o)=>{var i,n;return(null==l?void 0:null===(i=l.accountOptions)||void 0===i?void 0:i[262])>o?9===o?(null==l?void 0:null===(n=l.accountOptions)||void 0===n?void 0:n[262])-9:1:0},parseData=(l,o,i,n,e)=>{let t,a;try{console.info("%cStart Parsing","color:orange");let u=serializeData(l,o,i,n,e),d=serializeData(l,o,i,n,e,u);return t=null==d?void 0:d.accountData,a=null==d?void 0:d.charactersData,console.info("data",{account:t,characters:a}),console.info("%cParsed successfully","color: green"),{account:t,characters:a}}catch(l){console.error("Error while parsing data",l),void 0!==window.gtag&&window.gtag("event","error",{event_category:"error",event_label:"engagement",value:JSON.stringify(l)})}},serializeData=(l,o,i,s,v,y)=>{var X,Q,U,Y,K,J,$,ll,lo,li,ln,le,lt,la;let lu=(null==y?void 0:y.accountData)||{},ld=(null==y?void 0:y.charactersData)||[],ls=(0,n.ql)(l,o);lu.companions=(0,x.Rf)(i),lu.bundles=(0,x.kU)(l),lu.serverVars=v,lu.accountOptions=(null==l?void 0:l.OptionsListAccount)||(0,r.tryToParse)(null==l?void 0:l.OptLacc),lu.bribes=(0,h.t)(l),lu.timeAway=(0,r.tryToParse)(null==l?void 0:l.TimeAway)||(null==l?void 0:l.TimeAway),lu.alchemy=(0,p.p4)(l,lu,ls),lu.equippedBubbles=(0,p.Tw)(l,null===(X=lu.alchemy)||void 0===X?void 0:X.bubbles,ls),lu.storage=(0,m.cF)(l),lu.saltLick=(0,T.U)(l,lu.storage),lu.dungeons=(0,S.MR)(l,lu.accountOptions),lu.prayers=(0,M.hn)(l,lu.storage),lu.cards=(0,e.vm)(l,lu),lu.gemShopPurchases=getGemShop(l),lu.guild=(0,C.Sk)(l,s),lu.currencies=(0,x.DE)(lu,l),lu.stamps=(0,a.t2)(l,lu),lu.obols=(0,t.dR)(l),lu.looty=(0,x.NQ)(l);let{tasks:lv,tasksDescriptions:lr,meritsDescriptions:lc}=getTasks(l);lu.tasks=lv,lu.tasksDescriptions=lr,lu.meritsDescriptions=lc,lu.breeding=(0,N.N5)(l,lu),lu.cooking=(0,E.Tt)(l,lu),lu.divinity=(0,A.y0)(l,ls,lu),lu.postOfficeShipments=(0,j.NU)(l),lu.sneaking=(0,z.JL)(l,v,ls,lu),lu.farming=(0,V.UA)(l,lu),lu.summoning=(0,W.a)(l,lu,ls),lu.lab=(0,P.Cs)(l,ls,lu),lu.towers=(0,b.d4)(l),lu.shrines=(0,d.Xz)(l,lu),lu.statues=(0,u.Xl)(l,ls),lu.achievements=(0,f.jy)(l),lu.lab.connectedPlayers=null===(Q=lu.lab.connectedPlayers)||void 0===Q?void 0:Q.map(l=>{var o,i;return{...l,isDivinityConnected:(null==lu?void 0:null===(i=lu.divinity)||void 0===i?void 0:null===(o=i.linkedDeities)||void 0===o?void 0:o[null==l?void 0:l.playerId])===4||(0,P.p8)(l,4)}}),lu.rift=(0,R.wE)(l),lu.arcade=(0,w.z)(l,lu,v);let lp=(0,P.c9)(lu.lab.labBonuses,7);lu.stamps=(0,a.Md)(lu.stamps,lp),lu.alchemy.vials=(0,p.B9)(lu),lu.equinox=(0,Z.B)(l,lu);let lm=(0,P.c9)(lu.lab.labBonuses,8),lh=(0,P.pc)(lu.lab.jewels,16,lm);lu.cooking.meals=(0,E.wR)(lu.cooking.meals,lh);let lg=null==ls?void 0:ls.map(l=>{var o,i,n;let e=null==l?void 0:l.PersonalValuesMap;return{level:null!==(i=null==e?void 0:null===(o=e.StatList)||void 0===o?void 0:o[4])&&void 0!==i?i:0,class:null!==(n=null===O.classes||void 0===O.classes?void 0:O.classes[null==l?void 0:l.CharacterClass])&&void 0!==n?n:""}});lu.starSigns=(0,g.kz)(l);let{constellations:lM,rawConstellationsDone:lO}=(0,g.tp)(l);lu.constellations=lM,lu.rawConstellationsDone=lO,lu.charactersLevels=lg,ld=ls.map(o=>(0,n.SD)(o,lg,{...lu},l)),lu.farming=(0,V.nT)(ld,lu),lu.lab=(0,P.Cs)(l,ls,lu,ld),lu.alchemy.vials=(0,p.B9)(lu),U=[1,2,3,4,5,6],lu.finishedWorlds=void 0===U?void 0:U.reduce((l,o)=>({...l,["World".concat(o)]:!!(0,D.jZ)(ld,o)}),{}),lu.statues=(0,u.hE)(lu,ld);let ly=null==ld?void 0:ld.map(l=>{let{name:o,skillsInfo:i}=l;return{name:o,skillsInfo:i}});lu.totalSkillsLevels=(0,x.B4)(ly),lu.construction=(0,b.VR)(l,lu),lu.atoms=(0,H.nK)(l,lu);let lb=(0,I.yN)(l,ld,lu);lu.alchemy.p2w.sigils=(0,p.RG)(lu.alchemy.p2w.sigils,lb),lu.alchemy.liquidCauldrons=(0,p.jd)(lu),lu.gaming=(0,G.gm)(l,ld,lu,v),lu.atoms=(0,H.nK)(l,lu),lu.sailing=(0,I.x0)(l,lb,ld,lu,v,lg);let lf=(0,x.tS)(ly);ld=ld.map(l=>({...l,skillsInfo:lf[null==l?void 0:l.name]})),lu.accountLevel=null==ld?void 0:ld.reduce((l,o)=>{let{level:i}=o;return l+i},0),lu.highscores=getHighscores(l,lu),lu.shopStock=(0,c.u6)(l),lu.forge=getForge(l,lu),lu.refinery=(0,k.wt)(l,lu.storage,lu.tasks),lu.printer=(0,F.h)(l,ld,lu),lu.traps=(0,L.aQ)(ls),lu.quests=(0,D.zz)(ld),lu.islands=(0,_.P)(lu),lu.deathNote=(0,B.WA)(l,ld,lu),lu.killroy=(0,x.VS)(l,ld,lu,v),lu.anvil=ld.map(l=>{let{anvil:o}=l;return o});let lk=parseFloat(null==l?void 0:l.MoneyBANK),lw=null==ld?void 0:ld.reduce((l,o)=>l+parseFloat((null==o?void 0:o.money)?null==o?void 0:o.money:0),0),lx=lk+lw;lu.talentPoints=null==l?void 0:l.CYTalentPoints,lu.currencies.rawMoney=lx,lu.currencies.money=(0,r.getCoinsArray)(lx),lu.currencies.gems=null==l?void 0:l.GemsOwned,lu.currencies.KeysAll=(0,x.Ix)(null==lu?void 0:null===(Y=lu.currencies)||void 0===Y?void 0:Y.KeysAll,ld,lu),lu.currencies.ColosseumTickets=(0,x.cg)(null==lu?void 0:null===(K=lu.currencies)||void 0===K?void 0:K.ColosseumTickets,ld,lu),lu.currencies.penPals=null!==(la=null===(J=lu.accountOptions)||void 0===J?void 0:J[99])&&void 0!==la?la:0,lu.cooking.kitchens=(0,E.vu)(l,ld,lu),lu.libraryTimes=(0,x.W9)(l,ld,lu),lu.breeding=(0,N.XM)(l,lu),lu.divinity&&(lu.divinity.deities=(0,A.wl)(lu)),ld=null==ld?void 0:ld.map(l=>{let{carryCapBags:o}=l;return l.carryCapBags=null==o?void 0:o.map(o=>{let i=(0,x.HA)(null==o?void 0:o.Class),n=(0,x.z3)(i,l,lu);return{...o,capacityPerSlot:null==n?void 0:n.value,breakdown:null==n?void 0:n.breakdown,maxCapacity:(null==n?void 0:n.value)*(null==l?void 0:l.inventorySlots)}}),l.constructionSpeed=(0,n.x6)(l,lu),l.constructionExpPerHour=(0,n.NA)(l,lu),l}),lu.stamps=(0,a.bW)(lu,ld),lu.shrinesExpBonus=(0,d.n)(ld,lu),lu.msaTotalizer=(0,q.CU)(lu);let lT=Math.floor((null==lu?void 0:null===(lo=lu.deathNote)||void 0===lo?void 0:null===(ll=lo[0])||void 0===ll?void 0:null===($=ll.mobs)||void 0===$?void 0:$[0].kills)/1e6),lS=(null===(ln=lu.lab.labBonuses)||void 0===ln?void 0:null===(li=ln[13])||void 0===li?void 0:li.active)?1.5*lT:0,lE=lT*(null===(lt=lu.lab.labBonuses)||void 0===lt?void 0:null===(le=lt[9])||void 0===le?void 0:le.bonusOn);return lu.lab.labBonuses=(0,P.ww)(lu.lab.labBonuses,lE+lS,9),lu.totems=(0,q.Ew)(l),lu.tome=getTome(l,lu,ld,v),lu.owl=getOwl(l,lu),{accountData:lu,charactersData:ld}}},25081:function(l,o,i){i.d(o,{gN:function(){return getRawShopItems},u6:function(){return getShops}});var n=i(30925),e=i(70473);let getShops=l=>{let o=(null==l?void 0:l.ShopStock)||(0,n.tryToParse)(null==l?void 0:l.ShopStock);return parseShops(o)},parseShops=l=>l.reduce((l,o,i)=>{var n;let a=null===(n=Object.values(o))||void 0===n?void 0:n.reduce((l,o,n)=>{var a,u,d,s;let v=null==t?void 0:null===(a=t[i])||void 0===a?void 0:a[n],r=parseInt(o)||0;return r>0&&v?[...l,{amount:o,...null===(d=e.shops[i])||void 0===d?void 0:null===(u=d.items)||void 0===u?void 0:u[n],shopName:null===(s=e.shops[i])||void 0===s?void 0:s.name}]:l},[]);return[...l,a]},[]),getRawShopItems=()=>{var l;return null===(l=Object.entries(e.shops))||void 0===l?void 0:l.reduce((l,o)=>{var i;let[n,{items:e}]=o,a=null==e?void 0:null===(i=e.filter((l,o)=>{var i;return null==t?void 0:null===(i=t[n])||void 0===i?void 0:i[o]}))||void 0===i?void 0:i.map(l=>{let{rawName:o}=l;return o});return[...l,...a]},[]).toSimpleObject()},t={0:[3,8,13,14,17,23].toSimpleObject(),1:[2,8,9,13].toSimpleObject(),2:[0,1,2,3,4,5,6,7,8,9,10,18,19].toSimpleObject(),3:[12].toSimpleObject(),4:[0,1,2,8,9,10,19,22].toSimpleObject(),5:[2,3,4,8,9,10,11].toSimpleObject(),6:[0,1,2,3,4,5].toSimpleObject(),7:[0,1,2,3,4,5,6,7].toSimpleObject()}},70508:function(l,o,i){i.d(o,{aQ:function(){return getTraps},oH:function(){return getTrapsBonuses},q6:function(){return calcTotalCritters}});var n=i(70473),e=i(88054),t=i(30796);let getTraps=l=>parseTraps(l),parseTraps=l=>l.map(l=>{let o=(null==l?void 0:l.PldTraps)||[];return o.reduce((l,o)=>{var i;let[e,,t,a,u,d,s,v]=o;if(-1===e||"-1"===e)return l;let r=n.traps[d].find(l=>l.trapTime===s),c=s-t;return a?[...l,{name:null===(i=n.items[a])||void 0===i?void 0:i.displayName,rawName:a,crittersQuantity:u,trapType:d,trapExp:v,timeLeft:new Date().getTime()+1e3*c,trapData:r}]:l},[])}),calcTotalCritters=(l,o)=>{var i;let{critter:n,exp:e}=o;return null==l?void 0:null===(i=l.traps)||void 0===i?void 0:i.reduce((l,o)=>(o.reduce((o,i)=>{var t,a,u,d;let{crittersQuantity:s,trapExp:v,rawName:r}=i;l={...l,[r]:{critters:(null!==(u=null==l?void 0:null===(t=l[r])||void 0===t?void 0:t.critters)&&void 0!==u?u:0)+s*n,exp:(null!==(d=null==l?void 0:null===(a=l[r])||void 0===a?void 0:a.exp)&&void 0!==d?d:0)+v*e}}},{}),l),{})},getTrapsBonuses=(l,o)=>{let i=null==o?void 0:o.map((i,n)=>calcCrittersBonus({currentCharacterIndex:n,account:l,characters:o,isExp:!1})),n=null==o?void 0:o.map((i,n)=>calcCrittersBonus({currentCharacterIndex:n,account:l,characters:o,isExp:!0}));return{max:{critter:Math.max(...i||[1]),exp:Math.max(...n||[1])},min:{critter:Math.min(...i||[1]),exp:Math.min(...n||[1])}}},calcCrittersBonus=l=>{var o,i,n;let{currentCharacterIndex:a,account:u,characters:d,isExp:s}=l,v=s?0:(0,e.iu)(null==u?void 0:null===(o=u.alchemy)||void 0===o?void 0:o.vials,"TrapOvision");if((0,t.gW)(null==d?void 0:null===(i=d[a])||void 0===i?void 0:i.class,"Hunter")){let l=(0,t.L1)(d,2,"Hunter","EAGLE_EYE",s);v+=s?Math.max(40,Math.min((0,t._X)(null==l?void 0:l.talents,2,"EAGLE_EYE",s),99)):Math.max(50,(0,t._X)(null==l?void 0:l.talents,2,"EAGLE_EYE"))}else{let l=0;for(let o=0;o<(null==d?void 0:d.length);o++)if((0,t.gW)(null==d?void 0:null===(n=d[o])||void 0===n?void 0:n.class,"Hunter")){let o=(0,t.L1)(d,2,"Hunter","EAGLE_EYE",s,!0);l=Math.max(l,(0,t._X)(null==o?void 0:o.talents,2,"EAGLE_EYE",s,!0))}else l=Math.max(l,s?40:50);v+=l}return isNaN(v)?1:v/100}}}]);